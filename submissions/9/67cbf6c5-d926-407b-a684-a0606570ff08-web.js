/*! permutive-javascript-sdk v19.9.0 (web) (built 2022-05-18T14:23:25.118Z) */(()=>{"use strict";var __webpack_modules__={2688:(e,t,n)=>{function i(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}n.d(t,{w:()=>i})},7183:(e,t,n)=>{n.d(t,{h:()=>i});const i=e=>new r(e);class r{constructor(e){const t=this;this._worker=e,this._callbacks={},this._id=0,e.addEventListener("message",(function(e){r.onMessage(t,e)}))}set id(e){this._id=e}get id(){return this._id}newId(){const e=this.id;return this.id=this.id+1,e}static onMessage(e,t){if(n=t.data,!(Array.isArray(n)&&n.length>=2))return;var n;const[i,r,s]=t.data,o=e._callbacks[i];o&&(delete e._callbacks[i],o(r,s))}static isServiceWorker(e){return void 0!==e.controller}postMessage(e){const t=this,n=this.newId(),i=[n,e];return new Promise((function(e,s){var o;if(t._callbacks[n]=function(t,n){if(t)return s(new Error(t.message));e(n)},r.isServiceWorker(t._worker)){const e=new MessageChannel;e.port1.onmessage=function(e){r.onMessage(t,e)},null===(o=t._worker.controller)||void 0===o||o.postMessage(i,[e.port2])}else t._worker.postMessage(i)}))}}},1828:(e,t,n)=>{n.d(t,{ap:()=>r,gz:()=>c});var i=n(3735);function r(e,t){return function(n){return function(i){return e.ap(e.map(i,(function(e){return function(n){return t.ap(e,n)}})),n)}}}function s(e,t,n){return function(i){for(var r=Array(n.length+1),o=0;o<n.length;o++)r[o]=n[o];return r[n.length]=i,0===t?e.apply(null,r):s(e,t-1,r)}}var o={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(n){return[e,t,n]}}},4:function(e){return function(t){return function(n){return function(i){return[e,t,n,i]}}}},5:function(e){return function(t){return function(n){return function(i){return function(r){return[e,t,n,i,r]}}}}}};function a(e){return o.hasOwnProperty(e)||(o[e]=s(i.bc,e-1,[])),o[e]}function c(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=t.length,r=a(i),s=e.map(t[0],r),o=1;o<i;o++)s=e.ap(s,t[o]);return s}}},9320:(e,t,n)=>{n.d(t,{oA:()=>N,e5:()=>A,t9:()=>T,DZ:()=>B,Ew:()=>D,xH:()=>R,jV:()=>I,xb:()=>P,uK:()=>W,u4:()=>z,DY:()=>M,G0:()=>C,jj:()=>x});var i,r=n(3735),s=n(9384);n(4268),n(7209),i=void 0;s.Xl,s.Od;var o=s.ri,a=s.YM,c=(s.F4,a);s.Gb;var u=function(e){return e.length>0},d=function(e){return function(t){if(1===t.length)return f(t);for(var n=[h(t)],i=function(t){n.every((function(n){return!e.equals(n,t)}))&&n.push(t)},r=0,s=_(t);r<s.length;r++){i(s[r])}return n}},l=function(e){var t=d(e);return function(e){return function(n){return t((0,r.zG)(n,p(e)))}}},g=s.r1;function p(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var f=g,m=function(e){return[e]};s.F4;var h=c,_=function(e){return e.slice(1)};n(4011);var v=n(4870);n(5605);function w(e){return function(t,n){if(void 0===n){var i=w(e);return function(e){return i(t,e)}}for(var r,s=0;s<n.length;s++)if(r=n[s],e.equals(r,t))return!0;return!1}}var b=o,y=function(e){return function(t){for(var n=[],i=0;i<t.length;i++){var r=e(i,t[i]);s.pC(r)&&n.push(r.value)}return n}},k=function(e){return y((function(t,n){return e(n)}))},E=(r.yR,function(e,t){return q(e,(function(e,n,i){return t(n,i)}))}),q=function(e,t){return function(n){for(var i=n.length,r=e,s=0;s<i;s++)r=t(s,r,n[s]);return r}};s.F4;var P=function(e){return 0===e.length},S=u;function D(e){return function(e){return function(t){for(var n=0;n<t.length;n++)if(e(t[n]))return s.G(t[n]);return s.YP}}(e)}var O=function(e){return e.slice()},M=function(e){return function(t){return t.length<=1?O(t):t.slice().sort(e.compare)}};var T=w,x=function(e){var t=d(e);return function(e){return S(e)?t(e):O(e)}};function C(e){var t=l(e);return function(n,i){if(void 0===i){var r=C(e);return function(e){return r(e,n)}}return S(n)&&S(i)?t(i)(n):S(n)?O(n):O(i)}}function I(e){var t=T(e);return function(n,i){if(void 0===i){var r=I(e);return function(e){return r(e,n)}}return n.filter((function(e){return t(e,i)}))}}function A(e){var t=T(e);return function(n,i){if(void 0===i){var r=A(e);return function(e){return r(e,n)}}return n.filter((function(e){return!t(e,i)}))}}var j=m,L=function(e){return function(t){return(0,r.zG)(t,function(e){return function(t){for(var n=[],i=0;i<t.length;i++)n.push.apply(n,e(i,t[i]));return n}}((function(t,n){return e(n)})))}},R=L(r.yR),U=function(e){return function(t){for(var n=[],i=0;i<t.length;i++){var r=e(i,t[i]);s.pC(r)&&n.push(r.value)}return n}},B=function(e){return U((function(t,n){return e(n)}))},N=B(r.yR),W=function(e){return G((function(t,n){return e(n)}))},G=function(e){return function(t){for(var n=[],i=[],r=0;r<t.length;r++){var s=t[r];e(r,s)?i.push(s):n.push(s)}return(0,v.s4)(n,i)}},z=E;s.F4},70:(e,t,n)=>{n.d(t,{G5:()=>f,dO:()=>l,Pd:()=>_,tS:()=>h,g_:()=>E,ij:()=>S,fS:()=>q,nM:()=>w,tO:()=>b,t$:()=>s,UI:()=>d,Vn:()=>v,EQ:()=>k,F2:()=>o,LF:()=>P,i$:()=>O,Y3:()=>D});var i=n(3735),r=n(9384),s=r.t$,o=r.F2,a=function(e,t){return(0,i.zG)(e,d(t))},c=function(e,t){return(0,i.zG)(e,p(t))},u="Either",d=function(e){return function(t){return w(t)?t:o(e(t.right))}},l={URI:u,map:a},g=o,p=function(e){return function(t){return w(t)?t:w(e)?e:o(t.right(e.right))}},f={URI:u,map:a,ap:c},m=function(e){return function(t){return w(t)?t:e(t.right)}},h=m,_=function(e,t){return function(n){return w(n)?s(e(n.left)):o(t(n.right))}},v=function(e){return function(t){return w(t)?s(e(t.left)):t}},w=(i.yR,r.nM),b=r.tO,y=function(e,t){return function(n){return w(n)?e(n.left):t(n.right)}},k=y,E=k,q=function(e){return function(t){return w(t)?e(t.left):t.right}},P=function(e){return w(e)?o(e.left):s(e.right)},S=function(e){return function(t){return null==t?s(e):o(t)}},D=function(e,t){try{return o(e())}catch(e){return s(t(e))}},O=y(i.yR,i.yR);r.F4,r.Xl},4268:(e,t,n)=>{n.d(t,{Uz:()=>r,f7:()=>i,w4:()=>s});n(3735);var i=function(e){return{equals:function(t,n){return t===n||e(t,n)}}},r=function(e){return function(t){return i((function(n,i){return t.equals(e(n),e(i))}))}},s={equals:function(e,t){return e===t}};s.equals},6567:(e,t,n)=>{n.d(t,{DT:()=>a,EQ:()=>h,G:()=>o,UI:()=>u,Uo:()=>g,Wi:()=>f,Y3:()=>b,YP:()=>s,fS:()=>v,g_:()=>_,ij:()=>w,pC:()=>p,tS:()=>l});var i=n(3735),r=n(9384),s=(n(6017),n(4870),n(5605),r.YP),o=r.G;function a(e){return function(t){return e(t)?o(t):s}}var c=function(e){return"Left"===e._tag?s:o(e.right)},u=function(e){return function(t){return f(t)?s:o(e(t.value))}},d=o,l=function(e){return function(t){return f(t)?s:e(t.value)}},g=(i.yR,c),p=r.pC,f=function(e){return"None"===e._tag},m=function(e,t){return function(n){return f(n)?e():t(n.value)}},h=m,_=h,v=function(e){return function(t){return f(t)?e():t.value}},w=function(e){return null==e?s:o(e)},b=function(e){try{return o(e())}catch(e){return s}};r.F4,r.Xl},7209:(e,t,n)=>{n.d(t,{Fp:()=>c,VV:()=>a,Zt:()=>o,uZ:()=>u});var i=n(4268),r=n(3735),s=function(e){return function(t,n){return t===n||0===e(t,n)}},o=function(e){return{equals:s(e),compare:function(t,n){return t===n?0:e(t,n)}}},a=(r.W8,function(e){return function(t,n){return t===n||e.compare(t,n)<1?t:n}}),c=function(e){return function(t,n){return t===n||e.compare(t,n)>-1?t:n}},u=function(e){var t=a(e),n=c(e);return function(e,i){return function(r){return n(t(r,i),e)}}};i.w4.equals},6017:(e,t,n)=>{n.d(t,{ff:()=>i});n(3735);var i=function(e){return function(t){return!e(t)}}},356:(e,t,n)=>{n.d(t,{hX:()=>Q,jV:()=>B,xb:()=>A,XP:()=>L,dx:()=>R});n(4268);var i=n(3735),r=n(9384),s=(n(4870),n(2751)),o=(n(5605),function(e){for(var t in e)if(r.e$.call(e,t))return!1;return!0}),a=function(e){return function(t){return Object.keys(t).sort(e.compare)}};s.Df;var c=function(e,t){return function(n){if(r.e$.call(n,e)&&n[e]===t)return n;var i=Object.assign({},n);return i[e]=t,i}},u=function(e,t){return r.e$.call(t,e)};var d={};function l(e){return function(t){var n={};for(var i in t)r.e$.call(t,i)&&(n[i]=e(i,t[i]));return n}}function g(e){return l((function(t,n){return e(n)}))}function p(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return p(s.Df).apply(void 0,e);var n=a(e[0]);return function(e,t){return function(i){for(var r=e,s=n(i),o=s.length,a=0;a<o;a++){var c=s[a];r=t(c,r,i[c])}return r}}}function f(e){if("compare"in e){var t=a(e);return function(e){return function(n){return function(i){for(var r=e.empty,s=t(i),o=s.length,a=0;a<o;a++){var c=s[a];r=e.concat(r,n(c,i[c]))}return r}}}}return f(s.Df)(e)}function m(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return m(s.Df).apply(void 0,e);var n=a(e[0]);return function(e,t){return function(i){for(var r=e,s=n(i),o=s.length-1;o>=0;o--){var a=s[o];r=t(a,i[a],r)}return r}}}function h(e){return D(s.Df)(e)}function _(e){return function(t){var n={},i=!1;for(var s in t)if(r.e$.call(t,s)){var o=t[s];e(s,o)?n[s]=o:i=!0}return i?n:t}}var v=function(e){return function(t){return function(n){if(o(n)||o(t))return d;var i={};for(var r in n)u(r,t)&&(i[r]=e.concat(n[r],t[r]));return i}}},w=function(e,t){return(0,i.zG)(e,g(t))},b=function(e){var t=T(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},y=function(e){return function(t){var n=x(e)(t);return function(e,t){return(0,i.zG)(e,n(t))}}},k=function(e){var t=C(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},E=function(e){var t=p(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},q=function(e){var t=f(e);return function(e){var n=t(e);return function(e,t){return(0,i.zG)(e,n(t))}}},P=function(e){var t=m(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},S=function(e){var t=O(e);return function(e){var n=t(e);return function(e,t){return n(e,(0,i.ls)(i.SK,t))}}},D=function(e){var t=S(e);return function(e){var n=t(e);return function(e){return n(e,i.yR)}}},O=function(e){return function(t){var n=a(e);return function(e,i){var r=n(e);if(0===r.length)return t.of(d);for(var s=t.of({}),o=function(n){s=t.ap(t.map(s,(function(e){return function(t){return e[n]=t,e}})),i(n,e[n]))},a=0,c=r;a<c.length;a++){o(c[a])}return s}}},M=function(e){return _((function(t,n){return e(n)}))};function T(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=p(e[0]);return function(e,t){return n(e,(function(e,n,i){return t(n,i)}))}}return T(s.Df).apply(void 0,e)}function x(e){if("compare"in e){var t=f(e);return function(e){var n=t(e);return function(e){return n((function(t,n){return e(n)}))}}}return x(s.Df)(e)}function C(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=m(e[0]);return function(e,t){return n(e,(function(e,n,i){return t(n,i)}))}}return C(s.Df).apply(void 0,e)}var I="ReadonlyRecord";s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df;s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df;var A=o,j=function(e){return function(t){return Object.keys(t).sort(e.compare)}},L=j(s.Df);var R=c;function U(e){return h(e)}var B=function(e){return function(t){return function(n){return A(n)||A(t)?{}:v(e)(t)(n)}}},N=w,W=b,G=y,z=k,K=E,$=q,F=P,H=S,J=function(e){return function(t){var n=j(e);return function(e,i){var r=n(e);if(0===r.length)return t.of({});for(var s=t.of({}),o=function(n){s=t.ap(t.map(s,(function(e){return function(t){return e[n]=t,e}})),i(n,e[n]))},a=0,c=r;a<c.length;a++){o(c[a])}return s}}},Q=M;var Y="Record";s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df},4870:(e,t,n)=>{n.d(t,{s4:()=>i});n(3735);var i=function(e,t){return{left:e,right:t}}},5857:(e,t,n)=>{n.d(t,{e5:()=>g,Eh:()=>u,G0:()=>l});var i=n(4268),r=n(6017);new Set;var s=function(e){return function(t){for(var n,i=t.values(),r=!1;!r&&!(n=i.next()).done;)r=e(n.value);return r}};function o(e){return(0,r.ff)(s((0,r.ff)(e)))}function a(e){var t=c(e);return function(n,i){if(void 0===i){var r=a(e);return function(e){return r(e,n)}}return o((function(e){return t(e,i)}))(n)}}function c(e){return function(t,n){if(void 0===n){var i=c(e);return function(e){return i(t,e)}}for(var r,s=n.values(),o=!1;!o&&!(r=s.next()).done;)o=e.equals(t,r.value);return o}}var u=function(e){var t=a(e);return(0,i.f7)((function(e,n){return t(e,n)&&t(n,e)}))};function d(e){return function(t){for(var n,i=t.values(),r=new Set;!(n=i.next()).done;){var s=n.value;e(s)&&r.add(s)}return r}}function l(e){var t=f(e);return function(n,i){if(void 0===i){var r=l(e);return function(e){return r(n,e)}}if(p(n))return i;if(p(i))return n;var s=new Set(n);return i.forEach((function(e){t(e,s)||s.add(e)})),s}}function g(e){var t=f(e);return function(n,i){if(void 0===i){var r=g(e);return function(e){return r(e,n)}}return d((function(e){return!t(e,i)}))(n)}}new Set;var p=function(e){return 0===e.size},f=c},5151:(e,t,n)=>{n.d(t,{Hi:()=>h,PM:()=>m,UA:()=>_,UI:()=>u,dO:()=>f,of:()=>l,tD:()=>s,tS:()=>g});var i=n(3735),r=n(9384),s=function(e){return function(){return Promise.resolve().then(e)}};var o=function(e,t){return(0,i.zG)(e,u(t))},a=function(e,t){return(0,i.zG)(e,d(t))},c=function(e,t){return(0,i.zG)(e,g(t))},u=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},d=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},l=function(e){return function(){return Promise.resolve(e)}},g=function(e){return function(t){return function(){return Promise.resolve().then(t).then((function(t){return e(t)()}))}}},p="Task";var f={URI:p,map:o},m={URI:p,of:l},h={URI:p,map:o,ap:a},_={URI:p,map:o,of:l,ap:a,chain:c};i.yR,r.F4,r.Xl},7112:(e,t,n)=>{function i(e){return function(t,n){return function(i){return e.chain(i,(function(i){return e.map(n(i),(function(e){var n;return Object.assign({},i,((n={})[t]=e,n))}))}))}}}n.d(t,{Do:()=>J,ak:()=>Q,tS:()=>K,g_:()=>R,Uo:()=>j,fF:()=>A,t$:()=>T,F2:()=>x,Y3:()=>U});var r=n(1828),s=n(70),o=n(3735);function a(e,t){return function(n){return function(i){return e.map(i,(function(e){return t.map(e,n)}))}}}function c(e){return(0,o.ls)(s.F2,e.of)}function u(e){return(0,o.ls)(s.t$,e.of)}function d(e){return function(t){return e.map(t,s.F2)}}function l(e){return function(t){return e.map(t,s.t$)}}function g(e){return a(e,s.dO)}function p(e){return(0,r.ap)(e,s.G5)}function f(e){return function(t){return function(n){return e.chain(n,(function(n){return s.nM(n)?e.of(n):t(n.right)}))}}}function m(e){return function(t){return function(n){return e.chain(n,(function(n){return s.nM(n)?t():e.of(n)}))}}}function h(e){return function(t,n){return function(i){return e.map(i,s.Pd(t,n))}}}function _(e){return function(t){return function(n){return e.map(n,s.Vn(t))}}}function v(e){return function(t,n){return function(i){return e.map(i,s.EQ(t,n))}}}function w(e){return function(t,n){return function(i){return e.chain(i,s.EQ(t,n))}}}function b(e){return function(t){return function(n){return e.chain(n,s.EQ(t,e.of))}}}function y(e){return function(t){return function(n){return e.chain(n,(function(n){return s.nM(n)?t(n.left):e.of(n)}))}}}function k(e){var t=y(e);return function(n){return t((function(t){return e.map(n(t),(function(e){return s.nM(e)?e:s.t$(t)}))}))}}function E(e){return function(t){return function(n){return e.chain(n,s.EQ((function(n){return e.map(t(n),s.t$)}),(function(t){return e.of(s.F2(t))})))}}}function q(e){return function(t){return e.map(t,s.LF)}}function P(e){return function(t){return e.map(t,s.i$)}}var S=n(9384),D=n(5151),O=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},M=function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},T=u(D.PM),x=c(D.PM),C=d(D.dO),I=l(D.dO),A=(D.tD,D.tD,C),j=D.of,L=(D.tD,D.dO,w(D.UA)),R=L,U=(D.UA,function(e,t){return function(){return O(void 0,void 0,void 0,(function(){var n;return M(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e().then(S.F2)];case 1:return[2,i.sent()];case 2:return n=i.sent(),[2,S.t$(t(n))];case 3:return[2]}}))}))}}),B=(D.dO,D.UA,D.UA,D.UA,D.dO,function(e,t){return(0,o.zG)(e,G(t))}),N=function(e,t){return(0,o.zG)(e,z(t))},W=function(e,t){return(0,o.zG)(e,K(t))},G=g(D.dO),z=(D.dO,D.dO,p(D.Hi)),K=f(D.UA),$=(D.UA,x),F="TaskEither";var H={URI:F,map:B,ap:N,chain:W};var J=$(S.F4),Q=i(H);S.Xl},5605:(e,t,n)=>{function i(e,t){return function(n){var i=e.traverse(n);return function(e,r){return n.map(i(e,r),t.separate)}}}function r(e,t){return function(n){var i=e.traverse(n);return function(e,r){return n.map(i(e,r),t.compact)}}}n.d(t,{BL:()=>r,Fj:()=>i})},3735:(e,t,n)=>{n.d(t,{MZ:()=>r,Q1:()=>c,SK:()=>g,W8:()=>o,a9:()=>s,bc:()=>d,gn:()=>a,ls:()=>u,yR:()=>i,zG:()=>l});function i(e){return e}var r=i;function s(e){return function(){return e}}var o=s(!0),a=s(null),c=s(void 0);function u(e,t,n,i,r,s,o,a,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return i(n(t(e.apply(this,arguments))))};case 5:return function(){return r(i(n(t(e.apply(this,arguments)))))};case 6:return function(){return s(r(i(n(t(e.apply(this,arguments))))))};case 7:return function(){return o(s(r(i(n(t(e.apply(this,arguments)))))))};case 8:return function(){return a(o(s(r(i(n(t(e.apply(this,arguments))))))))};case 9:return function(){return c(a(o(s(r(i(n(t(e.apply(this,arguments)))))))))}}}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function l(e,t,n,i,r,s,o,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return i(n(t(e)));case 5:return r(i(n(t(e))));case 6:return s(r(i(n(t(e)))));case 7:return o(s(r(i(n(t(e))))));case 8:return a(o(s(r(i(n(t(e)))))));case 9:return c(a(o(s(r(i(n(t(e))))))));default:for(var u=arguments[0],d=1;d<arguments.length;d++)u=arguments[d](u);return u}}var g=function(e,t){return t}},9384:(e,t,n)=>{n.d(t,{F2:()=>d,F4:()=>h,G:()=>o,Gb:()=>f,Od:()=>g,Xl:()=>m,YM:()=>p,YP:()=>s,e$:()=>_,nM:()=>a,pC:()=>r,r1:()=>v,ri:()=>l,t$:()=>u,tO:()=>c});var i=function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},r=function(e){return"Some"===e._tag},s={_tag:"None"},o=function(e){return{_tag:"Some",value:e}},a=function(e){return"Left"===e._tag},c=function(e){return"Right"===e._tag},u=function(e){return{_tag:"Left",left:e}},d=function(e){return{_tag:"Right",right:e}},l=function(e){return[e]},g=function(e){return e.length>0},p=function(e){return e[0]},f=function(e){return e.slice(1)},m=[],h={},_=Object.prototype.hasOwnProperty,v=function(e){return i([e[0]],e.slice(1))}},4011:(e,t,n)=>{n.d(t,{Df:()=>r,Eq:()=>i});var i={equals:function(e,t){return e===t}},r={equals:i.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};i.equals,r.compare},2751:(e,t,n)=>{n.d(t,{Df:()=>r,Eq:()=>i,pn:()=>o,xb:()=>s});var i={equals:function(e,t){return e===t}},r={equals:i.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},s=function(e){return 0===e.length},o=function(e,t){return function(n){return n.endsWith(e,t)}}},655:(e,t,n)=>{n.d(t,{_T:()=>i,mG:()=>r});function i(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function r(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))}Object.create;Object.create},477:e=>{e.exports=function(e,t,n,i){var r=self||window;try{try{var s;try{s=new r.Blob([e])}catch(t){(s=new(r.BlobBuilder||r.WebKitBlobBuilder||r.MozBlobBuilder||r.MSBlobBuilder)).append(e),s=s.getBlob()}var o=r.URL||r.webkitURL,a=o.createObjectURL(s),c=new r[t](a,n);return o.revokeObjectURL(a),c}catch(i){return new r[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch(e){if(!i)throw Error("Inline worker is not supported");return new r[t](i,n)}}},7493:(e,t,n)=>{n.d(t,{P:()=>i,l:()=>r});const i="_pcrdbs",r="_pcrprs"},64:(e,t,n)=>{n.d(t,{CL:()=>h,D0:()=>a,ED:()=>u,EW:()=>_,MU:()=>y,PA:()=>r,PH:()=>m,T2:()=>s,UW:()=>b,Uy:()=>p,_v:()=>o,eV:()=>l,jH:()=>v,mL:()=>w,qr:()=>g,s$:()=>d,t2:()=>f,wI:()=>c});var i=n(5506);const r="$",s=(0,i.MU)("add_alchemy_entities",!1),o=(0,i.MU)("add_alchemy_taxonomy",!1),a=(0,i.MU)("engagement_edge_only",!0),c=(0,i.MU)("prebid_aggregated",!1),u=(0,i.MU)("segment_transition_edge_only",!0),d=(0,i.MU)("slotrendered_aggregated",!1),l=(0,i.MU)("track_form_submission",!0),g=(0,i.MU)("track_link_click",!0),p=(0,i.MU)("track_pageview_complete",!0),f=(0,i.MU)("track_pageview_engagement",!0),m=((0,i.$S)("sync_segments_cookie",!1),(0,i.$S)("track_slot_clicked",!0)),h=(0,i.$S)("track_slot_rendered",!0),_=(0,i.$S)("track_slot_viewable",!1),v=(0,i.$S)("track_targeting_keys",!1),w="_psegs",b=!0,y=6e5},274:(e,t,n)=>{n.d(t,{U:()=>i});const i={$ip_address:"$ip_address",$ip_address_hash:"$ip_address_hash",$ip_geo_info_city:"$ip_geo_info_city",$ip_geo_info_continent:"$ip_geo_info_continent",$ip_geo_info_country:"$ip_geo_info_country",$ip_geo_info_postal_code:"$ip_geo_info_postal_code",$ip_geo_info_province:"$ip_geo_info_province",$ip_isp_info_autonomous_system_organization:"$ip_isp_info_autonomous_system_organization",$ip_isp_info_isp:"$ip_isp_info_isp",$ip_isp_info_organization:"$ip_isp_info_organization"}},8764:(e,t,n)=>{n.d(t,{v:()=>s});class i{constructor(e,t,n,i,r,s,o){this.logger=e,this.permutive=t,this.id=n,this.segmentCode=i,this.triggerType=r,this.config=s,this.workspaceLevelConfig=o}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(e){return this.trackActivation("impression",e)}trackConversion(e){return this.trackActivation("conversion",e)}trackActivation(e,t){const n={reaction_id:this.id,type:e};this.permutive.track("Reaction",n,t),this.logger.log(n.type,n)}}var r=n(5506);class s{constructor(e,t,n){this.logger=e,this.permutive=t,this.clientContext=n,this.optimisedActivationsConfig={dfp:{dfp:[14823,12668,14830,14831,18570,14577,12475,13769,14848,14858,13520,13183,14282,13825,13826,13827,13828,107543,13829,13830,13831,13832,13855,13856,14919,13857,14921,14923,16243,14748,14851,13444,75203,13446,32334,12381,8015,8301,8500,8501,8502,9697,9705,13108,14371,8679,14808,10179,14812,14816,103641,71852,88397,10870,10869,29596,21542,10860,29598,21794,23694,29599,94379,28391,29568,29567,29569,29573,29574,32341,28538,28540,29575,29576,29581,29585,29592,29593,29590,29195,29594,29595,10856,10857,62592,13445,10116,10339,10428,10463,10622,10790,11122,7827,7834,7835,7838,7843,7844,7878,7880,7881,7925,7981,9702,9704,9812,9831,9837,7809,27457,10855,10853,32347,29219,32336,32344,32319,32337,32338,32321,32339,32340,29571,29572,32324,32348,29591,32333,32627,10868,92512,97745,73622,74544,103289,87823,103566],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[],nativo:[],rubicon_ssp:[75203,71852,7878,7835,29567,7827,9812,7838,7834,23694,21794,14282,74544,103566]}}getSpecializedActivations(e){return this.optimisedActivationsConfig[e]}getActivations(e){return(0,r.Hn)(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new i(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const t=e.cc,n=e=>{const t=this.clientContext.getContext()[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(i=t).operator?i.criteria.every(n):i.criteria.some(n));var i}}},5506:(e,t,n)=>{n.d(t,{$S:()=>o,Hn:()=>r,MU:()=>s});const i={standard_cohorts:{auto_init:!0,activationConfigs:[]},facebook_pixel_v2:{auto_init:!0,activationConfigs:[{id:"0ed6506e-86b6-4dc9-a8b5-d789ad83f9d5",tt:"EveryTime",sc:75203,c:{},wc:{}},{id:"48b301f0-7b30-4592-a2d0-0f30e888e8ff",tt:"EveryTime",sc:27457,c:{},wc:{}},{id:"0c8c006d-f100-4c31-844a-2f0964979b0e",tt:"EveryTime",sc:87823,c:{},wc:{}},{id:"94b429db-6ae5-455e-8051-596496873eb2",tt:"EveryTime",sc:94379,c:{},wc:{}},{id:"4f5ba495-9b2c-4307-abff-e8f2c20767b9",tt:"EveryTime",sc:7827,c:{},wc:{}},{id:"f102ed9c-e88f-491b-a9ba-b38e7cdbd49d",tt:"EveryTime",sc:8500,c:{},wc:{}},{id:"d17d9315-dee8-47ea-8947-4fb13c0682a6",tt:"EveryTime",sc:7878,c:{},wc:{}},{id:"4e413c56-0a6e-445f-8e6b-76271aeb3fe8",tt:"EveryTime",sc:7834,c:{},wc:{}},{id:"af55c080-b20a-4866-8591-049b81db2d0e",tt:"EveryTime",sc:7925,c:{},wc:{}},{id:"7d3ca916-0e58-424f-a320-a0614bb07218",tt:"EveryTime",sc:8301,c:{},wc:{}},{id:"42eb034c-c3c5-4f54-a98f-5ed3dfaa84ce",tt:"EveryTime",sc:7835,c:{},wc:{}},{id:"a73b0593-5cdc-4a58-a92a-1fe2dbbd56fb",tt:"EveryTime",sc:7844,c:{},wc:{}},{id:"c0825b0e-08e4-4484-ac0c-26bdda53c4bc",tt:"EveryTime",sc:7880,c:{},wc:{}},{id:"4ac11d0e-025f-4bf2-b3c9-0cab7bdc1e84",tt:"EveryTime",sc:10790,c:{},wc:{}},{id:"8c34b642-ea08-4459-a351-087becb9e196",tt:"EveryTime",sc:29585,c:{},wc:{}},{id:"34cfbde8-a2ba-4ca2-9cd1-798cc42bd30a",tt:"EveryTime",sc:29581,c:{},wc:{}},{id:"31135dfe-60a2-4d4a-938b-21f3e642533e",tt:"EveryTime",sc:29576,c:{},wc:{}},{id:"1b98f1f3-cd61-495d-b68e-aca099b5cfc3",tt:"EveryTime",sc:29575,c:{},wc:{}},{id:"b2d1aea9-159f-4a0c-9cfc-c9b4adc4c198",tt:"EveryTime",sc:29574,c:{},wc:{}},{id:"28980b31-a036-4173-be90-20dd2ee6e368",tt:"EveryTime",sc:29573,c:{},wc:{}},{id:"b7faa899-dd0a-46d9-97a7-40dc252fca56",tt:"EveryTime",sc:9702,c:{},wc:{}},{id:"5fdf2a99-35cc-449e-8309-1c044a6dd631",tt:"EveryTime",sc:13108,c:{},wc:{}},{id:"eaf16920-7523-47ca-8afc-77930f37900b",tt:"EveryTime",sc:10339,c:{},wc:{}},{id:"3d479081-1fd1-4021-829e-fd68fd013bc2",tt:"EveryTime",sc:10428,c:{},wc:{}},{id:"3ccc9990-7d02-4b43-9b06-3bdb7d8af28e",tt:"EveryTime",sc:10463,c:{},wc:{}},{id:"18eb408d-a7ba-4e93-8784-f777f397df60",tt:"EveryTime",sc:12381,c:{},wc:{}},{id:"20d4507b-d696-4927-add0-a757bed55f72",tt:"EveryTime",sc:13446,c:{},wc:{}},{id:"526e5fae-1a26-4adb-a8ff-92c50b823bed",tt:"EveryTime",sc:13183,c:{},wc:{}},{id:"24818515-af74-4ce3-b381-9e1c4a8017bb",tt:"EveryTime",sc:13444,c:{},wc:{}},{id:"55a265af-36b5-4e1f-98c7-ee357f1cdeeb",tt:"EveryTime",sc:13520,c:{},wc:{}},{id:"6b854d47-40bb-4b65-b524-48e53f055ad6",tt:"EveryTime",sc:13855,c:{},wc:{}},{id:"c01cf5b1-a4ec-46f6-89a5-bf699289cbdc",tt:"EveryTime",sc:13856,c:{},wc:{}},{id:"d8e48f59-3939-43f8-9490-d4879e29eac9",tt:"EveryTime",sc:29568,c:{},wc:{}},{id:"122537a4-2d14-4361-a64b-1ffc4192b0a1",tt:"EveryTime",sc:14816,c:{},wc:{}},{id:"8d10a12d-e2b5-42f5-81d8-f93c206a7506",tt:"EveryTime",sc:14831,c:{},wc:{}},{id:"a9c9c1fa-3d39-40b6-8d8a-1202734ef3de",tt:"EveryTime",sc:14830,c:{},wc:{}},{id:"06f8dcfa-8772-437f-9edb-93174280fa32",tt:"EveryTime",sc:14921,c:{},wc:{}},{id:"4aa0cf38-2d54-4c23-b029-dc8abd48e3d4",tt:"EveryTime",sc:13832,c:{},wc:{}},{id:"095c3857-c7c0-48d8-a8b2-6a83a2197e84",tt:"EveryTime",sc:13831,c:{},wc:{}},{id:"5339f27b-8d90-4134-a06a-181002f6bbf9",tt:"EveryTime",sc:28540,c:{},wc:{}},{id:"3dcaa5f4-410c-4d57-82ed-04c9ad93d8ca",tt:"EveryTime",sc:14923,c:{},wc:{}},{id:"12065647-0156-4e21-a4d2-3962e0d686d7",tt:"EveryTime",sc:29567,c:{},wc:{}},{id:"87772074-ba17-4300-9fc8-42291cac0bf0",tt:"EveryTime",sc:32344,c:{},wc:{}},{id:"07f315fd-153e-4fb0-94f9-b663e9c3bbfa",tt:"EveryTime",sc:16243,c:{},wc:{}},{id:"60400610-3797-46e9-988f-cb782413d922",tt:"EveryTime",sc:21542,c:{},wc:{}},{id:"c3380577-7f37-494f-9284-0dd37f947719",tt:"EveryTime",sc:32333,c:{},wc:{}},{id:"dc648101-ab67-47d5-8c30-55aece35c2d7",tt:"EveryTime",sc:62592,c:{},wc:{}},{id:"aab9dcc2-75b6-4cec-a458-458017d1edb1",tt:"EveryTime",sc:8679,c:{},wc:{}},{id:"f61ee07b-b5d8-4aec-8e2a-2b8e3a7851b8",tt:"EveryTime",sc:9837,c:{},wc:{}},{id:"c1987ed5-c8e3-427c-ba22-d11e378d1d5f",tt:"EveryTime",sc:29582,c:{},wc:{}},{id:"8c56e023-c74d-4f7c-b6a0-9de81d4fbf4f",tt:"EveryTime",sc:7838,c:{},wc:{}},{id:"a2f49540-2400-4c0e-9d96-00d5e5cad698",tt:"EveryTime",sc:7981,c:{},wc:{}},{id:"5f729325-6172-4b26-bebf-3c24c8ff9d4f",tt:"EveryTime",sc:28391,c:{},wc:{}},{id:"0632ef5a-99ff-44d0-b9f4-2c801e8e586a",tt:"EveryTime",sc:7843,c:{},wc:{}},{id:"df5e61bf-b9cb-4877-8f04-57331c0535b6",tt:"EveryTime",sc:29572,c:{},wc:{}},{id:"9fd82d2f-52b4-442d-9e76-924745433b66",tt:"EveryTime",sc:10116,c:{},wc:{}},{id:"b67786e8-85e3-4f8c-84b7-1f9569aed52e",tt:"EveryTime",sc:8015,c:{},wc:{}},{id:"6229e725-2cad-48e6-b231-2fa79f31168c",tt:"EveryTime",sc:8502,c:{},wc:{}},{id:"4d773dd9-c2e7-441c-bfb5-0baec6abbcef",tt:"EveryTime",sc:12668,c:{},wc:{}},{id:"895e7c22-757d-45b5-a894-1f3e8f599b5e",tt:"EveryTime",sc:29571,c:{},wc:{}},{id:"0ec592da-b975-4e76-bcd7-98ffa21a4a18",tt:"EveryTime",sc:7881,c:{},wc:{}},{id:"29d0b5f5-cf0d-4d47-a604-5c934709d8ce",tt:"EveryTime",sc:29569,c:{},wc:{}},{id:"3e672429-c3f1-4197-be59-18541ba47ad2",tt:"EveryTime",sc:28538,c:{},wc:{}},{id:"59206936-e04e-49cf-b973-aa7e21721966",tt:"EveryTime",sc:9705,c:{},wc:{}},{id:"86dd6f6d-ac07-4592-aa84-94455b5cf41a",tt:"EveryTime",sc:29591,c:{},wc:{}},{id:"96f7a717-81a5-4daa-8c0d-41ecfb190f23",tt:"EveryTime",sc:29590,c:{},wc:{}},{id:"19bcf78a-d38b-4c81-a6ea-b2e4af0cff71",tt:"EveryTime",sc:29596,c:{},wc:{}},{id:"c91a5813-1dc1-4b01-8683-75964721bbdf",tt:"EveryTime",sc:29595,c:{},wc:{}},{id:"cae99a5c-20eb-497a-9e46-e14be25f741f",tt:"EveryTime",sc:32348,c:{},wc:{}},{id:"5ca3b272-07c3-4845-baa1-d0436d1a8fca",tt:"EveryTime",sc:9704,c:{},wc:{}},{id:"3c914c42-a204-4293-b704-40ffec52a02b",tt:"EveryTime",sc:9831,c:{},wc:{}},{id:"590b5761-74f9-4b4f-9f4c-b549f467ef4a",tt:"EveryTime",sc:29219,c:{},wc:{}},{id:"80aaea92-5225-45ce-b3c1-c4bc042f381e",tt:"EveryTime",sc:29592,c:{},wc:{}},{id:"bd7c9e1a-c4ee-4708-b7a5-9284a72b588c",tt:"EveryTime",sc:32334,c:{},wc:{}},{id:"586e6ac3-1219-496c-bdb3-562a5e981e75",tt:"EveryTime",sc:8501,c:{},wc:{}},{id:"4e1257f0-0089-40a8-bf07-cff4b1cdfb5f",tt:"EveryTime",sc:29598,c:{},wc:{}},{id:"87f6216f-46c6-46ea-b3a2-a5b6bb761292",tt:"EveryTime",sc:9812,c:{},wc:{}},{id:"ba3dce83-23a6-4a6f-b389-4fe48c4cee3f",tt:"EveryTime",sc:10853,c:{},wc:{}},{id:"a580addc-2b5c-4289-94ec-836071ecf26e",tt:"EveryTime",sc:9697,c:{},wc:{}},{id:"89ce536c-981a-42c7-8b05-2d2140ebcba5",tt:"EveryTime",sc:10179,c:{},wc:{}},{id:"6c4b3691-1aa4-482f-8bf0-3a999078fb15",tt:"EveryTime",sc:14808,c:{},wc:{}},{id:"81236014-afa3-4f37-8f1c-fa5fe708b1c3",tt:"EveryTime",sc:29599,c:{},wc:{}},{id:"63fd9b90-473e-4cf9-af63-ebe735a9d420",tt:"EveryTime",sc:29594,c:{},wc:{}},{id:"b53d6259-9920-4b9b-afd8-9a278ff6918d",tt:"EveryTime",sc:29593,c:{},wc:{}},{id:"b79da73e-c40a-414f-8ea2-1e7533216cee",tt:"EveryTime",sc:32336,c:{},wc:{}},{id:"5e5a1f57-19ce-436c-b5f7-00e178b8f15d",tt:"EveryTime",sc:12475,c:{},wc:{}},{id:"5943b9c0-87b0-4502-8f83-a922612cf1e9",tt:"EveryTime",sc:10622,c:{},wc:{}},{id:"dcff063e-4321-476d-83aa-c3c1a87289d8",tt:"EveryTime",sc:32319,c:{},wc:{}},{id:"10eb9340-10b6-44ca-bee6-564b2dc20828",tt:"EveryTime",sc:32337,c:{},wc:{}},{id:"b769d8e2-b2a1-4b0d-b441-13129a09b7e1",tt:"EveryTime",sc:11122,c:{},wc:{}},{id:"941f9a9b-9954-4ceb-93cc-b895c743d93b",tt:"EveryTime",sc:14371,c:{},wc:{}},{id:"c9e04bff-01f5-41e3-b499-c2ba2bb9b73b",tt:"EveryTime",sc:14282,c:{},wc:{}},{id:"db0e0ffb-0a17-4b68-b9cd-10e1154d49ad",tt:"EveryTime",sc:14823,c:{},wc:{}},{id:"3c6f23f6-67be-40f5-9ad6-b1379a44021c",tt:"EveryTime",sc:14851,c:{},wc:{}},{id:"f51fc5c2-2897-4b0b-97ac-db0ecb90d7d0",tt:"EveryTime",sc:14858,c:{},wc:{}},{id:"5a0ecef7-17ec-42f2-bdb4-0fdf3771bf9c",tt:"EveryTime",sc:18570,c:{},wc:{}},{id:"6f036bf9-f3de-4048-9205-4602bc6627bf",tt:"EveryTime",sc:13445,c:{},wc:{}},{id:"e65cdf0e-1948-45ea-af9a-a83d75525441",tt:"EveryTime",sc:14812,c:{},wc:{}},{id:"8e3b9e5f-21ab-43fb-9598-599cea29a7d1",tt:"EveryTime",sc:13769,c:{},wc:{}},{id:"b03b54a9-f4a5-4469-8b61-4cbf127b70c0",tt:"EveryTime",sc:14577,c:{},wc:{}},{id:"bb7b6d70-9c1f-46f0-9b7f-5038364af096",tt:"EveryTime",sc:14848,c:{},wc:{}},{id:"5ab87078-bd2f-4ce5-81cd-7aa7d940e77f",tt:"EveryTime",sc:14919,c:{},wc:{}},{id:"0412b944-6be4-4751-9858-085f5ebe20b0",tt:"EveryTime",sc:32338,c:{},wc:{}},{id:"a171f9a1-7e9f-4a53-b44c-3a76bf32f16a",tt:"EveryTime",sc:13857,c:{},wc:{}},{id:"74185b5d-8d11-4e2f-89c5-d761ffe16f1c",tt:"EveryTime",sc:32339,c:{},wc:{}},{id:"3fa25e6e-e2ba-4f7c-8dea-5b256a52b216",tt:"EveryTime",sc:32340,c:{},wc:{}},{id:"aacfdfda-d26e-4fc5-ba61-4f7658a5fac6",tt:"EveryTime",sc:13829,c:{},wc:{}},{id:"27214846-04f8-4e68-b661-e35c544c2bba",tt:"EveryTime",sc:29195,c:{},wc:{}},{id:"f228f9a4-0c6e-4631-a210-6e8d1bd5c94c",tt:"EveryTime",sc:32321,c:{},wc:{}},{id:"71080b67-ec1f-4f57-b3d8-73fcda19384f",tt:"EveryTime",sc:13830,c:{},wc:{}},{id:"77efd1da-e96f-4de9-8b37-ce1f4288a0d8",tt:"EveryTime",sc:13828,c:{},wc:{}},{id:"d154c025-2847-4661-a0de-cd18dd7c3eac",tt:"EveryTime",sc:13827,c:{},wc:{}},{id:"379b2227-795e-4135-8da4-f26a895e19ac",tt:"EveryTime",sc:21794,c:{},wc:{}},{id:"543b957d-d566-4644-973a-29a0b312b702",tt:"EveryTime",sc:14748,c:{},wc:{}},{id:"3fa26517-4753-438f-82c7-39cf5820e161",tt:"EveryTime",sc:13825,c:{},wc:{}},{id:"ec0d40d2-559f-4ff2-95be-a03206c5d536",tt:"EveryTime",sc:23694,c:{},wc:{}},{id:"0b91540d-4ac1-4c0d-bb2d-53e778953db0",tt:"EveryTime",sc:32324,c:{},wc:{}},{id:"2e2d3d51-ee38-4d3a-802b-4552f3ecff2d",tt:"EveryTime",sc:32341,c:{},wc:{}},{id:"f116cad5-ff67-485a-abd5-f96ad7612af8",tt:"EveryTime",sc:13826,c:{},wc:{}},{id:"32c72112-0585-44b8-8754-ea5df11bc086",tt:"EveryTime",sc:32347,c:{},wc:{}},{id:"68b5b24b-d79e-4e03-9b65-cf01289449a6",tt:"EveryTime",sc:32627,c:{},wc:{}},{id:"2c55f6f4-b7d6-403e-9bc7-ce1e3cd6ec54",tt:"EveryTime",sc:92512,c:{},wc:{}},{id:"fb1ff65c-4a59-4363-9cb7-ddbda8cae1a3",tt:"EveryTime",sc:103566,c:{},wc:{}}]},overlays:{auto_init:!0,activationConfigs:[]},tracking_pixel:{auto_init:!0,activationConfigs:[{id:"1260c0d2-30be-419b-8d41-6def4f1ebdc6",tt:"OnEntry",sc:14831,c:{pixel_url:"http://pixel.rubiconproject.com/tag.php?v=597474"},wc:{}},{id:"020bd700-cbae-4c24-a147-b61030e99128",tt:"OnEntry",sc:7844,c:{pixel_url:"http://pixel.rubiconproject.com/tag.php?v=599814"},wc:{}},{id:"0d476a00-46d8-400f-9aac-962263244d83",tt:"OnEntry",sc:7880,c:{pixel_url:"http://pixel.rubiconproject.com/tag.php?v=599816"},wc:{}},{id:"86d3c640-8ea1-46c8-97ee-4bf686192f59",tt:"OnEntry",sc:9702,c:{pixel_url:"http://pixel.rubiconproject.com/tag.php?v=599818"},wc:{}}]},rubicon_ssp:{auto_init:!0,publisher_id:"11092",activationConfigs:[]},scriptrunner:{auto_init:!0,activationConfigs:[]},appnexus:{auto_init:!0,member_id:12905,activationConfigs:[]},pubmatic:{auto_init:!0,dpid:"156924",activationConfigs:[]},clean_room:{auto_init:!0,publisher_permissions:{"457bba0a-09f0-4299-83a0-c2266b870bdd":["allow_insights","allow_targeting_core_audiences"],"4fc70213-5dd0-4a51-9396-e59ee458a537":["allow_insights","allow_targeting_core_audiences"],"bf9865e1-b5de-466a-bbbf-3a6327803f8d":["allow_insights","allow_targeting_core_audiences"],"d564f72e-f80f-4eb8-9253-86550a50fd8b":["allow_insights","allow_targeting_core_audiences"]},activationConfigs:[]},dfp:{auto_init:!0,networks:[{network_code:"5185",name:"Default"}],track_slot_rendered:!1,track_slot_viewable:!0,track_slot_clicked:!0,track_targeting_keys:!1,activationConfigs:[]},twitter_pixel:{auto_init:!0,activationConfigs:[]},web:{auto_init:!0,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]}},r=e=>{const t=i[e];return(e,n)=>{var i;return null!==(i=null==t?void 0:t[e])&&void 0!==i?i:n}},s=r("web"),o=r("dfp");r("facebook_pixel_v2"),r("socio_demo_cohorts")},427:(e,t,n)=>{n.d(t,{z:()=>r});var i=n(3629);class r extends class{constructor(e){this.context=e}getContext(){return this.context}updateContext(...e){e.forEach((([e,t])=>{this.context[e]=t}))}}{constructor(e){super(e)}getClient(){var e;const t=null!==(e=document.title)&&void 0!==e?e:"";return Promise.resolve({type:"web",user_agent:navigator.userAgent||"",url:(0,i.bk)(window.location.href),domain:window.location.hostname||"",title:t,referrer:(0,i.bk)(document.referrer)})}}},1228:(e,t,n)=>{n.d(t,{E:()=>i});class i{constructor(){this.crypto=window.crypto||window.msCrypto,this.ALG_NAME="AES-GCM"}generateKey(e=!1){return this.crypto.subtle.generateKey({name:this.ALG_NAME,length:256},e,["encrypt","decrypt"])}encrypt(e,t){const[n,i]=this._encrypt(e,this.str2bytes(t));return n.then((e=>{const t=new Uint8Array(16+e.byteLength);return t.set(i,0),t.set(new Uint8Array(Uint32Array.of(e.byteLength).buffer),12),t.set(new Uint8Array(e),16),t.buffer}))}decrypt(e,t){const n=new Uint8Array(t,0,12),i=new Uint32Array(t,12,1)[0],r=t.slice(16,16+i);return this._decrypt(e,n,r).then(this.bytes2str)}_encrypt(e,t){const n=this.crypto.getRandomValues(new Uint8Array(12));return[this.crypto.subtle.encrypt({name:this.ALG_NAME,iv:n},e,t),n]}_decrypt(e,t,n){return this.crypto.subtle.decrypt({name:this.ALG_NAME,iv:t},e,n)}str2bytes(e){return(new TextEncoder).encode(e).buffer}bytes2str(e){return(new TextDecoder).decode(e)}}},4572:(e,t,n)=>{n(6013)},2923:(e,t,n)=>{n.d(t,{X:()=>i});class i{constructor(){this.properties={}}overrideCustomProps(e){this.properties=e}getCustomProps(){return this.properties}}},4314:(e,t,n)=>{n.d(t,{c:()=>o});var i=n(3735),r=n(550),s=n(7545);class o{constructor(e,t,n,i,r,o){this.eventHandler=e,this.api=t,this.metrics=n,this.userId=i,this.network=r,this.eventsCache=o,this.DEBOUNCE_TIME=500,this.MAX_DEBOUNCE_TIME=5e3,this.batch={requestData:[],requestOptions:[],processingStrategies:[]},this.scheduler=new s.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedFlushIfNotEmpty=this.scheduler.schedule(this.flush.bind(this)),this.scheduler.scheduleForPageUnload((()=>this.flushWithBeacon.bind(this)(this.batch)))}add(e,t,n){return this.batch.requestData.push(e),this.batch.requestOptions.push(t),this.batch.processingStrategies.push(n),this.debouncedFlushIfNotEmpty(this.batch),Promise.resolve()}flush(e){return this.flushIfNotEmpty(e,!1)}flushWithBeacon(e){return this.flushIfNotEmpty(e,!0)}flushIfNotEmpty(e,t){const{requestData:n,requestOptions:r,processingStrategies:s}=e,o=e=>this.network.error(`Error sending events batch. Got ${JSON.stringify(e)}`,this.userId.get()),a=t?(0,i.ls)((e=>this.api.trackBatchBeacon(e)),(e=>Promise.resolve())):e=>this.api.trackBatch(this.metrics,e);return n.length>0?(0,i.zG)(this.resetBatch(),(e=>this.trackMetrics(n)),(e=>a(n).then((e=>this.isBatchResponse(e)?this.onBatchResponseSuccess(e,n,r,s):(0,i.Q1)())).catch(o))):Promise.resolve()}onBatchResponseSuccess(e,t,n,s){const o=(e,t)=>"never"!==t?(0,i.ls)((()=>this.eventHandler.newEvent((0,r.XO)(e),null)),(()=>this.eventsCache.add(e,{persistOnDisk:!0}))):i.Q1,a=(e,t,n)=>{const r={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,id:null,time:(new Date).toISOString()};return(0,i.zG)(n(e.error.message),(t=>console.error(e)),(t=>this.eventHandler.newEvent(r,e)))};return e.forEach((({body:e},c)=>{const u=t[c],d=n[c],l=s[c];return(0,r.bk)(e)?a(e,u,d.error):((e,t,n,s)=>{const a=(0,r.mh)(e,t);return(0,i.zG)(n(a),o(a,s))})(e,u,d.success,l)}))}resetBatch(){this.batch={requestData:[],requestOptions:[],processingStrategies:[]}}trackMetrics(e){this.metrics.track({name:"sdk_events_batch_size_total",value:e.length,labels:{}}),this.metrics.track({name:"sdk_events_batch_size_bytes",value:2*JSON.stringify(e).length,labels:{}})}isBatchResponse(e){return!!e}}},3562:(e,t,n)=>{n.d(t,{P:()=>L});var i=n(70),r=n(3735),s=n(6567),o=n(550),a=n(6013),c=n(1228),u=n(7112),d=n(2485),l=n(655);let g,p;const f=new WeakMap,m=new WeakMap,h=new WeakMap,_=new WeakMap,v=new WeakMap;let w={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return m.get(e);if("objectStoreNames"===t)return e.objectStoreNames||h.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return k(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function b(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(p||(p=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(E(this),t),k(f.get(this))}:function(...t){return k(e.apply(E(this),t))}:function(t,...n){const i=e.call(E(this),t,...n);return h.set(i,t.sort?t.sort():[t]),k(i)}}function y(e){return"function"==typeof e?b(e):(e instanceof IDBTransaction&&function(e){if(m.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));m.set(e,t)}(e),t=e,(g||(g=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,w):e);var t}function k(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(k(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&f.set(t,e)})).catch((()=>{})),v.set(t,e),t}(e);if(_.has(e))return _.get(e);const t=y(e);return t!==e&&(_.set(e,t),v.set(t,e)),t}const E=e=>v.get(e);function q(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),a=k(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(k(o.result),e.oldVersion,e.newVersion,k(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),a}const P=["get","getKey","getAll","getAllKeys","count"],S=["put","add","delete","clear"],D=new Map;function O(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(D.get(t))return D.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=S.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!P.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),r&&s.done]))[0]};return D.set(t,s),s}w=(e=>({...e,get:(t,n,i)=>O(t,n)||e.get(t,n,i),has:(t,n)=>!!O(t,n)||e.has(t,n)}))(w);var M=n(2688),T=n(5151);function x(e){return"development"===e.environment?window.isSecureContext:"https:"===window.location.protocol}class C{constructor(e,t,n,i,r,s,o){this.namespace=e,this.logger=t,this.cryptoAlg=n,this.idb=i,this.mainObjectStore=r,this.keyObjectStore=s,this.keyObjectKey=o,this.MAX_CONSECUTIVE_PUTS=30,this.puts=1,this.cryptoKey=this.getOrGenerateKey()}static initialise(e,t,n,s,o,c,d,l,g,p){const f=(0,a.G6)(navigator.userAgent)&&!1,m=[x(e),!f].every((e=>!0===e)),h=(e,t,n)=>t.includes(n)?(0,r.Q1)():e.createObjectStore(n),_=m?(0,i.Y3)((()=>function(e){if(!(0,a.G6)(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let t,n=0;return new Promise((e=>{const i=()=>(n++,indexedDB.databases().finally(e));t=window.setInterval(i,100),i()})).finally((()=>{clearInterval(t),e.track({name:"sdk_idb_conn_attempt_safari_count",value:n,labels:{}})}))}(n).then((()=>q(c,p,{upgrade:e=>{const t=[...e.objectStoreNames];h(e,t,d),h(e,t,l)}})))),(e=>String(e))):(0,i.t$)("Connection not attempted. Default to localStorage");return(0,i.g_)((e=>(0,u.t$)(e)),(e=>(0,u.Y3)((()=>e.then((e=>new C(t,s,o,e,d,l,g)))),(e=>String(e)))))(_)}put(e,t){return(0,l.mG)(this,void 0,void 0,(function*(){return(0,r.zG)((()=>(0,l.mG)(this,void 0,void 0,(function*(){return(0,r.bc)(JSON.stringify(e),yield this.cryptoKey)}))),(0,T.tS)((([e,t])=>(0,T.of)(this.cryptoAlg.encrypt(t,e)))),(0,T.tS)((e=>()=>(0,l.mG)(this,void 0,void 0,(function*(){return yield this.resetIfRequired(this.puts++),e})))),(0,T.tS)((e=>this.putWithRetryOnError(this.mainObjectStore,e,this.namespace.getNamespacedStorageKey(String(t))))),(e=>(0,l.mG)(this,void 0,void 0,(function*(){return(0,r.zG)(yield e(),(0,i.g_)((e=>{throw this.logger.error(`IDB: Failed to put "${t}" due to unexpected error,\n`,e),e}),(()=>(this.logger.debug(`IDB: Successfully put "${t}"`),t))))}))))}))}get(e){return this.cryptoKey.then((t=>(0,r.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>this.idb.get(this.mainObjectStore,e).then((e=>e?this.cryptoAlg.decrypt(t,e):null)).then(JSON.parse)))))}delete(e){return(0,r.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>this.idb.delete(this.mainObjectStore,e)))}deleteStore(){return Promise.resolve(this.idb.close()).then((e=>function(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(()=>t())),k(n).then((()=>{}))}(this.idb.name)))}getOrGenerateKey(){return(0,r.zG)(this.namespace.getNamespacedStorageKey(this.keyObjectKey),(e=>this.idb.get(this.keyObjectStore,e).then((e=>e||this.storeGivenOrGeneratedKey()))))}storeGivenOrGeneratedKey(e=this.cryptoAlg.generateKey(!1)){return(0,r.zG)((0,T.of)(this.namespace.getNamespacedStorageKey(this.keyObjectKey)),(0,T.tS)((t=>()=>(0,l.mG)(this,void 0,void 0,(function*(){return this.putWithRetryOnError(this.keyObjectStore,yield e,t)()})))),(t=>(0,l.mG)(this,void 0,void 0,(function*(){return(0,r.zG)(yield t(),(0,i.g_)((e=>{throw this.logger.error("IDB: Failed to store crypto key due to unexpected error,\n",e),e}),(()=>e)))}))))}resetIfRequired(e){return(0,a.G6)(navigator.userAgent)&&e%this.MAX_CONSECUTIVE_PUTS==0?this.reset():Promise.resolve()}reset(){return(0,l.mG)(this,void 0,void 0,(function*(){const e=this.idb.name,t=this.idb.version;yield this.deleteStore(),this.idb=yield q(e,t,{upgrade:e=>{e.createObjectStore(this.mainObjectStore),e.createObjectStore(this.keyObjectStore)}}),yield this.storeGivenOrGeneratedKey(this.cryptoKey)}))}restartIDB(){return(0,u.Y3)((()=>(0,l.mG)(this,void 0,void 0,(function*(){this.logger.debug("IDB: Restarting connection...");const{name:e,version:t}=this.idb;return this.idb.close(),this.idb=yield q(e,t)}))),M.w)}putWithRetryOnError(...e){const t=()=>this.idb.put(...e);return(0,r.zG)((0,u.Y3)(t,M.w),(0,u.g_)((e=>{const{name:n,message:s}=e;return this.logger.debug("IDB: put failed with exception",n,s),"InvalidStateError"===n?(0,r.zG)(this.restartIDB(),(0,u.tS)((e=>(0,u.Y3)(t,M.w)))):(0,T.of)((0,i.t$)(e))}),(0,r.ls)(i.F2,T.of)))}}var I=n(3195);class A{constructor(e,t,n,s,o,a,c,u,l,g){this.version=3,this.db=((e,t,n,i,s,o,a,c,u,l,g)=>(0,r.zG)(C,(0,d._)({logger:l,consentTracking:g})).initialise(e,t,n,l,i,s,o,a,c,u))(e,t,n,s,o,a,c,u,this.version,l,g)().then((0,i.fS)((e=>(0,I.S)(t,l,g))))}put(e,t){return(0,u.Y3)((()=>this.db.then((n=>n.put(e,t)))),(e=>String(e)))}get(e){return(0,u.Y3)((()=>this.db.then((t=>t.get(e))).then(s.ij)),(e=>String(e)))}delete(e){return(0,u.Y3)((()=>this.db.then((t=>t.delete(e)))),(e=>String(e)))}deleteStore(){return(0,u.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}}const j="permutive-events-cache";class L{constructor(e,t,n,i,o,u,d,l){this.config=e,this.namespace=t,this.logger=n,this.network=i,this.trace=o,this.metrics=u,this.userId=d,this.consentTracking=l,this.EVENTS_CACHE_OBJECT_STORE="events",this.CRYPTO_KEY_OBJECT_STORE="keys",this.CRYPTO_KEY_OBJECT_KEY="events",this.eventPutQueue=Promise.resolve(),this.eventCacheSizeInBytes=0,this.eventsTTLInMilliseconds=(0,r.zG)((0,s.ij)(this.config.eventsTTLInDays),(0,s.tS)((e=>"number"==typeof e&&e>0?(0,s.G)(24*e*3600):s.YP))),this.eventStore=new A(this.config,this.namespace,this.metrics,new c.E,"67cbf6c5-d926-407b-a684-a0606570ff08",`${this.EVENTS_CACHE_OBJECT_STORE}_${d.get()}`,`${this.CRYPTO_KEY_OBJECT_STORE}_${d.get()}`,this.CRYPTO_KEY_OBJECT_KEY,this.logger,this.consentTracking);const g=this.trace.startSpan("load_event_cache");this.eventsCache=(0,a.PQ)((()=>this.loadFromDisk().then((e=>(this.logger.log("Event cache loaded, #e",e.length),g.finish(),e)))))}all(){return this.eventsCache}resetIfNeeded(){return Promise.resolve(!1)}add(e,t){const{persistOnDisk:n}=t;return this.eventsCache.then((t=>(0,r.zG)(t.push(e),(e=>n?this.flush():(0,r.Q1)()),(t=>e))))}filterEventsByWorkspace(e){return e}loadFromDisk(){this.logger.log("Loading event caching...");const e=[],t=this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{});return this.eventStore.get(j)().then((n=>{this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",t);const a=(0,s.g_)((()=>Promise.resolve(e)),(e=>(0,r.zG)(this.filterEventsByWorkspace(e),(e=>(this.eventCacheSizeInBytes=2*JSON.stringify(e).length,this.metrics.track({name:"sdk_events_cache_byte_total",value:this.eventCacheSizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:e.length,labels:{}}),e)),(e=>e.map(o.kJ)),(e=>(0,s.g_)((()=>e),(t=>e.filter((e=>t>Date.now()-e.time.getTime()))))(this.eventsTTLInMilliseconds)),(e=>Promise.resolve(e)))));return(0,i.g_)((t=>(this.network.error(`Error fetching data from store. Got ${t}`),this.reset().then((t=>e)))),a)(n)}))}reset(){return this.logger.log("Resetting Events Cache"),this.eventsCache=Promise.resolve([]),this.eventCacheSizeInBytes=0,this.eventStore.deleteStore()().then((()=>(this.eventStore=new A(this.config,this.namespace,this.metrics,new c.E,"67cbf6c5-d926-407b-a684-a0606570ff08",`${this.EVENTS_CACHE_OBJECT_STORE}_${this.userId.get()}`,`${this.CRYPTO_KEY_OBJECT_STORE}_${this.userId.get()}`,this.CRYPTO_KEY_OBJECT_KEY,this.logger,this.consentTracking),this.flush())))}flush(){return this.eventsCache.then((e=>{let t=JSON.stringify(e),n=1;for(;t.length>this.config.eventsCacheLimitBytes/2;)e.splice(0,n),n*=2,t=JSON.stringify(e);this.logger.log("Writing cache (#e)",e.length),this.eventCacheSizeInBytes=2*t.length,this.eventPutQueue=this.eventPutQueue.then((t=>this.eventStore.put(e.map(o.XO),j)().then(r.Q1)))}))}getStateSizeInBytes(){return this.eventCacheSizeInBytes}}},3530:(e,t,n)=>{n.d(t,{w:()=>a});var i=n(3735),r=n(6567),s=n(3195);const o="permutive-pvc";class a{constructor(e,t,n,i,r,o,a){this.config=e,this.namespace=t,this.metrics=n,this.cryptoAlg=i,this.logger=r,this.consentTracking=o,this.network=a,this.DB_NAME="pvc",this.PVC_MAIN_OBJECT_STORE="pvc",this.CRYPTO_KEY_OBJECT_STORE="keys",this.CRYPTO_KEY_OBJECT_KEY="pvc",this.DB_VERSION=1,this.db=new Promise((e=>e((0,s.S)(this.namespace,this.logger,this.consentTracking))))}put(e){return this.db.then((t=>t.put(e,o))).then(i.Q1)}getIfPresent(){return this.db.then((e=>e.get(o))).then(r.ij)}reset(){return this.db.then((e=>e.delete(o)))}}},5182:(e,t,n)=>{n(1057),n(3351)},9006:(e,t,n)=>{n.d(t,{lg:()=>f,Bt:()=>m});var i=n(9320),r=n(3735),s=n(6567),o=n(6017),a=n(356),c=n(2751),u=n(6013);class d{constructor(e,t,n,i){this.userId=e,this.network=t,this.api=n,this.logger=i,this.tag="appnexus",this.ttlInSeconds=86400,this.usedForThirdPartyData=!0,this.url="https://ib.adnxs.com/getuidj",this.invalidAliases=["0","-1"]}getId(){return this.logger.debug("identities[appnexus]: start HTTP request"),(0,u.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.appnexus(this.url).then((e=>(this.logger.debug("identities[appnexus]: end HTTP request"),{type:"attempted",result:(0,r.zG)((0,s.DT)((e=>e.uid&&this.isValidAlias(e.uid)))(e),(0,s.UI)((e=>e.uid)))})),(e=>({type:"attempted",result:s.YP})))}reset(){return Promise.resolve()}isValidAlias(e){return-1===this.invalidAliases.indexOf(e)}}class l{constructor(e,t,n,i,r){this.config=e,this.network=t,this.api=n,this.userId=i,this.logger=r,this.tag="pxid",this.ttlInSeconds=86400,this.usedForThirdPartyData=!1,this.url=`https://67cbf6c5-d926-407b-a684-a0606570ff08.${this.config.pxidHost}/${this.config.apiVersion}/pxid`,this.resetUrl=this.url+"/reset"}getId(){return this.logger.debug("identities[pxid]: start HTTP request"),(0,u.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.pxid(this.url).then((e=>(this.logger.debug("identities[pxid]: end HTTP request"),{type:"attempted",result:(0,s.ij)(e.uid)})),(e=>({type:"attempted",result:s.YP})))}reset(){return(0,u.G6)(navigator.userAgent)?Promise.resolve():this.api.pxidReset(this.resetUrl)}}const g=new Set(["public","email","email_md5","email_sha256"]),p=(e,t)=>!!e.id&&!(0,i.t9)(c.Eq)(e.tag,t);class f{constructor(e,t,n,i,r){this.metrics=e,this.trace=t,this.permutiveData=n,this.identityProviderEnv=i,this.logger=r,this.identities={},this.providers={},this.identitiesLastModified=new Date,this.identities=this.getCachedIdentitiesAndMigrateIfRequired()}get getIdentitiesLastModified(){return this.identitiesLastModified}prepareThirdPartyIdentities(){this.logger.debug("Identities: starting to load identities");const e=this.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),t=this.trace.startSpan("load_tpd_ids"),n=[{load:e=>{return t=e.config,n=e.network,i=e.api,r=e.userId,o=e.logger,(0,s.G)(new l(t,n,i,r,o));var t,n,i,r,o}},{load:e=>{return t=e.userId,n=e.network,i=e.api,r=e.logger,(0,s.G)(new d(t,n,i,r));var t,n,i,r}},{load:e=>(e.cookies,s.YP)},{load:e=>(e.cookies,s.YP)},{load:e=>(e.metrics,e.permutiveData,e.permutive,e.messages,s.YP)}],o=(0,i.oA)(n.map((e=>e.load(this.identityProviderEnv)))).map((e=>this.shouldAskForNewIdentity(e)?this.retrieveIdentity(e):Promise.resolve((0,r.bc)(e,this.getCachedTPDIdentity(e.tag)))));return Promise.all(o).then((e=>e.map((([e,t])=>(this.providers[e.tag]=e,this.setTPDIdentityIfPresent(e.tag,t,e.ttlInSeconds)))))).then((()=>{this.metrics.stopTimer("sdk_get_third_party_identities_task_duration_seconds",e),t.finish()}))}getPrioritizedIdentities(e){const t={default:0,pxid:1,appnexus:1},n=Object.entries(e).map((([e,{id:t,expiry:n,priority:i}])=>Object.assign(Object.assign(Object.assign({tag:e},t?{id:t}:{}),n?{expiry:n}:{}),void 0!==i?{priority:i}:{}))),r=n.filter((e=>p(e,Object.values(this.providers).map((e=>e.tag))))),o=n.filter((e=>((e,t)=>!!e.id&&!!(0,i.t9)(c.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),a=(0,i.DZ)((e=>(0,s.ij)(e.priority)))(r),u=a.length>0?Math.max(...a):0,d=r.map((e=>void 0!==e.priority?Object.assign(Object.assign({},e),{priority:e.priority}):Object.assign(Object.assign({},e),{priority:u+1}))),l=o.map((e=>void 0===t[e.tag]?{tag:e.tag,id:e.id,priority:u+h}:{tag:e.tag,id:e.id,priority:u+_}));return d.concat(l)}getIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>!!t.value))}getCustomerDefinedIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>p({tag:e,id:t.value,expiry:t.expiry,priority:t.priority},Object.values(this.providers).map((e=>e.tag)))))}getTPDIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>{var n,i;return!!t.value&&!!(null===(i=null===(n=this.providers)||void 0===n?void 0:n[e])||void 0===i?void 0:i.usedForThirdPartyData)}))}parseCustomerDefinedIdentities(e){const t=`Identify must be passed a non-empty string or list of { tag, id, priority? } tuples, value passed was '${JSON.stringify(e)}'`,n=e=>{throw new Error(e)},i=e=>(e.forEach((e=>{(e=>"string"==typeof e.id&&"string"==typeof e.tag)(e)||n(t),(e=>"email_sha256"!==e.tag||f.emailSHA256Regex.test(e.id))(e)||n("Identify called with unsupported format of email_sha256 ID. The support format is hex-encoded 64 character long lowercase string.")})),e);return"string"==typeof e?(r=e).length>0?[{id:r,tag:"default"}]:n(t):Array.isArray(e)?i(e):n(t);var r}checkIdentitiesHaveBeenModified(e){const t={concat:(e,t)=>c.Eq.equals(e.value,t.value)?{}:(0,r.bc)(e,t)};return(0,r.zG)((0,a.jV)(t)(this.identities)(e),u.hk,(e=>{const t=(0,o.ff)(a.xb)(e);return this.logger.debug("identities: is modified",t,e),t}))}setIdentities(e){let t=!1;const n=e.filter((e=>!g.has(e.tag))).reduce(((e,{tag:n,id:i,expiry:r,priority:s})=>(void 0===this.identities[n]&&(t=!0,this.logger.debug(`identities[${n}]: added`)),e[n]=Object.assign(Object.assign(Object.assign({},i?{value:i}:{}),r?{expiry:r}:{}),void 0!==s?{priority:s}:{}),e)),{});(t||this.checkIdentitiesHaveBeenModified(n))&&(this.identitiesLastModified=new Date),this.identities=Object.assign(Object.assign({},this.identities),n),this.permutiveData.setData("identities",this.identities)}reset(){return(0,r.zG)(this.identities={},(e=>Promise.all(Object.values(this.providers).map((e=>e.reset()))).then(r.Q1)))}getFilteredIdentities(e){return(0,u.m8)(...Object.entries(this.identities).filter((([t,n])=>e(t,n))).map((([e,{value:t,expiry:n,priority:i}])=>(0,r.bc)(e,Object.assign(Object.assign({id:t},n?{expiry:n}:{}),void 0!==i?{priority:i}:{})))))}shouldAskForNewIdentity(e){var t;const n=(0,s.ij)(null===(t=this.identities)||void 0===t?void 0:t[e.tag]);return(0,s.g_)((()=>!0),this.isIdentityExpired)(n)}getCachedTPDIdentity(e){return this.identities[e]?(0,s.ij)(this.identities[e].value):s.YP}setTPDIdentityIfPresent(e,t,n=86400){const i=()=>Date.now()+Math.floor(1e3*n);return(0,s.g_)((()=>this.setIdentities([{tag:e,expiry:i()}])),(t=>this.setIdentities([{tag:e,id:t,expiry:i()}])))(t)}retrieveIdentity(e){return e.getId().then((t=>"skipped"===t.type?(0,r.bc)(e,s.YP):(0,r.zG)(t.result,(t=>this.metrics.track({name:(0,s.pC)(t)?"sdk_third_party_identity_present_count":"sdk_third_party_identity_missing_count",value:1,labels:{identity_tag:e.tag}})),(n=>(0,r.bc)(e,t.result)))))}isIdentityExpired(e){return e.expiry&&Date.now()>=e.expiry}getCachedIdentitiesAndMigrateIfRequired(){return(e=>(0,u.m8)(...Object.entries(e).filter((([e,t])=>!this.isIdentityExpired(t)&&!g.has(e)))))(this.permutiveData.getData("identities")||{})}}f.emailSHA256Regex=/^[a-f0-9]{64}$/;const m=(e,t,n,r,s)=>{const o=(e,t)=>{const n=["(null)"];return n.indexOf(e)>-1||!!w[e]||(0,i.jV)(c.Eq)(t,n).length>0},a=e=>"721d6d85-35f0-4e35-bb38-13eb0d465158"===e,u={"be668577-07f5-444d-98e0-222b990951b1":o,"e43c8a90-d17b-4790-bfda-81b069b3b8c2":(e,t,n)=>["thestudentroom.co.uk"].some((e=>n.indexOf(e)>-1))&&(0,i.jV)(c.Eq)(t,["tsr-"]).length>0,"5d79bce7-5d2b-427e-a6c4-b89b6c7bf048":o,"366ab8da-5efa-4355-ab00-84db3b68ded2":e=>"96539955-4d7e-40df-882b-7e2fbacedb1c"===e||"345600e7-fb5f-48b1-9aa6-cde5396419b0"===e,"f3a06674-ebb9-4b9d-ba8f-0052018c0687":a,"38dadd0d-257a-4641-b332-b8b0fd20a6cb":a,"10453011-272d-49cd-9043-1964fdb36fd8":e=>"936ba6ac-9a8b-454d-ba98-facebd7553fe"===e},d={"fe68d1f7-c9f4-45b3-8905-7cda73d3fd74":e=>!!v[e]},l=u[e]||d[t];return!!l&&l(s,n,r)},h=2,_=3,v={},w={}},7043:(e,t,n)=>{n.d(t,{z:()=>i});class i{ingestIfEligible(e){return Promise.resolve()}}},9678:(e,t,n)=>{n.d(t,{LP:()=>s,dG:()=>i,eP:()=>r});const i=4096,r=`Cookie exceeds maximum supported size of ${i} bytes for most browsers.`,s="Cookie is missing required parameters."},9175:(e,t,n)=>{n.d(t,{S:()=>c});var i=n(3735),r=n(9678);class s{constructor(e,t,n){this.namespace=e,this.config=t,this.logger=n}setCookie(e,t,n=!1){var i;if(!(t&&e&&this.config.cookieExpiry&&this.config.cookieDomain)){const{cookieExpiry:n,cookieDomain:s}=null!==(i=this.config)&&void 0!==i?i:{};throw this.logger.warn(`Unable to set cookie. ${r.LP}`,{value:t,cookieName:e,cookieExpiry:n,cookieDomain:s}),new Error(r.LP)}const s=this.namespace.getNamespacedStorageKey(e),o=[encodeURIComponent(s),"=",encodeURIComponent(t),"; expires=",this.config.cookieExpiry,"; domain=",this.config.cookieDomain,"; path=/",n?"; samesite=none; secure":""].join("");if(o.length>r.dG)throw this.logger.warn(`Unable to set cookie ${s}. ${r.eP}`),new Error(r.eP);return this.logger.debug(`Setting cookie ${o}`),document.cookie=o,!0}getCookie(e,t=!1){const n=t?e:this.namespace.getNamespacedStorageKey(e),i=new RegExp("\\b"+encodeURIComponent(n)+"=([^;]+)").exec(document.cookie);return null!==i?decodeURIComponent(i[1]):null}deleteCookie(e){if(!e||!this.config.cookieDomain)return!1;const t=this.namespace.getNamespacedStorageKey(e);return document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; domain="+this.config.cookieDomain+"; path=/",!0}}var o=n(590);const a=e=>{const{logger:t,consentTracking:n}=e,i=e=>(t.debug(`Cookie: Failed to set cookie ${e} as consent is revoked`),!1);return e=>class extends e{constructor(){super(...arguments),this.setCookie=(0,o.vX)(super.setCookie.bind(this),i,n.isRevoked)}}},c=(e,t,n,r)=>new((0,i.zG)(s,a({consentTracking:r,logger:n})))(e,t,n)},3858:(e,t,n)=>{n.d(t,{S:()=>a});var i=n(3735);class r{constructor(e){this.namespace=e}getExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);return window.localStorage.getItem(t)}setExternalData(e,t){const n=this.namespace.getNamespacedStorageKey(e);try{window.localStorage.setItem(n,t)}catch(e){}}removeExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);window.localStorage.removeItem(t)}}var s=n(590);const o=e=>{const{logger:t,consentTracking:n}=e,i=e=>{t.debug(`External Data: Failed to set key ${e} as consent is revoked`)};return e=>class extends e{constructor(){super(...arguments),this.setExternalData=(0,s.vX)(super.setExternalData.bind(this),i,n.isRevoked)}}},a=(e,t,n)=>new((0,i.zG)(r,o({consentTracking:n,logger:t})))(e)},6715:(e,t,n)=>{n.d(t,{P:()=>i});class i{constructor(e,t,n,i,r,s,o,a,c=[],u={}){this.logger=e,this.network=t,this.userId=n,this.viewId=i,this.messages=r,this.sessionManager=s,this.cookies=o,this.externalData=a,this.blockers=c,this.addons=u,this.listenForBlockers=!0}makeSafe(e){return(...t)=>{try{return e(...t)}catch(e){this.network.error(e,this.userId.get())}}}utcNow(){const e=new Date;return new Date(e.toUTCString())}addBlocker(e){this.blockers.push(e),this.logger.log("<blockers> added blocker "+e),this.messages.on(e,(()=>{if(this.listenForBlockers){const t=this.blockers.indexOf(e);t>=0&&(this.blockers.splice(t,1),this.logger.log("<blockers> removed blocker "+e)),0===this.blockers.length&&(this.listenForBlockers=!1,this.messages.emit("permutive:blockers:empty"),this.logger.log("<blockers> complete"))}}))}}},4828:(e,t,n)=>{n.d(t,{SX:()=>s});class i{constructor(){this.prefix="[Permutive]",this.debugStyle=["color: blue"].join(";")}log(...e){return console.log.bind(window.console,this.prefix)(...e)}debug(...e){return console.debug.bind(window.console,"%c%s",this.debugStyle,this.prefix)(...e)}warn(...e){return console.warn.bind(window.console,this.prefix)(...e)}error(...e){return console.error.bind(window.console,this.prefix)(...e)}}class r{log(){}debug(){}warn(){}error(){}}const s=e=>{var t;return e.loggingEnabled&&void 0!==(null===(t=window.console)||void 0===t?void 0:t.log)?new i:new r}},8167:(e,t,n)=>{n.d(t,{Q:()=>r});var i=n(3735);class r{constructor(){this.messageListenerMap={},this.empty=[],this.replayQueue={}}on(e,t,n={withReplay:!1}){this.doesListenerMapHaveMessage(e)||this.createEmptyListenerList(e),this.doesReplayQueueHaveMessage(e)&&n.withReplay&&this.processReplayQueue(e,t),this.messageListenerMap[e].push(t)}once(e,t){const n=i=>{t(i),this.off(e,n)};this.on(e,n)}off(e,t){if(void 0!==t){const n=this.doesListenerMapHaveMessage(e)?this.messageListenerMap[e]:this.empty,r=e=>n.findIndex((t=>t===e)),s=e=>{e>=0&&n.splice(e,1)};(0,i.zG)(r(t),(e=>s(e)))}else this.createEmptyListenerList(e),this.createEmptyReplayQueue(e)}emit(e,t,n={withReplay:!1}){this.doesListenerMapHaveMessage(e)&&this.messageListenerMap[e].length>0?this.emitMessageWithPayload(e,t):n.withReplay&&this.addToReplayQueue(e,t)}addToReplayQueue(e,t){this.doesReplayQueueHaveMessage(e)||this.createEmptyReplayQueue(e),this.replayQueue[e].push(t)}processReplayQueue(e,t){this.replayQueue[e].forEach((e=>{t(e)}))}emitMessageWithPayload(e,t){this.messageListenerMap[e].forEach((e=>e(t)))}doesListenerMapHaveMessage(e){return e in this.messageListenerMap}createEmptyListenerList(e){this.messageListenerMap[e]=[]}doesReplayQueueHaveMessage(e){return e in this.replayQueue}createEmptyReplayQueue(e){this.replayQueue[e]=[]}}},4165:(e,t,n)=>{n.d(t,{p:()=>i});class i{getModels(){return Promise.resolve({})}}},6830:(e,t,n)=>{n.d(t,{x:()=>Xt,e:()=>Vt});const i=()=>({kind:"null",value:null}),r=e=>({kind:"string",value:e}),s=e=>({kind:"number",value:e}),o=e=>({kind:"array",value:e}),a=e=>({kind:"object",value:e}),c=e=>e,u=()=>({kind:"bottom"}),d=e=>({kind:"inner",a:e}),l=e=>({kind:"top",error:e}),g=e=>({kind:"unbounded",group:e}),p=(e,t)=>({kind:"windowed",key:t,group:e}),f=(e,t,n)=>({kind:"countLimit",n,limit:t,group:e}),m=(e,t,n)=>({kind:"uniqueLimit",n,limit:t,group:e}),h=e=>({kind:"numberGroup",group:e}),_=e=>({kind:"stringGroup",group:e}),v=e=>({kind:"tuple",tuple:e}),w=e=>({state:e}),b=(e,t)=>({commands:e,payload:t});function y(e){return e}function k(e,t,n,i,r,s,o,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return i(n(t(e)));case 5:return r(i(n(t(e))));case 6:return s(r(i(n(t(e)))));case 7:return o(s(r(i(n(t(e))))));case 8:return a(o(s(r(i(n(t(e)))))));case 9:return c(a(o(s(r(i(n(t(e))))))));default:for(var u=arguments[0],d=1;d<arguments.length;d++)u=arguments[d](u);return u}}var E=function(e){return{equals:function(t,n){return t===n||e(t,n)}}},q=function(e){return E((function(t,n){for(var i in e)if(!e[i].equals(t[i],n[i]))return!1;return!0}))},P=function(e){return function(t,n){return t===n||0===e(t,n)}},S=function(e){return{equals:P(e),compare:function(t,n){return t===n?0:e(t,n)}}},D=function(e){return function(t){return S((function(n,i){return t.compare(e(n),e(i))}))}},O=function(e){return function(t,n){return-1===e.compare(t,n)}},M=function(e){return function(t,n){return 1===e.compare(t,n)}},T=function(e){return function(t,n){return t===n||e.compare(t,n)>-1?t:n}};var x={equals:function(e,t){return e===t}},C={equals:x.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};const I=(e,t)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return d(t(e.a));case"top":return l(e.error)}},A=e=>S(((t,n)=>{if("bottom"===t.kind&&"bottom"===n.kind)return 0;if("bottom"===t.kind)return-1;if("bottom"===n.kind)return 1;if("top"===t.kind&&"top"===n.kind)return C.compare(t.error,n.error);if("top"===t.kind)return 1;if("top"===n.kind)return-1;if("inner"===t.kind&&"inner"===n.kind)return e.compare(t.a,n.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var j=function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},L=function(e){return"Some"===e._tag},R={_tag:"None"},U=function(e){return{_tag:"Some",value:e}},B=function(e){return"Left"===e._tag},N=(Object.prototype.hasOwnProperty,function(e){return j([e[0]],e.slice(1))});var W=R,G=U;function z(e){return function(t){return e(t)?G(t):W}}var K=function(e){return"Left"===e._tag?W:G(e.right)},$=function(e){return{equals:function(t,n){return t===n||(Y(t)?Y(n):!Y(n)&&e.equals(t.value,n.value))}}},F=function(e){return{equals:$(e).equals,compare:function(t,n){return t===n?0:Q(t)?Q(n)?e.compare(t.value,n.value):1:-1}}},H=function(e){return function(t){return Y(t)?W:G(e(t.value))}},J=K,Q=L,Y=function(e){return"None"===e._tag},V=function(e){return function(t){return Y(t)?e():t.value}};var X;X=void 0;var Z=function(e){return e[0]},ee=Z;var te=function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},ne=function(e){return e.length>0},ie=function(e,t){return e<0||e>=t.length},re=function(e){return function(t){return te([e],t)}},se=re,oe=function(e){return function(t){return te(te([],t),[e])}},ae=oe,ce=N,ue=function(e){return ne(e)?U(e):R},de=function(e){return function(t){for(var n=Math.max(0,Math.floor(t)),i=[e(0)],r=1;r<n;r++)i.push(e(r));return i}};var le=ce;var ge=function(e){return function(t){var n=Math.max(1,e);return n>=t.length?[le(t),[]]:[k(t.slice(1,n),se(fe(t))),t.slice(n)]}},pe=function(e){return E((function(t,n){return t.length===n.length&&t.every((function(t,i){return e.equals(t,n[i])}))}))},fe=ee;var me={equals:function(e,t){return e===t}},he={equals:me.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};var _e=function(e,t){return function(n){for(var i=n.length,r=e,s=0;s<i;s++)r=t(s,r,n[s]);return r}};var ve=function(e){return 0===e.length},we=ne,be=se,ye=ae,ke=function(e,t){return e<=0?[]:de(t)(e)};var Ee=ie,qe=function(e){return function(t){return Ee(e,t)?De(t):t.slice(0,e)}};var Pe=function(e,t){for(var n=e.length,i=0;i<n&&t(e[i]);i++);return i};var Se=function(e){return function(t){return e<=0||ve(t)?De(t):e>=t.length?[]:t.slice(e,t.length)}};var De=function(e){return e.slice()},Oe=function(e){return ve(e)?[]:e.slice().reverse()},Me=function(e){return function(t){return t.length<=1?De(t):t.slice().sort(e.compare)}},Te=function(e,t,n){for(var i=[],r=Math.min(e.length,t.length),s=0;s<r;s++)i[s]=n(e[s],t[s]);return i};var xe=function(e){return function(t){return e>=1&&we(t)?ge(e)(t):ve(t)?[De(t),[]]:[[],De(t)]}};var Ce=function(e){return function(t){return k(t,function(e){return function(t){for(var n=[],i=0;i<t.length;i++)n.push.apply(n,e(i,t[i]));return n}}((function(t,n){return e(n)})))}},Ie=function(e){return function(t){for(var n=[],i=0;i<t.length;i++){var r=e(i,t[i]);L(r)&&n.push(r.value)}return n}},Ae=function(e){return Ie((function(t,n){return e(n)}))},je=Ae(y),Le=_e,Re=function(e){var t=Ue(e);return function(e){return t((function(t,n){return e(n)}))}},Ue=function(e){return function(t){return Le(e.of([]),(function(n,i,r){return e.ap(e.map(i,(function(e){return function(t){return k(e,ye(t))}})),t(n,r))}))}},Be=function(e){return S((function(t,n){for(var i=t.length,r=n.length,s=Math.min(i,r),o=0;o<s;o++){var a=e.compare(t[o],n[o]);if(0!==a)return a}return he.compare(i,r)}))},Ne=function(e){return{_tag:"Left",left:e}},We=function(e){return{_tag:"Right",right:e}},Ge=function(e,t){return k(e,$e(t))},ze=function(e,t){return k(e,He(t))},Ke="Either",$e=function(e){return function(t){return Qe(t)?t:We(e(t.right))}},Fe=We,He=function(e){return function(t){return Qe(t)?t:Qe(e)?e:We(t.right(e.right))}},Je={URI:Ke,map:Ge,ap:ze,of:Fe},Qe=B;var Ye=function(e){return-1===e?1:1===e?-1:0};function Ve(e,t){return je(e.map(t))}function Xe(e,t,n,i){const r=(e,t)=>{if(0===e.length)return je(t.map((e=>G({1:e[1],2:n(W,G(e[2]))}))));if(0===t.length)return je(e.map((e=>G({1:e[1],2:n(G(e[2]),W)}))));if(e.length>0&&t.length>0&&O(i)(e[0][1],t[0][1])){const[i,...s]=e,o=i[1],a=i[2];return be({1:o,2:n(G(a),W)})(r(s,t))}if(e.length>0&&t.length>0&&M(i)(e[0][1],t[0][1])){const[i,...s]=t,o=i[1],a=i[2];return be({1:o,2:n(W,G(a))})(r(e,s))}if(e.length>0&&t.length>0){const[i,...s]=e,[o,...a]=t,c=i[1],u=i[2],d=o[2];return be({1:c,2:n(G(u),G(d))})(r(s,a))}throw new Error("Non exhaustive match in mapOption2")},s=D((e=>e[1]))(i),o=(e=>{const t=Ve(e,(e=>Q(e[2])?G({1:e[1],2:e[2].value}):W));return 0===t.length?W:G(t)})(r(Me(s)([...e].map((e=>({1:e[0],2:e[1]})))),Me(s)([...t].map((e=>({1:e[0],2:e[1]}))))));return H((e=>new Map(e.map((e=>[e[1],e[2]])))))(o)}function Ze(e,t,n,i){const r=D((e=>e[0]))(i),s=Me(r)([...t]).reduceRight(((e,t)=>{if(Qe(e)){const i=n(t[1],e.left);return Q(i)?Ne(i.value):We(t[0])}return e}),Ne(e));return J(s)}function et(e,t){return new Map([...e].map(t))}function tt(e,t){return new Map([...e].filter(t))}function nt(e){return JSON.stringify(it(e))}function it(e){switch(e.kind){case"null":return ot.encode(e);case"string":return at.encode(e);case"number":return ct.encode(e);case"array":return ut.encode(e);case"object":return dt.encode(e)}}function rt(e){return null===e?ot.decode(e):"number"==typeof e?ct.decode(e):"string"==typeof e?at.decode(e):Array.isArray(e)?ut.decode(e):dt.decode(e)}const st=(e,t)=>Ne(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${t}`),ot={encode:e=>null,decode:e=>null===e?We({kind:"null",value:null}):st(e,"SimpleNull")},at={encode:e=>e.value,decode:e=>"string"==typeof e?We(r(e)):st(e,"SimpleString")},ct={encode:e=>e.value,decode:e=>"number"==typeof e?We(s(e)):st(e,"SimpleNumber")},ut={encode:e=>e.value.map(it),decode:e=>{if(Array.isArray(e)){const t=Re(Je)(rt)(e);return $e(o)(t)}return st(e,"SimpleArray")}},dt={encode:e=>{const t=[...e.value.entries()];return Object.assign({},...Array.from(t,(([e,t])=>({[e]:it(t)}))))},decode:e=>{if(e&&e.constructor===Object){const t=Re(Je)((([e,t])=>k(rt(t),$e((t=>function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}(e,t))))))(Object.entries(e));return $e((e=>a(new Map([...e]))))(t)}return st(e,"SimpleObject")}};function lt(e){return k(e,pt,H(nt),V((()=>"<encode error>")))}function gt(e){return H(wt)(function(e){switch(e.state.kind){case"top":return G(r(e.state.error));case"bottom":return W;case"inner":return pt(e.state.a)}}(e))}function pt(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return ft(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?G(o(function(e,t){const n=H((e=>be(e)(t)))(e);return V((()=>t))(n)}(H((e=>r(function(e){const t=e=>{switch(e){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},n=e=>1===e[2]?t(e[1]):t(e[1])+JSON.stringify(e[2]);return e.map(n).join("")}(e))))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return r(e.error);case"inner":return s(e.a)}},n=e=>Ve([mt,ht,e=>k(e,vt,a,G)],(t=>t(e))),i=e=>Ve([mt,_t,e=>k(e,vt,(e=>et(e,(([e,t])=>[JSON.stringify(e),t]))),a,G)],(t=>t(e)));switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return n(e.group);case"numberGroup":return i(e.group)}}(e.payload)))):W}function ft(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||Q(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||Q(e.limit)}}function mt(e){switch(e.kind){case"unbounded":return W;case"windowed":return G(r("w"));case"countLimit":return G(r(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return G(r(1===e.n?"u":`u${e.n}`))}}function ht(e){switch(e.kind){case"unbounded":return W;case"windowed":return G(r(Q(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return G(r(Q(e.limit)?e.limit.value:""))}}function _t(e){switch(e.kind){case"unbounded":return W;case"windowed":return Q(e.key)?G(s(e.key.value)):G({kind:"null",value:null});case"countLimit":case"uniqueLimit":return Q(e.limit)?G(s(e.limit.value)):G({kind:"null",value:null})}}function vt(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function wt(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?wt(e.value[0]):o(e.value.map(wt));case"object":return k(tt(e.value,(([e,t])=>"null"!==t.kind)),(e=>et(e,(e=>[e[0],wt(e[1])]))),a);default:return e}}function bt(e){const t=e=>{if(0===e.length)return{kind:"bottom"};const t=(e=>{if(4!==e.length)return W;const[t,n,i,r]=e;if("string"===t.kind&&"string"===n.kind&&"object"===r.kind){const e=z((e=>yt(e[1].value)&&kt(e[2].value)))({1:t,2:n});return H((e=>({prim:e[1].value,grp:e[2].value,cutoff:i,m:r.value})))(e)}return W})(e);if(Q(t)){const{prim:e,grp:n,cutoff:i,m:r}=t.value,s=Et(i,r,qt(n));return"string"==typeof s?l(s):d(b(Pt(e),s))}const n=(e=>{if(3!==e.length)return W;const[t,n,i]=e;if("string"===t.kind&&"object"===i.kind){const e=z((e=>kt(e.value)))(t);return H((e=>({grp:e.value,cutoff:n,m:i.value})))(e)}return W})(e);if(Q(n)){const{grp:e,cutoff:t,m:i}=n.value,r=Et(t,i,qt(e));return"string"==typeof r?l(r):d(b(W,r))}const i=(e=>{if(2!==e.length)return W;const[t,n]=e;if("string"===t.kind&&"object"===n.kind){const e=z((e=>yt(e.value)))(t);return H((e=>({prim:e.value,m:n.value})))(e)}return W})(e);if(Q(i)){const{prim:e,m:t}=i.value;return d(b(Pt(e),_(g(t))))}const r=(e=>{if(1!==e.length)return W;const[t]=e;return"object"===t.kind?G({m:t.value}):W})(e);if(Q(r)){const{m:e}=r.value;return d(b(W,_(g(e))))}const s=(e=>{if(e.length<1)return W;const[t,...n]=e;if("string"===t.kind){const e=z((e=>yt(e.value)))(t);return H((e=>({prim:e.value,rest:n})))(e)}return W})(e);if(Q(s)){const{prim:e,rest:t}=s.value;return d(b(Pt(e),Dt(t)))}return d(b(W,Dt(e)))},n=e=>"array"===e.kind?Ce(n)(e.value):[e];return"null"===e.kind?w({kind:"bottom"}):w(t(n(e)))}function yt(e){const t=e.split("");if(!0==(0===t.length))return!1;{const[e,...n]=t;return-1!=="pmvn".indexOf(e)&&n.every((e=>-1!=="pmvn0123456789".indexOf(e)))}}function kt(e){const t=e.split("");switch(!0){case 0===t.length:return!1;case"w"===t[0]&&void 0===t[1]:return!0;default:{const[e,...n]=t;return-1!=="ux".indexOf(e)&&-1===n.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function Et(e,t,n){switch(e.kind){case"string":return _(n({1:G(e.value),2:t}));case"number":case"null":return h(n({1:"null"===e.kind?W:G(e.value),2:tt(et(t,(([e,t])=>[Number(e),t])),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function qt(e){const t=e=>t=>m(t[2],t[1],e),n=e=>t=>f(t[2],t[1],e),i=e.split("");switch(!0){case"w"===i[0]&&void 0===i[1]:return e=>p(e[2],e[1]);case"u"===i[0]&&void 0===i[1]:return t(1);case"u"===i[0]&&void 0!==i[1]:return t(parseInt(i.slice(1).join("")));case"x"===i[0]&&void 0===i[1]:return n(1);case"x"===i[0]&&void 0!==i[1]:return n(parseInt(i.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function Pt(e){return H(c)(ue(St(e,(e=>{const t=e.split("");if(0===t.length)return W;const[n,...i]=t,r=(e=>{switch(e){case"p":return G("add");case"m":return G("mul");case"v":return G("max");case"n":return G("min");default:return W}})(n);return H((e=>{const{init:t,rest:n}=(r=e=>{return"number"==typeof(t=parseInt(e))&&isFinite(t)&&Math.floor(t)===t;var t},function(e){var t=xe(Pe(e,r))(e);return{init:t[0],rest:t[1]}})(i);var r;return{1:{1:e,2:0===t.length?1:parseInt(t.join(""))},2:n.join("")}}))(r)}))))}function St(e,t){const n=t(e);return V((()=>[]))(H((e=>[e[1]].concat(St(e[2],t))))(n))}function Dt(e){return v(e.map(Ot))}function Ot(e){switch(e.kind){case"number":return d(e.value);case"string":return l(e.value);case"null":return{kind:"bottom"};case"object":return l("{object}");case"array":return l("{array}")}}const Mt={strategy:(e,t,n)=>i=>{if(Y(n))return t;if("delta"===e&&Y(t))return W;if(Y(t))return n;if(Q(t)&&Q(n))return i(t.value,n.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,t,n,i,r,s)=>{const o=Be(A(s));if("append"===e&&"add"===t)return Te(n,i,Rt("append",r.plus));if("append"===e&&"mul"===t)return Te(n,i,Rt("append",r.times));if("append"===e&&"max"===t)return T(o)(n,i);if("join"===e&&"add"===t)return Te(n,i,Rt("join",T(s)));if("join"===e&&"mul"===t)return Te(n,i,Rt("join",T(s)));if("join"===e&&"max"===t)return T(o)(n,i);if("min"===t)return Mt.operation(e,"max",n,i,r,function(e){return S(((t,n)=>Ye(e.compare(t,n))))}(s));if("delta"===e&&"max"===t)return M(o)(n,i)?n:i.map(u);if("delta"===e)return Te(n,i,((e,t)=>M(A(s))(e,t)?e:{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,t,n,i)=>{if("delta"===e&&"top"===n.kind&&"top"===i.kind)return M(C)(n.error,i.error)?l(n.error):{kind:"bottom"};if("delta"===e&&"bottom"===i.kind)return n;if("delta"===e&&"bottom"===n.kind)return{kind:"bottom"};if("top"===n.kind&&"top"===i.kind)return l(T(C)(n.error,i.error));if("top"===n.kind)return n;if("top"===i.kind)return i;if("inner"===n.kind&&"inner"===i.kind)return t(n.a,i.a);if("bottom"===n.kind)return i;if("bottom"===i.kind)return n;throw new Error("Non exhaustive match in extend")}},Tt={plus:(e,t)=>e+t,times:(e,t)=>e*t};function xt(e,t,n,i){if("unbounded"===e.kind&&"unbounded"===t.kind){const r=e.group,s=t.group;return V(u)(H((e=>d(g(e))))(Xe(r,s,n,i)))}if("windowed"===e.kind&&"windowed"===t.kind){const r=e.key,s=e.group,o=t.key,a=t.group,c=T(F(i))(r,o);return V(u)(H((e=>d(p(e,c))))(Xe(s,a,n,i)))}if("countLimit"===e.kind&&"countLimit"===t.kind){const r=e.n,s=t.n;if(r===s){const s=e.limit,o=e.group,a=t.limit,c=t.group,l=T(F(i))(s,a);return V(u)(H((e=>d(f(e,l,r))))(Xe(o,c,n,i)))}return l("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===t.kind){const r=e.n,s=t.n;if(r===s){const s=e.limit,o=e.group,a=t.limit,c=t.group,l=T(F(i))(s,a);return V(u)(H((e=>d(m(e,l,r))))(Xe(o,c,n,i)))}return l("Non matching counts")}return l("Non matching group types")}function Ct(e,t,n,i,r,s){const o=(e,t)=>({1:qe(e)(t).concat(ke(Math.max(0,e-t.length),u)),2:Se(e)(t)}),a=(t,n,i)=>{if(0===t.length)return Mt.operation(e,"max",n,i,r,s);if(t.length>0){const[c,...u]=t,d=o(c[2],n),l=d[1],g=d[2],p=o(c[2],i),f=p[1],m=p[2];return Mt.operation(e,c[1],l,f,r,s).concat(a(u,g,m))}throw new Error("Non exhaustive match in recurse")};return Oe((c=e=>"bottom"===e.kind,function(e){return e.slice(Pe(e,c))})(Oe(a(t,n,i))));var c}function It(e,t,n){return V(i)(At(e,W)(t,n))}function At(e,t){const n=t=>(n,i)=>Mt.strategy(e,n,i)(At(e,t)),i=(i,r)=>{if($(pe(q({1:x,2:me}))).equals(i.commands,r.commands)){const s=((t,i,r)=>{if("stringGroup"===i.kind&&"stringGroup"===r.kind){const e=xt(i.group,r.group,n(t),C);return I(e,(e=>_(Lt(e,C))))}if("numberGroup"===i.kind&&"numberGroup"===r.kind){const e=xt(i.group,r.group,n(t),he);return I(e,(e=>h(Lt(e,he))))}if("tuple"===i.kind&&"tuple"===r.kind){const n=Q(t)?t.value:[];return d(v(Ct(e,n,i.tuple,r.tuple,Tt,he)))}throw new Error(`Non matching payload. Got ${i.kind} and ${r.kind}`)})(Y(i.commands)?t:i.commands,i.payload,r.payload);return I(s,(e=>b(i.commands,e)))}throw new Error(`Non matching primitive strings. Got ${lt(i)} and ${lt(r)}`)};return(t,n)=>gt(w(Mt.extend(e,i,bt(t).state,bt(n).state)))}function jt(e,t,n){const i=H((t=>tt(e,(([e,i])=>{return(r=n,function(e,t){return-1!==r.compare(e,t)})(e,t);var r}))))(t);return V((()=>e))(i)}function Lt(e,t){switch(e.kind){case"unbounded":return e;case"windowed":return Y(e.key)?e:p(jt(e.group,e.key,t),e.key);case"countLimit":{const n=e.limit,i=e.n,r=e.group,s=(e,t)=>t<=1?W:G(t-1),o=Ze(i,r,s,t),a=T(F(t))(n,o);return f(jt(r,a,t),a,i)}case"uniqueLimit":{const n=e.limit,i=e.n,r=e.group,s=(e,t)=>{if("object"===e.kind){const n=[...e.value.keys(),...t.keys()],r=new Set(n);return r.size>=i?W:G(r)}return W},o=Ze(new Set,r,s,t),a=T(F(t))(n,o);return m(jt(r,a,t),a,i)}}}function Rt(e,t){return(n,i)=>Mt.extend(e,((e,n)=>d(t(e,n))),n,i)}var Ut=n(7183),Bt=n(3735),Nt=n(6567),Wt=n(477),Gt=n.n(Wt);function zt(){return Gt()('/*! permutive-javascript-sdk v19.9.0 (web) (built 2022-05-18T14:23:25.118Z) */(()=>{"use strict";function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function t(e,t,n,r,o,i,c,a,s){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return o(r(n(t(e))));case 6:return i(o(r(n(t(e)))));case 7:return c(i(o(r(n(t(e))))));case 8:return a(c(i(o(r(n(t(e)))))));case 9:return s(a(c(i(o(r(n(t(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}Object.create;Object.create;const n=()=>({kind:"null",value:null}),r=e=>({kind:"string",value:e}),o=e=>({kind:"number",value:e}),i=e=>({kind:"array",value:e}),c=e=>({kind:"object",value:e}),a=e=>e,s=()=>({kind:"bottom"}),u=e=>({kind:"inner",a:e}),l=e=>({kind:"top",error:e}),d=e=>({kind:"unbounded",group:e}),w=(e,t)=>({kind:"windowed",key:t,group:e}),g=(e,t,n)=>({kind:"countLimit",n,limit:t,group:e}),p=(e,t,n)=>({kind:"uniqueLimit",n,limit:t,group:e}),f=e=>({kind:"numberGroup",group:e}),m=e=>({kind:"stringGroup",group:e}),h=e=>({kind:"tuple",tuple:e}),y=e=>({state:e}),v=(e,t)=>({commands:e,payload:t});function q(e){return e}function b(e,t,n,r,o,i,c,a,s){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return o(r(n(t(e))));case 6:return i(o(r(n(t(e)))));case 7:return c(i(o(r(n(t(e))))));case 8:return a(c(i(o(r(n(t(e)))))));case 9:return s(a(c(i(o(r(n(t(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}var _=function(e){return{equals:function(t,n){return t===n||e(t,n)}}},k=function(e){return _((function(t,n){for(var r in e)if(!e[r].equals(t[r],n[r]))return!1;return!0}))},j=function(e){return function(t,n){return t===n||0===e(t,n)}},x=function(e){return{equals:j(e),compare:function(t,n){return t===n?0:e(t,n)}}},S=function(e){return function(t){return x((function(n,r){return t.compare(e(n),e(r))}))}},z=function(e){return function(t,n){return-1===e.compare(t,n)}},O=function(e){return function(t,n){return 1===e.compare(t,n)}},A=function(e){return function(t,n){return t===n||e.compare(t,n)>-1?t:n}};var M={equals:function(e,t){return e===t}},P={equals:M.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};const N=(e,t)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return u(t(e.a));case"top":return l(e.error)}},T=e=>x(((t,n)=>{if("bottom"===t.kind&&"bottom"===n.kind)return 0;if("bottom"===t.kind)return-1;if("bottom"===n.kind)return 1;if("top"===t.kind&&"top"===n.kind)return P.compare(t.error,n.error);if("top"===t.kind)return 1;if("top"===n.kind)return-1;if("inner"===t.kind&&"inner"===n.kind)return e.compare(t.a,n.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var L=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},E=function(e){return"Some"===e._tag},C={_tag:"None"},H=function(e){return{_tag:"Some",value:e}},I=function(e){return"Left"===e._tag},U=(Object.prototype.hasOwnProperty,function(e){return L([e[0]],e.slice(1))});var B=C,D=H;function F(e){return function(t){return e(t)?D(t):B}}var G=function(e){return"Left"===e._tag?B:D(e.right)},Y=function(e){return{equals:function(t,n){return t===n||(K(t)?K(n):!K(n)&&e.equals(t.value,n.value))}}},V=function(e){return{equals:Y(e).equals,compare:function(t,n){return t===n?0:J(t)?J(n)?e.compare(t.value,n.value):1:-1}}},W=function(e){return function(t){return K(t)?B:D(e(t.value))}},$=G,J=E,K=function(e){return"None"===e._tag},R=function(e){return function(t){return K(t)?e():t.value}};var Q;Q=void 0;var X=function(e){return e[0]},Z=X;var ee=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},te=function(e){return e.length>0},ne=function(e,t){return e<0||e>=t.length},re=function(e){return function(t){return ee([e],t)}},oe=re,ie=function(e){return function(t){return ee(ee([],t),[e])}},ce=ie,ae=U,se=function(e){return te(e)?H(e):C},ue=function(e){return function(t){for(var n=Math.max(0,Math.floor(t)),r=[e(0)],o=1;o<n;o++)r.push(e(o));return r}};var le=ae;var de=function(e){return function(t){var n=Math.max(1,e);return n>=t.length?[le(t),[]]:[b(t.slice(1,n),oe(ge(t))),t.slice(n)]}},we=function(e){return _((function(t,n){return t.length===n.length&&t.every((function(t,r){return e.equals(t,n[r])}))}))},ge=Z;var pe={equals:function(e,t){return e===t}},fe={equals:pe.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};var me=function(e,t){return function(n){for(var r=n.length,o=e,i=0;i<r;i++)o=t(i,o,n[i]);return o}};var he=function(e){return 0===e.length},ye=te,ve=oe,qe=ce,be=function(e,t){return e<=0?[]:ue(t)(e)};var _e=ne,ke=function(e){return function(t){return _e(e,t)?Se(t):t.slice(0,e)}};var je=function(e,t){for(var n=e.length,r=0;r<n&&t(e[r]);r++);return r};var xe=function(e){return function(t){return e<=0||he(t)?Se(t):e>=t.length?[]:t.slice(e,t.length)}};var Se=function(e){return e.slice()},ze=function(e){return he(e)?[]:e.slice().reverse()},Oe=function(e){return function(t){return t.length<=1?Se(t):t.slice().sort(e.compare)}},Ae=function(e,t,n){for(var r=[],o=Math.min(e.length,t.length),i=0;i<o;i++)r[i]=n(e[i],t[i]);return r};var Me=function(e){return function(t){return e>=1&&ye(t)?de(e)(t):he(t)?[Se(t),[]]:[[],Se(t)]}};var Pe=function(e){return function(t){return b(t,function(e){return function(t){for(var n=[],r=0;r<t.length;r++)n.push.apply(n,e(r,t[r]));return n}}((function(t,n){return e(n)})))}},Ne=function(e){return function(t){for(var n=[],r=0;r<t.length;r++){var o=e(r,t[r]);E(o)&&n.push(o.value)}return n}},Te=function(e){return Ne((function(t,n){return e(n)}))},Le=Te(q),Ee=me,Ce=function(e){var t=He(e);return function(e){return t((function(t,n){return e(n)}))}},He=function(e){return function(t){return Ee(e.of([]),(function(n,r,o){return e.ap(e.map(r,(function(e){return function(t){return b(e,qe(t))}})),t(n,o))}))}},Ie=function(e){return x((function(t,n){for(var r=t.length,o=n.length,i=Math.min(r,o),c=0;c<i;c++){var a=e.compare(t[c],n[c]);if(0!==a)return a}return fe.compare(r,o)}))},Ue=function(e){return{_tag:"Left",left:e}},Be=function(e){return{_tag:"Right",right:e}},De=function(e,t){return b(e,Ye(t))},Fe=function(e,t){return b(e,We(t))},Ge="Either",Ye=function(e){return function(t){return Je(t)?t:Be(e(t.right))}},Ve=Be,We=function(e){return function(t){return Je(t)?t:Je(e)?e:Be(t.right(e.right))}},$e={URI:Ge,map:De,ap:Fe,of:Ve},Je=I;var Ke=function(e){return-1===e?1:1===e?-1:0};function Re(e,t){return Le(e.map(t))}function Qe(e,t,n,r){const o=(e,t)=>{if(0===e.length)return Le(t.map((e=>D({1:e[1],2:n(B,D(e[2]))}))));if(0===t.length)return Le(e.map((e=>D({1:e[1],2:n(D(e[2]),B)}))));if(e.length>0&&t.length>0&&z(r)(e[0][1],t[0][1])){const[r,...i]=e,c=r[1],a=r[2];return ve({1:c,2:n(D(a),B)})(o(i,t))}if(e.length>0&&t.length>0&&O(r)(e[0][1],t[0][1])){const[r,...i]=t,c=r[1],a=r[2];return ve({1:c,2:n(B,D(a))})(o(e,i))}if(e.length>0&&t.length>0){const[r,...i]=e,[c,...a]=t,s=r[1],u=r[2],l=c[2];return ve({1:s,2:n(D(u),D(l))})(o(i,a))}throw new Error("Non exhaustive match in mapOption2")},i=S((e=>e[1]))(r),c=(e=>{const t=Re(e,(e=>J(e[2])?D({1:e[1],2:e[2].value}):B));return 0===t.length?B:D(t)})(o(Oe(i)([...e].map((e=>({1:e[0],2:e[1]})))),Oe(i)([...t].map((e=>({1:e[0],2:e[1]}))))));return W((e=>new Map(e.map((e=>[e[1],e[2]])))))(c)}function Xe(e,t,n,r){const o=S((e=>e[0]))(r),i=Oe(o)([...t]).reduceRight(((e,t)=>{if(Je(e)){const r=n(t[1],e.left);return J(r)?Ue(r.value):Be(t[0])}return e}),Ue(e));return $(i)}function Ze(e,t){return new Map([...e].map(t))}function et(e,t){return new Map([...e].filter(t))}function tt(e){return JSON.stringify(nt(e))}function nt(e){switch(e.kind){case"null":return it.encode(e);case"string":return ct.encode(e);case"number":return at.encode(e);case"array":return st.encode(e);case"object":return ut.encode(e)}}function rt(e){return null===e?it.decode(e):"number"==typeof e?at.decode(e):"string"==typeof e?ct.decode(e):Array.isArray(e)?st.decode(e):ut.decode(e)}const ot=(e,t)=>Ue(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${t}`),it={encode:e=>null,decode:e=>null===e?Be({kind:"null",value:null}):ot(e,"SimpleNull")},ct={encode:e=>e.value,decode:e=>"string"==typeof e?Be(r(e)):ot(e,"SimpleString")},at={encode:e=>e.value,decode:e=>"number"==typeof e?Be(o(e)):ot(e,"SimpleNumber")},st={encode:e=>e.value.map(nt),decode:e=>{if(Array.isArray(e)){const t=Ce($e)(rt)(e);return Ye(i)(t)}return ot(e,"SimpleArray")}},ut={encode:e=>{const t=[...e.value.entries()];return Object.assign({},...Array.from(t,(([e,t])=>({[e]:nt(t)}))))},decode:e=>{if(e&&e.constructor===Object){const t=Ce($e)((([e,t])=>b(rt(t),Ye((t=>function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}(e,t))))))(Object.entries(e));return Ye((e=>c(new Map([...e]))))(t)}return ot(e,"SimpleObject")}};function lt(e){return b(e,wt,W(tt),R((()=>"<encode error>")))}function dt(e){return W(yt)(function(e){switch(e.state.kind){case"top":return D(r(e.state.error));case"bottom":return B;case"inner":return wt(e.state.a)}}(e))}function wt(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return gt(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?D(i(function(e,t){const n=W((e=>ve(e)(t)))(e);return R((()=>t))(n)}(W((e=>r(function(e){const t=e=>{switch(e){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},n=e=>1===e[2]?t(e[1]):t(e[1])+JSON.stringify(e[2]);return e.map(n).join("")}(e))))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return r(e.error);case"inner":return o(e.a)}},n=e=>Re([pt,ft,e=>b(e,ht,c,D)],(t=>t(e))),i=e=>Re([pt,mt,e=>b(e,ht,(e=>Ze(e,(([e,t])=>[JSON.stringify(e),t]))),c,D)],(t=>t(e)));switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return n(e.group);case"numberGroup":return i(e.group)}}(e.payload)))):B}function gt(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||J(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||J(e.limit)}}function pt(e){switch(e.kind){case"unbounded":return B;case"windowed":return D(r("w"));case"countLimit":return D(r(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return D(r(1===e.n?"u":`u${e.n}`))}}function ft(e){switch(e.kind){case"unbounded":return B;case"windowed":return D(r(J(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return D(r(J(e.limit)?e.limit.value:""))}}function mt(e){switch(e.kind){case"unbounded":return B;case"windowed":return J(e.key)?D(o(e.key.value)):D({kind:"null",value:null});case"countLimit":case"uniqueLimit":return J(e.limit)?D(o(e.limit.value)):D({kind:"null",value:null})}}function ht(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function yt(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?yt(e.value[0]):i(e.value.map(yt));case"object":return b(et(e.value,(([e,t])=>"null"!==t.kind)),(e=>Ze(e,(e=>[e[0],yt(e[1])]))),c);default:return e}}function vt(e){const t=e=>{if(0===e.length)return{kind:"bottom"};const t=(e=>{if(4!==e.length)return B;const[t,n,r,o]=e;if("string"===t.kind&&"string"===n.kind&&"object"===o.kind){const e=F((e=>qt(e[1].value)&&bt(e[2].value)))({1:t,2:n});return W((e=>({prim:e[1].value,grp:e[2].value,cutoff:r,m:o.value})))(e)}return B})(e);if(J(t)){const{prim:e,grp:n,cutoff:r,m:o}=t.value,i=_t(r,o,kt(n));return"string"==typeof i?l(i):u(v(jt(e),i))}const n=(e=>{if(3!==e.length)return B;const[t,n,r]=e;if("string"===t.kind&&"object"===r.kind){const e=F((e=>bt(e.value)))(t);return W((e=>({grp:e.value,cutoff:n,m:r.value})))(e)}return B})(e);if(J(n)){const{grp:e,cutoff:t,m:r}=n.value,o=_t(t,r,kt(e));return"string"==typeof o?l(o):u(v(B,o))}const r=(e=>{if(2!==e.length)return B;const[t,n]=e;if("string"===t.kind&&"object"===n.kind){const e=F((e=>qt(e.value)))(t);return W((e=>({prim:e.value,m:n.value})))(e)}return B})(e);if(J(r)){const{prim:e,m:t}=r.value;return u(v(jt(e),m(d(t))))}const o=(e=>{if(1!==e.length)return B;const[t]=e;return"object"===t.kind?D({m:t.value}):B})(e);if(J(o)){const{m:e}=o.value;return u(v(B,m(d(e))))}const i=(e=>{if(e.length<1)return B;const[t,...n]=e;if("string"===t.kind){const e=F((e=>qt(e.value)))(t);return W((e=>({prim:e.value,rest:n})))(e)}return B})(e);if(J(i)){const{prim:e,rest:t}=i.value;return u(v(jt(e),St(t)))}return u(v(B,St(e)))},n=e=>"array"===e.kind?Pe(n)(e.value):[e];return"null"===e.kind?y({kind:"bottom"}):y(t(n(e)))}function qt(e){const t=e.split("");if(!0==(0===t.length))return!1;{const[e,...n]=t;return-1!=="pmvn".indexOf(e)&&n.every((e=>-1!=="pmvn0123456789".indexOf(e)))}}function bt(e){const t=e.split("");switch(!0){case 0===t.length:return!1;case"w"===t[0]&&void 0===t[1]:return!0;default:{const[e,...n]=t;return-1!=="ux".indexOf(e)&&-1===n.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function _t(e,t,n){switch(e.kind){case"string":return m(n({1:D(e.value),2:t}));case"number":case"null":return f(n({1:"null"===e.kind?B:D(e.value),2:et(Ze(t,(([e,t])=>[Number(e),t])),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function kt(e){const t=e=>t=>p(t[2],t[1],e),n=e=>t=>g(t[2],t[1],e),r=e.split("");switch(!0){case"w"===r[0]&&void 0===r[1]:return e=>w(e[2],e[1]);case"u"===r[0]&&void 0===r[1]:return t(1);case"u"===r[0]&&void 0!==r[1]:return t(parseInt(r.slice(1).join("")));case"x"===r[0]&&void 0===r[1]:return n(1);case"x"===r[0]&&void 0!==r[1]:return n(parseInt(r.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function jt(e){return W(a)(se(xt(e,(e=>{const t=e.split("");if(0===t.length)return B;const[n,...r]=t,o=(e=>{switch(e){case"p":return D("add");case"m":return D("mul");case"v":return D("max");case"n":return D("min");default:return B}})(n);return W((e=>{const{init:t,rest:n}=(o=e=>{return"number"==typeof(t=parseInt(e))&&isFinite(t)&&Math.floor(t)===t;var t},function(e){var t=Me(je(e,o))(e);return{init:t[0],rest:t[1]}})(r);var o;return{1:{1:e,2:0===t.length?1:parseInt(t.join(""))},2:n.join("")}}))(o)}))))}function xt(e,t){const n=t(e);return R((()=>[]))(W((e=>[e[1]].concat(xt(e[2],t))))(n))}function St(e){return h(e.map(zt))}function zt(e){switch(e.kind){case"number":return u(e.value);case"string":return l(e.value);case"null":return{kind:"bottom"};case"object":return l("{object}");case"array":return l("{array}")}}const Ot={strategy:(e,t,n)=>r=>{if(K(n))return t;if("delta"===e&&K(t))return B;if(K(t))return n;if(J(t)&&J(n))return r(t.value,n.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,t,n,r,o,i)=>{const c=Ie(T(i));if("append"===e&&"add"===t)return Ae(n,r,Ct("append",o.plus));if("append"===e&&"mul"===t)return Ae(n,r,Ct("append",o.times));if("append"===e&&"max"===t)return A(c)(n,r);if("join"===e&&"add"===t)return Ae(n,r,Ct("join",A(i)));if("join"===e&&"mul"===t)return Ae(n,r,Ct("join",A(i)));if("join"===e&&"max"===t)return A(c)(n,r);if("min"===t)return Ot.operation(e,"max",n,r,o,function(e){return x(((t,n)=>Ke(e.compare(t,n))))}(i));if("delta"===e&&"max"===t)return O(c)(n,r)?n:r.map(s);if("delta"===e)return Ae(n,r,((e,t)=>O(T(i))(e,t)?e:{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,t,n,r)=>{if("delta"===e&&"top"===n.kind&&"top"===r.kind)return O(P)(n.error,r.error)?l(n.error):{kind:"bottom"};if("delta"===e&&"bottom"===r.kind)return n;if("delta"===e&&"bottom"===n.kind)return{kind:"bottom"};if("top"===n.kind&&"top"===r.kind)return l(A(P)(n.error,r.error));if("top"===n.kind)return n;if("top"===r.kind)return r;if("inner"===n.kind&&"inner"===r.kind)return t(n.a,r.a);if("bottom"===n.kind)return r;if("bottom"===r.kind)return n;throw new Error("Non exhaustive match in extend")}},At={plus:(e,t)=>e+t,times:(e,t)=>e*t};function Mt(e,t,n,r){if("unbounded"===e.kind&&"unbounded"===t.kind){const o=e.group,i=t.group;return R(s)(W((e=>u(d(e))))(Qe(o,i,n,r)))}if("windowed"===e.kind&&"windowed"===t.kind){const o=e.key,i=e.group,c=t.key,a=t.group,l=A(V(r))(o,c);return R(s)(W((e=>u(w(e,l))))(Qe(i,a,n,r)))}if("countLimit"===e.kind&&"countLimit"===t.kind){const o=e.n,i=t.n;if(o===i){const i=e.limit,c=e.group,a=t.limit,l=t.group,d=A(V(r))(i,a);return R(s)(W((e=>u(g(e,d,o))))(Qe(c,l,n,r)))}return l("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===t.kind){const o=e.n,i=t.n;if(o===i){const i=e.limit,c=e.group,a=t.limit,l=t.group,d=A(V(r))(i,a);return R(s)(W((e=>u(p(e,d,o))))(Qe(c,l,n,r)))}return l("Non matching counts")}return l("Non matching group types")}function Pt(e,t,n,r,o,i){const c=(e,t)=>({1:ke(e)(t).concat(be(Math.max(0,e-t.length),s)),2:xe(e)(t)}),a=(t,n,r)=>{if(0===t.length)return Ot.operation(e,"max",n,r,o,i);if(t.length>0){const[s,...u]=t,l=c(s[2],n),d=l[1],w=l[2],g=c(s[2],r),p=g[1],f=g[2];return Ot.operation(e,s[1],d,p,o,i).concat(a(u,w,f))}throw new Error("Non exhaustive match in recurse")};return ze((u=e=>"bottom"===e.kind,function(e){return e.slice(je(e,u))})(ze(a(t,n,r))));var u}function Nt(e,t,r){return R(n)(Tt(e,B)(t,r))}function Tt(e,t){const n=t=>(n,r)=>Ot.strategy(e,n,r)(Tt(e,t)),r=(r,o)=>{if(Y(we(k({1:M,2:pe}))).equals(r.commands,o.commands)){const i=((t,r,o)=>{if("stringGroup"===r.kind&&"stringGroup"===o.kind){const e=Mt(r.group,o.group,n(t),P);return N(e,(e=>m(Et(e,P))))}if("numberGroup"===r.kind&&"numberGroup"===o.kind){const e=Mt(r.group,o.group,n(t),fe);return N(e,(e=>f(Et(e,fe))))}if("tuple"===r.kind&&"tuple"===o.kind){const n=J(t)?t.value:[];return u(h(Pt(e,n,r.tuple,o.tuple,At,fe)))}throw new Error(`Non matching payload. Got ${r.kind} and ${o.kind}`)})(K(r.commands)?t:r.commands,r.payload,o.payload);return N(i,(e=>v(r.commands,e)))}throw new Error(`Non matching primitive strings. Got ${lt(r)} and ${lt(o)}`)};return(t,n)=>dt(y(Ot.extend(e,r,vt(t).state,vt(n).state)))}function Lt(e,t,n){const r=W((t=>et(e,(([e,r])=>{return(o=n,function(e,t){return-1!==o.compare(e,t)})(e,t);var o}))))(t);return R((()=>e))(r)}function Et(e,t){switch(e.kind){case"unbounded":return e;case"windowed":return K(e.key)?e:w(Lt(e.group,e.key,t),e.key);case"countLimit":{const n=e.limit,r=e.n,o=e.group,i=(e,t)=>t<=1?B:D(t-1),c=Xe(r,o,i,t),a=A(V(t))(n,c);return g(Lt(o,a,t),a,r)}case"uniqueLimit":{const n=e.limit,r=e.n,o=e.group,i=(e,t)=>{if("object"===e.kind){const n=[...e.value.keys(),...t.keys()],o=new Set(n);return o.size>=r?B:D(o)}return B},c=Xe(new Set,o,i,t),a=A(V(t))(n,c);return p(Lt(o,a,t),a,r)}}}function Ct(e,t){return(n,r)=>Ot.extend(e,((e,n)=>u(t(e,n))),n,r)}function Ht(e,t){return Nt("append",e,t)}var It=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},Ut=function(e){return"Some"===e._tag},Bt={_tag:"None"},Dt=function(e){return{_tag:"Some",value:e}},Ft=function(e){return"Left"===e._tag},Gt=Object.prototype.hasOwnProperty,Yt=function(e){return It([e[0]],e.slice(1))};var Vt=function(e){return e[0]},Wt=Vt;var $t=function(e){return e.length>0},Jt=function(e){var n=function(e){return function(t){if(1===t.length)return Qt(t);for(var n=[Xt(t)],r=function(t){n.every((function(n){return!e.equals(n,t)}))&&n.push(t)},o=0,i=Zt(t);o<i.length;o++)r(i[o]);return n}}(e);return function(e){return function(r){return n(t(r,Rt(e)))}}},Kt=Yt;function Rt(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var Qt=Kt;var Xt=Wt,Zt=function(e){return e.slice(1)};function en(e){return function(t,n){if(void 0===n){var r=en(e);return function(e){return r(t,e)}}for(var o,i=0;i<n.length;i++)if(o=n[i],e.equals(o,t))return!0;return!1}}var tn=$t;var nn=function(e){return e.slice()};var rn=en;function on(e){var t=Jt(e);return function(n,r){if(void 0===r){var o=on(e);return function(e){return o(e,n)}}return tn(n)&&tn(r)?t(r)(n):tn(n)?nn(n):nn(r)}}function cn(e){var t=rn(e);return function(n,r){if(void 0===r){var o=cn(e);return function(e){return o(e,n)}}return n.filter((function(e){return!t(e,r)}))}}var an=Ft,sn=function(e){return function(t){return an(t)?e(t.left):t.right}};var un=function(e){return function(t){return!e(t)}},ln=Bt,dn=Dt;var wn=Ut;var gn={equals:function(e,t){return e===t}},pn=function(e){for(var t in e)if(Gt.call(e,t))return!1;return!0};function fn(e){return function(t){var n={},r=!1;for(var o in t)if(Gt.call(t,o)){var i=t[o];e(o,i)?n[o]=i:r=!0}return r?n:t}}var mn=function(e){return fn((function(t,n){return e(n)}))};var hn=pn;var yn=mn;yn(un(hn));function vn(...e){return e.reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{})}un((function(e){return 0===e.length}));function qn(e,t){const n=Object.keys(e),r=n.length,o={};for(let i=0;i<r;i++){const r=n[i],c=t(r,e[r]);wn(c)&&(o[r]=c.value)}return o}function bn(e){var t;return["SegmentEntry","SegmentExit"].includes(e.name)&&void 0!==(null===(t=e.properties)||void 0===t?void 0:t.segment_number)}let _n=!1,kn=[],jn=!1;const xn={};let Sn={getCurrentTime:()=>new Date,getCurrentSession:()=>"",getCurrentView:()=>"",getSegments:()=>({}),get1PSegments:()=>({}),get3PSegments:()=>({}),getSegmentsArray:()=>({}),getLookalikeModels:()=>({}),setSegmentActivation:()=>{}};const zn=e=>{const t=Sn.get1PSegments(),n={"1p":Object.assign(Object.assign({},t["1p"]),e["1p"])};Sn.get1PSegments=()=>n},On=e=>{const t=Object.assign({},e);delete t["1p"],Sn.get3PSegments=()=>t},An=()=>{const e=En.concat(Sn.get1PSegments(),Sn.get3PSegments()),t=Ln(e);Sn.getSegments=()=>e,Sn.getSegmentsArray=()=>t};function Mn(e,t,n,r,o,i,c){_n=!1,kn=[],jn=!1;const a=Ln(r.segments);Sn={getCurrentTime:()=>new Date,getCurrentSession:()=>r.sessionId,getCurrentView:()=>r.viewId,get1PSegments:()=>r.segments,get3PSegments:()=>({}),getSegments:()=>En.concat(Sn.get1PSegments(),Sn.get3PSegments()),getSegmentsArray:()=>a,getLookalikeModels:()=>r.lookalikeModels,setSegmentActivation:(e,t)=>{}};const s=qn(t,((t,n)=>{var r;return(null===(r=e[t])||void 0===r?void 0:r.checksum)===n?ln:dn(((e,t)=>{const n=i[e].interpret(null,Sn);return Object.assign({checksum:t},!1===n.result?{}:{result:n})})(t,n))}));if(0===o.length)return{diff:Object.assign(Object.assign({},e),s),errors:[]};if(0===Object.keys(s).length)return{diff:e,errors:[]};{const r=Nn(s,t,n,o,"bootstrap",i,c);return{diff:Object.assign(Object.assign({},e),r.diff),errors:r.errors}}}function Pn(n,r,o,i,c,a){var s;i.segments&&(zn(i.segments),On(i.segments),An(),Sn.setSegmentActivation=(s=n,(n,r,o)=>{var i;return t((null===(i=s[o])||void 0===i?void 0:i.activations)||{},(t=>e(n in t,t)),(([e,t])=>t[n]=e?on(gn)(t[n],[r]):[r]))}));i.lookalikeModels&&(jn=!0),i.segments&&(e=>{const t=Object.keys(e).length,n="1p"in e;return n&&t>1||!n&&t>0})(i.segments)&&(_n=!0),Sn=Object.assign(Object.assign(Object.assign(Object.assign({},Sn),i.viewId?{getCurrentView:()=>i.viewId}:{}),i.sessionId?{getCurrentSession:()=>i.sessionId}:{}),i.lookalikeModels?{getLookalikeModels:()=>i.lookalikeModels}:{});return Nn(n,r,o,kn.length>0?kn:[xn],"updateEnvironment",c,a)}function Nn(e,t,n,r,o,i,c){let a={diff:{},errors:[]};const s=r.length,u=()=>r.filter((e=>{return t=c["!UpdateLookalikeModels"]||[],bn(n=e)&&t.includes(n.properties.segment_number.toString());var t,n})).length===r.length?"lookalikeTransition":"transition",l=(e,t,n)=>"transition"===e?n===t-1?u():"event":e;for(let u=0;u<s;u++){const d=r[u],w=l(o,s,u),g=Tn(Object.assign(Object.assign({},e),a.diff),t,n,d,w,i,c);a={diff:Object.assign(Object.assign({},a.diff),g.diff),errors:a.errors.concat(g.errors)}}return a}function Tn(e,r,o,i,c,a,s){const u=n,l=(e,n)=>{const{is_segment:r,id:c}=n,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(n,["is_segment","id"]),l=a[e],d=l.lift(i,Sn),w=t(rt(s.state||null),sn(u)),g=t(rt(d),sn(u),(e=>Ht(w,e))),p=o[e],f=p?t(rt(p),sn(u),(e=>Ht(g,e))):g,m=nt(g),h=l.interpret(nt(f),Sn),y=s.activations||{};return Object.assign(Object.assign(Object.assign({checksum:s.checksum},null===m?{}:{state:m}),!1===h.result?{}:{result:h}),0===Object.keys(y).length?{}:{activations:y})},d=[],w={},g=function(e,t,n,r,o){switch(e){case"event":const e=(null==o?void 0:o[r.name])||[];if(_n)return e;{kn.push(r);const t=[...o["!UpdateSecondPartyData"]||[],...o["!UpdateThirdPartyData"]||[]];return cn(gn)(e,t)}case"lookalikeTransition":return(null==o?void 0:o[r.name])||[];case"transition":const i=(null==o?void 0:o[r.name])||[];if(jn){const e=o["!UpdateLookalikeModels"]||[];return i.concat(e)}return i;case"bootstrap":const c=((null==o?void 0:o[r.name])||[]).filter((e=>void 0!==t[e]));return cn(gn)(c,[..._n?[]:(o["!UpdateSecondPartyData"]||[]).concat(o["!UpdateThirdPartyData"]||[]),...jn?[]:o["!UpdateLookalikeModels"]||[]]);case"updateExternalState":return Object.keys(n);case"updateEnvironment":return[...o["!UpdateLookalikeModels"]||[],...o["!UpdateSecondPartyData"]||[],...o["!UpdateThirdPartyData"]||[]];case"updateLAL":return o["!UpdateLookalikeModels"]||[];case"updateTPD":return[...o["!UpdateSecondPartyData"]||[],...o["!UpdateThirdPartyData"]||[]]}}(c,e,o,i,s),p=g.length;!function(e){bn(e)&&(zn({"1p":{[e.properties.segment_number]:"SegmentEntry"===e.name}}),An())}(i);for(let t=0;t<p;t++){const n=g[t],o=e[n]||{checksum:r[n]};let i=o;try{i=l(n,o)}catch(e){d.push(`Failed to interpret query ${n}. Got ${e}`)}w[n]=i}return{diff:w,errors:d}}function Ln(e){return Object.keys(e).reduce(((t,n)=>{const r=Object.keys(e[n]),o=[];return r.forEach((t=>{!0===e[n][t]&&o.push(t)})),t[n]=o,t}),{})}const En={empty:{},concat:(e,t)=>{const n=Object.assign({},e);for(const[e,r]of Object.entries(t))n[e]?n[e]=vn(n[e],r):n[e]=r;return n}};const[Cn,Hn]=function(){var t=this&&this.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)},n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},i=function(){function e(e){return"number"==typeof e?c[e]:e}function i(e){return"number"==typeof e?a[e]:e}function u(e){return"number"==typeof e?s[e]:e}function l(e){switch(e.length){case 0:return null;case 1:return e[0];default:return e}}function d(e,t,n){void 0===n&&(n=p);var r=u(t).reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e);return null===r?null:n(r)}function w(e,t){var n=u(t).slice();return n.unshift(e),n}function g(e,t,n){return void 0===n&&(n=p),d(e,w("properties",t),n)}var p=function(e){return e},f=function(e){return!0};function m(e,t){return function(r){var o,i;try{for(var c=n(e),a=c.next();!a.done;a=c.next()){if((0,a.value)(r)===t)return t}}catch(e){o={error:e}}finally{try{a&&!a.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}return!t}}var h=function(e){return function(t){return!e(t)}},y=function(e,t){return function(n){return n>=e&&n<=t}},v=function(e){return new Date(e).getTime()},q=function(e){return d(e,["time"],v)},b=function(e,t){return d(t,e,v)},_=function(e,t,n,r,o,i){return function(c){var a=d(c,e,(function(e){return e.filter(r).map((function(e){return d(e,t)})).reduce(o,i)}));return n(null===a?i:a)}},k=function(e){return function(t){return("string"==typeof e||"number"==typeof e)&&"string"==typeof t&&t.toLowerCase().indexOf(i(e).toLowerCase())>-1}},j=function(e){return function(t){return null!=t&&Array.isArray(t)&&t.indexOf(e)>=0}};function x(e,t,n,r,o){var i=d(e.getSegments(),[t,n])||!1;return o&&(r||i)&&e.setSegmentActivation(t,n,o),i}function S(e,t,n){return d(e.getSegments(),[t,n])||!1}function z(e,t,n){return void 0===n&&(n=18e5),function(o){return{a:{m:function(e,t){return[t[0],o.a.m(null!=e[0]&&e[0][0]===t[0][0]?e[1]:o.a.z,t[1])]},z:[[],o.a.z]},p:function(n,r){return[[e(n)],d(r,t)===e(n)?o.p(n,r):o.a.z]},r:function(t,n){return o.r(t,n[0]!=[]&&n[0][0]===e(t)?n[1]:o.a.z)},d:o.d.sq||{l:function(i,c){var a=d(i,t),s=e(c);if(a!==s)return null;var u=o.d.l(i,c);if(!(Array.isArray(u)&&u.length>1))return null;var l=r(u),w=l[0],g=l.slice(1),p=+(q(i)||c.getCurrentTime()),f=Math.floor(p/n),m={};return m[f]={},m[f][s]=1===g.length?g[0]:g,[w,"u",null,m]},i:function(t,n){if(!Array.isArray(t)||"object"!=typeof t[3])return[[],o.a.z];var r=e(n),i=t[3];return[[r],Object.keys(i).map((function(e){return i[e][r]})).filter((function(e){return e})).map((function(e){return o.d.i([t[0]].concat(e))})).reduce(o.a.m,o.a.z)]}}}}}var O=z((function(e){return e.getCurrentSession()}),["session_id"],18e5),A=z((function(e){return e.getCurrentView()}),["view_id"],3e5);function M(t,n,i,c){return void 0===c&&(c=1),{a:{m:function(e,t){return e.concat(t).slice(-i)},z:[]},p:function(r,o){return d(o,["name"])===e(n)?[t.p(r,o)]:[]},r:function(e,n){return t.r(e,n.reduce((function(e,n){return t.a.m(e,n)}),t.a.z))},d:t.d.ftn||{l:function(e,n){var r,o=t.d.l(e,n),a=d(e,["time"],v)*c;return o&&[o[0],"x"+i,null,(r={},r[a]=2==o.length?o[1]:o.slice(1),r)]},i:function(e,n){return e?Object.keys(e[3]||{}).sort().reverse().map((function(t){return Array.isArray(t)?o([e[0]],r(e[3][t])):[e[0],e[3][t]]})).map((function(e){return t.d.i(e,n)})):[]}}}}var P=function(e,t){return null===e?null==t?null:{b:t}:null==t?{a:e}:{a:e,b:t}},N=function(e,t){return e&&t?e(t):null},T=function(e,t,n){if(n&&n.result&&Array.isArray(n.result)){var r=N(e.d&&e.d.m,{result:n.result[0]}),o=N(t.d&&t.d.m,{result:n.result[1]});return P(r,o)}return null};return{q:function(e){return{lift:function(t,n){return e.d.l(t,n)},interpret:function(t,n){return function(t,n){return{result:e.r(t,n)}}(n,e.d.i(t,n))},migrate:function(t){return t&&e.d.m?e.d.m(t):null},m:e.a.m,z:e.a.z,p:e.p,r:e.r,i:e.d.i}},a:function(e){return m(e,!1)},acq:function(e,t){return{p:function(n,r){return[e.p(n,r),t.p(n,r)]},r:function(n,r){return e.r(n,r[0])&&t.r(n,r[1])},a:{z:[e.a.z,t.a.z],m:function(n,r){return[e.a.m(n[0],r[0]),t.a.m(n[1],r[1])]}},d:{l:function(n,r){return P(e.d.l(n,r),t.d.l(n,r))},i:function(n,r){return n?[e.d.i(n.a||null,r),t.d.i(n.b||null,r)]:[e.a.z,t.a.z]},m:function(n){return T(e,t,n)}}}},af_i:function(e,t,n){return void 0===n&&(n=f),function(r){return d(r,e,(function(e){return e.filter(n).map(t).reduce((function(e,t){return e&&t}),!0)}))&&!0}},af_l:function(e,t,n){return void 0===n&&(n=f),function(r){var o=d(r,e,(function(e){return e.filter(n).length}));return t(null===o?0:o)}},af_m:function(e,t,n,r){return void 0===r&&(r=f),function(o){var i=d(o,e,(function(e){return e.filter(r)}));return null===i||0===i.length?n(0):n(i.map((function(e){return d(e,t)})).reduce((function(e,t){return e+t}),0)/i.length)}},af_n:function(e,t,n,r){return void 0===r&&(r=f),_(e,t,n,r,(function(e,t){return Math.min(e,t)}),Number.POSITIVE_INFINITY)},af_p:function(e,t,n,r){return void 0===r&&(r=f),_(e,t,n,r,(function(e,t){return e*t}),1)},af_s:function(e,t,n,r){return void 0===r&&(r=f),_(e,t,n,r,(function(e,t){return e+t}),0)},af_u:function(e,t,n){return void 0===n&&(n=f),function(r){return d(r,e,(function(e){return e.filter(n).map(t).reduce((function(e,t){return e||t}),!1)}))||!1}},af_x:function(e,t,n,r){return void 0===r&&(r=f),_(e,t,n,r,(function(e,t){return Math.max(e,t)}),Number.NEGATIVE_INFINITY)},as:function(e,t,n){var r=w("properties",t);return function(t){for(var o=d(t,r),i=n.length,c=!0,a=0;a<i;a++){var s=n[a];if(!(c=e(s)(o)))break}return c}},c:j,c_:function(e,t){return function(n){return j(t)(d(n,e))}},cl_:function(e,t){return function(n){return j(i(t))(d(n,e))}},cx:function(e){return function(t){return j(i(e))(t)}},ctu:function(t,n,r,o){return{a:o?{m:function(e,t){return e.filter((function(e){return-1===t.indexOf(e)})).concat(t).slice(-o)},z:[]}:{m:function(e,t){return e.filter((function(e){return-1===t.indexOf(e)})).concat(t)},z:[]},p:function(o,i){return d(i,["name"])===e(t)&&n(i)?d(i,r):[]},r:function(e,t){return t},d:{l:function(){return null},i:function(){return[]}}}},ctv:function(n,r,o,i){function c(e,t){var n,r=function(e){return{k:e.k,c:1+e.c}},o={arr:[],add:{k:t,c:1}};return t?(n=e.reduce((function(e,t){return e.add.k===t.k?{arr:e.arr,add:r(t)}:{arr:e.arr.concat(t),add:e.add}}),o)).arr.concat(n.add):e}return{a:i?{m:function(e,t){return c(e,t).slice(-i)},z:[]}:{m:function(e,t){return c(e,t)},z:[]},p:function(t,i){return d(i,["name"])===e(n)&&r(i)?d(i,o):null},r:function(e,n){return n.reduce((function(e,n){var r;return t(t({},e),((r={})[n.k]=n.c,r))}),{})},d:{l:function(e){return null},i:function(e){return[]}}}},ctw:function(t,n,r,o){return{a:o?{m:function(e,t){return e.concat(t).slice(-o)},z:[]}:{m:function(e,t){return e.concat(t)},z:[]},p:function(o,i){return d(i,["name"])===e(t)&&n(i)?d(i,r):[]},r:function(e,t){return t},d:{l:function(){return null},i:function(){return[]}}}},cw:function(t,n,r){return void 0===r&&(r=p),{a:{m:function(e,t){return e+t},z:0},p:function(r,o){return d(o,["name"])===e(t)&&n(o)?1:0},r:function(e,t){return r(t)},d:{l:function(r){return d(r,["name"])===e(t)&&n(r)?["p",1]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:0},m:function(e){return e&&e.result?["p",e.result]:null}}}},e:function(e){return function(t){return t===e}},e_:function(e,t){return function(n){return d(n,e)===t}},fm:function(e,t){return{p:t.p,r:function(n,r){return e(t.r(n,r))},a:t.a,d:t.d}},ftn:function(t,n,r){return{a:{m:function(e,t){return e.concat(t.slice(0,r-e.length))},z:[]},p:function(r,o){return d(o,["name"])===e(n)?[t.p(r,o)]:[]},r:function(e,n){return t.r(e,n.reduce((function(e,n){return t.a.m(e,n)}),t.a.z))},d:M(t,n,r,-1).d}},fw:function(t,n,r,o){return void 0===o&&(o=p),{a:{m:function(e,t){return null===e?t:e},z:null},p:function(o,i){return d(i,["name"])===e(t)&&n(i)?d(i,r):null},r:function(e,t){return t},d:{l:function(r){return d(r,["name"])===e(t)&&n(r)?["p",1]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:0},m:function(e){return e&&e.result?["p",e.result]:null}}}},g:function(e){return function(t){return t>e}},g_:function(e,t){return function(n){return d(n,e)>t}},gb:function(e,t,n){return{a:{m:function(n,r){var o=Object.keys(n).concat(Object.keys(r)).filter((function(e,t,n){return n.indexOf(e)===t})).sort((function(e,t){return Math.max(d(n,[t,1]),d(r,[t,1]))-Math.max(d(n,[e,1]),d(r,[e,1]))})).slice(0,t).reduce((function(t,o){var i=e.a.m(d(n,[o,0])||e.a.z,d(r,[o,0])||e.a.z);return t[o]=[i,Math.max(d(n,[o,1]),d(r,[o,1]))],t}),{});return o},z:{}},p:function(t,r){var o,i,c=d(r,w("properties",n)),a=e.p(t,r);return null==c||(null==(i=a)||"object"==typeof i&&0===Object.keys(i).length||i===e.a.z)?{}:((o={})[c]=[a,d(r,["time"],v)],o)},r:function(t,n){var r={};return Object.keys(n).forEach((function(o){return r[o]=e.r(t,n[o][0])})),r},d:{l:function(){return null},i:function(){return{}}}}},ge:function(e){return function(t){return t>=e}},ge_:function(e,t){return function(n){return d(n,e)>=t}},i_:p,ifp:function(e){return{a:{m:function(e,t){return t},z:null},p:function(e){return null},r:function(t,n){return function(t){return S(t,"1p",e)}(t)},d:{l:function(e,t){return null},i:function(e){return null}}}},isp:function(e,t,n,r){return{a:{m:function(e,t){return t},z:!1},p:function(n,r){return S(n,e,t)},r:function(o,i){return x(o,e,t,n,r)},d:{l:function(e,t){return null},i:function(e){return Array.isArray(e)&&(!!+e[2]||!1)}}}},itp:function(e,t,n,r){return{a:{m:function(e,t){return t},z:!1},p:function(n,r){return S(n,e,t)},r:function(o,i){return x(o,e,t,n,r)},d:{l:function(e,t){return null},i:function(e){return Array.isArray(e)&&(!!+e[2]||!1)}}}},k:d,l:function(e){return function(t){return t<e}},l_:function(e,t){return function(n){var r=d(n,e);return null!==r&&r<t}},le:function(e){return function(t){return t<=e}},le_:function(e,t){return function(n){var r=d(n,e);return null!==r&&r<=t}},lm:function(e,t){var n=function(t){return function(e,t,n){var r,o=e||{},i=t[n]||{},c=(i["1p"]||{}).const||0;return Object.keys(o).forEach((function(e){o[e].forEach((function(t){var n=(i[e]||{})[t]||0;c+=n}))})),r=c,1/(1+Math.pow(Math.E,-r))}(t.getSegmentsArray(),t.getLookalikeModels(),e)};return{a:{m:function(e,t){return t},z:null},p:function(e){return null},r:function(e,r){return t(n(e))},d:{l:function(e,t){return null},i:function(e){return null}}}},ltn:M,mnw:function(t,n,r,o){void 0===o&&(o=p);var i=Number.POSITIVE_INFINITY;return{a:{m:function(e,t){return e<t?e:t},z:i},p:function(o,c){return d(c,["name"])===e(t)&&n(c)?d(c,r):i},r:function(e,t){return o(t)},d:{l:function(o){return d(o,["name"])===e(t)&&n(o)?["n",d(o,r)]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:i}}}},mxw:function(t,n,r,o){void 0===o&&(o=p);var i=Number.NEGATIVE_INFINITY;return{a:{m:function(e,t){return e>t?e:t},z:i},p:function(o,c){return d(c,["name"])===e(t)&&n(c)?d(c,r):i},r:function(e,t){return o(t)},d:{l:function(o){return d(o,["name"])===e(t)&&n(o)?["v",d(o,r)]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:i}}}},n0:h(p),n:function(e){return function(t){return t!==e}},nt:h,n_:function(e,t){return function(n){return d(n,e)!==t}},o:function(e){return m(e,!0)},ocq:function(e,t){return{p:function(n,r){return[e.p(n,r),t.p(n,r)]},r:function(n,r){return e.r(n,r[0])||t.r(n,r[1])},a:{z:[e.a.z,t.a.z],m:function(n,r){return[e.a.m(n[0],r[0]),t.a.m(n[1],r[1])]}},d:{l:function(n,r){return P(e.d.l(n,r),t.d.l(n,r))},i:function(n,r){return n?[e.d.i(n.a||null,r),t.d.i(n.b||null,r)]:[e.a.z,t.a.z]},m:function(n){return T(e,t,n)}}}},oe:function(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r},os:function(e,t,n){var r=w("properties",t);return function(t){for(var o=d(t,r),i=n.length,c=!1,a=0;a<i;a++){var s=n[a];if(c=e(s)(o))break}return c}},pb:function(e,t,n){return function(r){return y(t,n)(g(r,e))}},pc:function(e,t){return function(n){var r=g(n,e);return null!=r&&Array.isArray(r)&&r.indexOf(t)>=0}},pc_:function(e,t){return function(n){var r=g(n,e),o=i(t);return null!=r&&Array.isArray(r)&&r.indexOf(o)>=0}},pe:function(e,t){return function(n){return g(n,e)===t}},pg:function(e,t){return function(n){return g(n,e)>t}},pge:function(e,t){return function(n){return g(n,e)>=t}},pl:function(e,t){return function(n){var r=g(n,e);return null!==r&&r<t}},ple:function(e,t){return function(n){var r=g(n,e);return null!==r&&r<=t}},pn:function(e,t){return function(n){return g(n,e)!==t}},ps:function(e,t){return function(n){return k(t)(g(n,e))}},pw:function(t,n,r,o){return void 0===o&&(o=p),{a:{m:function(e,t){return e*t},z:1},p:function(o,i){return d(i,["name"])===e(t)&&n(i)?d(i,r):1},r:function(e,t){return o(t)},d:{l:function(o){return d(o,["name"])===e(t)&&n(o)?(i=d(o,r))>=1?["m2p",i]:i>0?["m2p",null,1/i]:0==i?["m2p",0]:i>-1?["m2p",null,1/i,1]:["m2p",i,null,1]:null;var i},i:function(e){return e?Array.isArray(e)?0===(t=e.slice(1))[0]?0:Math.pow(-1,t[2]||0)*(t[0]||1)/(t[1]||1):e:1;var t}}}},s:k,s_:function(e,t){return function(n){return k(t)(d(n,e))}},scq:function(e,t,n){return void 0===n&&(n=p),{p:function(n,r){return[e.p(n,r),t.p(n,r)]},r:function(r,o){return n(e.r(r,o[0])+t.r(r,o[1]))},a:{z:[e.a.z,t.a.z],m:function(n,r){return[e.a.m(n[0],r[0]),t.a.m(n[1],r[1])]}},d:{l:function(n,r){return P(e.d.l(n,r),t.d.l(n,r))},i:function(n,r){return n?[e.d.i(n.a||null,r),t.d.i(n.b||null,r)]:[e.a.z,t.a.z]},m:function(n){return T(e,t,n)}}}},sq:O,sw:function(t,n,r,o){return void 0===o&&(o=p),{a:{m:function(e,t){return e+t},z:0},p:function(o,i){return d(i,["name"])===e(t)&&n(i)?d(i,r):0},r:function(e,t){return o(t)},d:{l:function(o){return function(r){return d(r,["name"])===e(t)&&n(r)}(o)?(i=d(o,r))<0?["p2",null,-i]:["p2",i]:null;var i},i:function(e){return e?Array.isArray(e)?((t=e.slice(1))[0]||0)-(t[1]||0):e:0;var t}}}},t:f,tb:function(e,t){return function(n){return y(e,t)(q(n))}},te:function(e){return function(t){return q(t)===e}},te_:function(e,t){return function(n){return b(e,n)===t}},tg:function(e){return function(t){return q(t)>e}},tg_:function(e,t){return function(n){return b(e,n)>t}},tge:function(e){return function(t){return q(t)>=e}},tge_:function(e,t){return function(n){return b(e,n)>=t}},ti:v,tl:function(e){return function(t){return q(t)<e}},tl_:function(e,t){return function(n){return b(e,n)<t}},tle:function(e){return function(t){return q(t)<e}},tle_:function(e,t){return function(n){return b(e,n)<t}},tn:function(e){return function(t){return q(t)!==e}},tn_:function(e,t){return function(n){return b(e,n)!==t}},tw:function(e,t,n){var i=n||100,c=Math.ceil(t/i),a=function(e){return Math.floor(e/c)},s=function(e,n,r){var o;return[a(e-t),(o={},o[a(n)]=r,o)]},u=function(t,n){var r=Math.max(t[0],n[0]),o=Object.keys(t[1]).filter((function(e){return e>=r})).concat(Object.keys(n[1]).filter((function(e){return e>=r}))).filter((function(e,t,n){return n.indexOf(e)===t})).reduce((function(r,o){var i=e.a.m(t[1][o]||e.a.z,n[1][o]||e.a.z);return i!==e.a.z&&(r[o]=i),r}),{});return[r,o]},w=[Number.NEGATIVE_INFINITY,{}],g=function(e){var t=function(t){return t.map((function(t){var n=r(t,3),o=n[0],i=(n[1],n[2]);return s(e.t,i,o)})).reduce(u,w)};return u(t(e.in),t(e.out))},p=function(t){if(void 0!==t.result)return p(t.result);if(void 0!==t.w)return p(g(t));var n=r(t,2),o=(n[0],n[1]),i=null,c={};for(var a in o){var s=e.d.m({result:o[a]});s&&Array.isArray(s)&&(i=s[0],c[a]=l(s.slice(1)))}return i&&[i,"w",t[0],c]};return{a:{m:function(e,t){var n=e.w?g(e):e;return u(n,t)},z:w},p:function(t,n){return s(t.getCurrentTime(),d(n,["time"],v),e.p(t,n))},r:function(t,n){var r=(n.w?g(n):n)[1];return e.r(t,Object.keys(r).reduce((function(t,n){return e.a.m(t,r[n])}),e.a.z))},d:e.d.tw||{l:function(t,n){var i=e.d.l(t,n);return i&&o([i[0],"w"],r(s(n.getCurrentTime(),d(t,["time"],v),i.slice(1))))},i:function(t,n){var r=Array.isArray(t)?t:[];return[r[2]||null,Object.keys(r[3]||{}).map((function(t){var o;return(o={})[t]=e.d.i(r[3][t],n),o})).reduce((function(e,t){return Object.keys(t).forEach((function(n){return e[n]=t[n]})),e}),{})]},m:e.d.m&&p}}},vgw:function(t,n,r,o){void 0===o&&(o=p);var i={v:0,k:0};return{a:{m:function(e,t){var n=e.k+t.k;return{v:n?e.v+t.k*(t.v-e.v)/n:0,k:n}},z:i},p:function(o,c){return d(c,["name"])===e(t)&&n(c)?{v:d(c,r),k:1}:i},r:function(e,t){return o(t.v)},d:{l:function(o){return d(o,["name"])===e(t)&&n(o)?0==(i=d(o,r))?["p3",1]:i<0?["p3",1,null,-i]:["p3",1,i]:null;var i},i:function(e){return e?Array.isArray(e)?{v:(((t=e.slice(1))[1]||0)-(t[2]||0))/(t[0]||1),k:t[0]||0}:void 0:i;var t}}}},vq:A,w:function(e){return function(t){return t===i(e)}},x:function(e){return function(t){return t!==i(e)}},y:function(e,t){return function(n){return g(n,e)===a[t]}},y_:function(e,t){return function(n){return d(n,e)===a[t]}},z:function(e,t){return function(n){return g(n,e)!==a[t]}},z_:function(e,t){return function(n){return d(n,e)!==a[t]}}}}(),c=["Pageview","LinkClick","SlotViewable","SlotClicked"],a=["film","dance","netflix","exhibition","gallery","health","movie","theatre","Experience","art","cinema","museum","/technology and computing/consumer electronics/tv and video equipment","festival","vegan","vegetarian","comedy","designer","food","restaurant","travel","Class","Food + Drink","HIIT","TV","bicycle","body-build","bodybuild","books","climbing","concert","cycling","directnow","event","exercise","families","fitness","getaway","gym","hbo","hulu","marathon","music","nowtv","pilates","roku","running","season","series","show","slingtv","spin-class","spinclass","spinning","sport","streaming","swim","television","theater","yoga","youtube","-pool","Exhibition","London","Theatre","Workshop","abstract","amazon prime","amazon-prime","attraction","avocado","babies","bisexual","boating","calorie","canoeing","cardio","checkout.timeout","children","classic","crunch","culture","dairy-free","dairyfree","diet","directv","drag","drag queen","entertainment","equinox","expensive","experience","family","festivals","film (category)","gay","gluten-free","glutenfree","gourmet","grill","homosexual","horror","horseback","intersex","jazz","juice","kayaking","kids","lesbian","lgbt","london/tickets","luxury","mum","newyork/tickets","nightlife (category)","outdoor","personal-train","personaltrain","photograph","pride","protein","queer","quinoa","rowing","sailing","salad","scotch","shopping","shopping and style (category)","smoothie","steakhouse","strength","sushi","theatre (category)","things to do (category)","ticket","ticketing.timeout","tickets.timeout","transgender","travel and hotels (category)","trip","video","westend.timeout","whiskey","whisky","/art and entertainment/movies and tv/comedies","/art and entertainment/movies and tv/romantic comedies","/art and entertainment/music/music genres/classical music","/art and entertainment/music/music genres/pop music","/food and drink/healthy eating","/food and drink/vegetarian","Music","New York Kids","Nightlife","alcohol","baby","babysit","barbecue","bars and pubs (category)","beach","beer","book","burger","child","cinemas (category)","cocktail","comfort food","dad","dance (category)","familia","father","football","gaming","getaways","gig","halloween","holiday","hotel","https://ticketing.timeout.com/","https://westend.timeout.com/","https://www.timeout.com/london/tickets","https://www.timeout.com/london/tickets#","madre","mom","mother","music (category)","now tv","now-tv","padre","parent","park","parks","playstation","restaurants (category)","sling tv","stadium","style","toddler","wembley","/art and entertainment/books and literature","/art and entertainment/comics and animation","/art and entertainment/movies and tv","/art and entertainment/movies and tv/animated","/art and entertainment/movies and tv/children\'s","/art and entertainment/movies and tv/documentaries","/art and entertainment/movies and tv/reality","/art and entertainment/movies and tv/television","/art and entertainment/music/music genres/opera","/art and entertainment/music/music genres/soundtracks","/art and entertainment/shows and events/classical concert","/automotive and vehicles/cars/luxury","/automotive and vehicles/motorcycles","/business and industrial","/business and industrial/fashion industry","/education/adult education","/education/language learning","/family and parenting","/finance/accounting and auditing/tax preparation and planning","/finance/financial news","/food and drink/dining out","/food and drink/food/fruits and vegetables","/food and drink/food/salads","/food and drink/vegan","/health and fitness","/hobbies and interests/birdwatching","/home and garden/gardening and landscaping","/home and garden/home improvement and repair","/pets/birds","/pets/large animals","/society/crime","/society/dating","/sports/diving","/sports/horse racing","/sports/horses","/sports/olympics/paralympic games","/sports/skiing","/sports/volleyball/beach volleyball","/style and fashion/beauty/cosmetics","Animals","Arsenal FC","Barcelona","CBD","Christmas","Conservatory","Cookery Class","Edinburgh","Fair","H&M","Madrid","Manchester","Nature","New York","Outdoors","Plants","Restaurant","Spain","Spurs","THC","Tottenham Hotspur","United States","Watford FC","Wildlife","abroad","absenta","absinthe","accessor","adidas","adventure","aeroport","aeropuerto","aguacate","alcohol free","alvocat","amazonprime","american","amics","amigos","amistad","amstel","animales","animate","animation","anime","app","apparel","apps","argentinian","armani","art (category)","arte","artist","attenborough","attractions (category)","avant garde","avant-garde","bacon","band","barbacoa","bbq","beauty","bebe","beef","bolders","bong","bongs","boots","boulders","bourbon","boutique","brandy","brewery","budlight","budweiser","bulleit","butchers","buy","cabaret","calorias","campbeltown","camping","cannabis","carn","carne","carnival","catwalk","cemeteries","century21","cerdo","cervesa","cerveza","cheese","cheeseburger","chicken","claus","climate","clip","clothing","club","clubs (category)","coctel","colegas","comedian","comedy (category)","competition","corona","costelles","craftbeer","cultura","dancing","danza","deal","december","destino","destinos","dietary","dior","direct-now","disco","dispensaries","dispensary","documentary","dram","drama","drink","duck","electronic","emirates stadium","environment","escapada","euro 2020","euro 2022","extinct","facial","familias","farms","fashion","fast food","fauna","festival of football","festival-of-football","festivales","financ","fine dining","fine-dining","flight","flora","food festival","food market","football club","football pitch","football-pitch","forever21","fotografa","friends","friendship","funny","galera","gambl","games","gardens","ghost","gifts","ginebra","glenfiddich","granges","granja","groups","grups","gucci","hamburger","hamburguesa","haunted","havana","healthy","heels","heineken","hiking","hilarious","historical","history","holidays","hotels (category)","https://checkout.timeout.com/","https://www.timeout.com/london/bars-pubs/football-pubs-in-london","https://www.timeout.com/london/offers","humor","humour","impression","improv","jagermeister","jameson","jardin","jardines","jardins","jewel","jimbean","joint","joints","joke","junk food","kids (category)","lager","laugh","level 3 - expensive","level 4 - luxury","lgbt (category)","libro","licor","liqueur","liquor","liquour","llibre","low alcohol","low-alcohol","maker\'s mark","maker\'s-mark","makers mark","manicure","mare","marijuana","mates","meat free","meat-free","meeting","merry","mocktail","mocktails","moda","monkey shoulder","monkey-shoulder","museo","museu","museums","museums (category)","musical","nadal","nadales","nail","natura","navidad","navidades","nens","nightlife","nike","nintendo","nios","non-alcoholic","offer","open-air","organic","outdoors","pals","parade","parcs","pare","parques","payment","pedicure","picnic","pitch","plant based","plant-based","plantas","plantes","play","pollastre","pollo","pop-up","porc","pork","pot","prada","proteina","pumpkin","puzzle","re-purpose","re-use","recreation","recycle","recycling","repurpose","restaurante","retail","reuse","review","rib","ribs","rom","romantic","ron","rugby","runway","sambuca","santa","satire","scary","scenes","scenic","schnapps","screen","screening","second-hand","secondhand","shoe","shop","shops (venues)","skin","sling-tv","sneakers","soccer","spa","spas","spirits","spooky","sport & fitness","stand-up","standup","stella","styl","sustainability","sweepstake","takeaway","teatre","teatro","tech","tequila","ternera","terror","theatre genres","thing","things to do","things-to-do","thriller","tik-tok","tinctures","trainers","trans","trans-","treatment","treatments","trend","tv","vacances","vacation","vapes","vaping","veal","vedella","veg","veganism","vegetariano","veggie","veggie-friendly","viajar","viaje","viatge","viatjar","vintage","vodka","waste","wear","weed","weekend-break","weekendbreak","wellness","wildlife","winter","women-in-football","xmas","zumo"],s=[["client","url"],["client","title"],["classifications_watson","taxonomy_labels"],["category","primary_category"],["category","page_tags"],["event","eventType"],["transaction","category"],["dest_url"],["page_city"],["category","sub_category1"],["geo_info","city"],["event","name"],["transaction","quantity"],["event","offerText"],["geo_info","country"],["basket","category"],["campaign_id"],["basket","total"],["page_country"]];return e({1e7:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/education/graduate school"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/science"),i.ge(3)),2592e6))),10000001:i.q(i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles"),i.ge(3)),2592e6)),10000002:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,199),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,200),i.ge(3)),2592e6))),10000003:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,212),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/finance"),i.ge(3)),2592e6))),10000004:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/careers"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,214),i.ge(3)),2592e6))),10000005:i.q(i.tw(i.cw(0,i.pc_(2,"/education"),i.ge(3)),2592e6)),10000006:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,216),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,230),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/society/social institution/marriage"),i.ge(3)),2592e6))),10000007:i.q(i.tw(i.cw(0,i.pc_(2,"/art and entertainment"),i.ge(3)),2592e6)),10000008:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/business and industrial/food industry"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/food and drink"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/food and drink/food and grocery retailers"),i.ge(3)),2592e6))),10000010:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,149),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,223),i.ge(3)),2592e6))),10000011:i.q(i.tw(i.cw(0,i.pc_(2,"/hobbies and interests"),i.ge(3)),2592e6)),10000012:i.q(i.tw(i.cw(0,i.pc_(2,"/home and garden"),i.ge(3)),2592e6)),10000013:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/movies"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,201),i.ge(3)),2592e6))),10000014:i.q(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/music"),i.ge(3)),2592e6)),10000015:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/business and industrial/business news"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,218),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/law, govt and politics"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/news"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,229),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/sports/sports news"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/technology and computing/tech news"),i.ge(3)),2592e6))),10000016:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/finance/bank"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,218),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/finance/personal finance"),i.ge(3)),2592e6))),10000017:i.q(i.tw(i.cw(0,i.pc_(2,"/pets"),i.ge(3)),2592e6)),10000018:i.q(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/celebrity fan and gossip"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,205),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,206),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,148),i.ge(3)),2592e6))),10000019:i.q(i.tw(i.cw(0,i.pc_(2,"/real estate"),i.ge(3)),2592e6)),10000020:i.q(i.tw(i.cw(0,i.pc_(2,"/shopping"),i.ge(3)),2592e6)),10000021:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,223),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/sports"),i.ge(3)),2592e6))),10000022:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,213),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/style and fashion"),i.ge(3)),2592e6))),10000023:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/business and industrial/automation"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/science/computer science"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/technology and computing"),i.ge(3)),2592e6))),10000024:i.q(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/movies and tv/movies/reviews"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,206),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/art and entertainment/tv"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,12),i.ge(3)),2592e6))),10000025:i.q(i.tw(i.cw(0,i.pc_(2,"/travel"),i.ge(3)),2592e6)),10000026:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/hobbies and interests/games/video and computer games"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/technology and computing/consumer electronics/game systems and consoles"),i.ge(3)),2592e6))),10000035:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/science/engineering"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/science/physics"),i.ge(3)),2592e6))),10000036:i.q(i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/buying and selling cars"),i.ge(3)),2592e6)),10000037:i.q(i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/motor shows"),i.ge(3)),2592e6)),10000038:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/cars/hybrid"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/electric vehicles"),i.ge(3)),2592e6))),10000039:i.q(i.tw(i.cw(0,i.pc_(2,211),i.ge(3)),2592e6)),10000040:i.q(i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/cars/performance vehicles"),i.ge(3)),2592e6)),10000041:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,200),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/art and entertainment/comics and animation/comics"),i.ge(3)),2592e6))),10000042:i.q(i.tw(i.cw(0,i.pc_(2,"/business and industrial/business operations"),i.ge(3)),2592e6)),10000043:i.q(i.tw(i.cw(0,i.pc_(2,230),i.ge(3)),2592e6)),10000044:i.q(i.tw(i.cw(0,i.pc_(2,216),i.ge(3)),2592e6)),10000045:i.q(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/dance"),i.ge(3)),2592e6)),10000046:i.q(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/visual art and design"),i.ge(3)),2592e6)),10000047:i.q(i.tw(i.cw(0,i.pc_(2,"/food and drink/beverages/alcoholic beverages"),i.ge(3)),2592e6)),10000048:i.q(i.tw(i.cw(0,i.pc_(2,"/food and drink/barbecues and grilling"),i.ge(3)),2592e6)),10000049:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/food and drink/desserts and baking"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/food and drink/food and grocery retailers/bakeries"),i.ge(3)),2592e6))),10000050:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,219),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/food and drink/food/fast food"),i.ge(3)),2592e6))),10000051:i.q(i.tw(i.cw(0,i.pc_(2,"/food and drink/food allergies"),i.ge(3)),2592e6)),10000052:i.q(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,220),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,221),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/food and drink/health and lowfat cooking"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,149),i.ge(3)),2592e6))),10000053:i.q(i.tw(i.cw(0,i.pc_(2,150),i.ge(3)),2592e6)),10000054:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/health and fitness/exercise"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/health and fitness/sports medicine"),i.ge(3)),2592e6))),10000055:i.q(i.tw(i.cw(0,i.pc_(2,"/health and fitness/men\'s health"),i.ge(3)),2592e6)),10000056:i.q(i.tw(i.cw(0,i.pc_(2,"/health and fitness/nutrition"),i.ge(3)),2592e6)),10000057:i.q(i.tw(i.cw(0,i.pc_(2,"/health and fitness/women\'s health"),i.ge(3)),2592e6)),10000058:i.q(i.tw(i.cw(0,i.pc_(2,225),i.ge(3)),2592e6)),10000059:i.q(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/movies and tv/action"),i.ge(3)),2592e6)),10000060:i.q(i.tw(i.cw(0,i.pc_(2,202),i.ge(3)),2592e6)),10000061:i.q(i.tw(i.cw(0,i.pc_(2,203),i.ge(3)),2592e6)),10000062:i.q(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/movies and tv/horror"),i.ge(3)),2592e6)),10000063:i.q(i.tw(i.cw(0,i.pc_(2,229),i.ge(3)),2592e6)),10000064:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/law, govt and politics/law enforcement"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/law, govt and politics/legal issues"),i.ge(3)),2592e6))),10000065:i.q(i.tw(i.cw(0,i.pc_(2,"/news/national news"),i.ge(3)),2592e6)),10000066:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/law, govt and politics/government"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/law, govt and politics/politics"),i.ge(3)),2592e6))),10000067:i.q(i.tw(i.cw(0,i.pc_(2,"/science/weather"),i.ge(3)),2592e6)),10000068:i.q(i.tw(i.cw(0,i.pc_(2,227),i.ge(3)),2592e6)),10000069:i.q(i.tw(i.cw(0,i.pc_(2,"/pets/cats"),i.ge(3)),2592e6)),10000070:i.q(i.tw(i.cw(0,i.pc_(2,"/pets/dogs"),i.ge(3)),2592e6)),10000071:i.q(i.tw(i.cw(0,i.pc_(2,228),i.ge(3)),2592e6)),10000072:i.q(i.tw(i.cw(0,i.pc_(2,"/pets/reptiles"),i.ge(3)),2592e6)),10000073:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/football"),i.ge(3)),2592e6)),10000074:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/baseball"),i.ge(3)),2592e6)),10000075:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/basketball"),i.ge(3)),2592e6)),10000076:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/bodybuilding"),i.ge(3)),2592e6)),10000077:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/bowling"),i.ge(3)),2592e6)),10000078:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/boxing"),i.ge(3)),2592e6)),10000079:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/bicycling"),i.ge(3)),2592e6)),10000080:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/fishing"),i.ge(3)),2592e6)),10000081:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/golf"),i.ge(3)),2592e6)),10000082:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/hunting and shooting"),i.ge(3)),2592e6)),10000083:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/rugby"),i.ge(3)),2592e6)),10000084:i.q(i.tw(i.cw(0,i.pc_(2,235),i.ge(3)),2592e6)),10000085:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/tennis"),i.ge(3)),2592e6)),10000086:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/walking"),i.ge(3)),2592e6)),10000087:i.q(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/business and industrial/tanning"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/style and fashion/beauty"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,237),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/style and fashion/beauty/cosmetology and beauty professionals"),i.ge(3)),2592e6))),10000088:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/style and fashion/beauty/tattoos"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/style and fashion/body art"),i.ge(3)),2592e6))),10000089:i.q(i.tw(i.cw(0,i.pc_(2,"/style and fashion/men \'s fashion"),i.ge(3)),2592e6)),10000090:i.q(i.tw(i.cw(0,i.pc_(2,"/technology and computing/consumer electronics"),i.ge(3)),2592e6)),10000324:i.q(i.tw(i.cw(0,i.pc_(2,212),i.ge(3)),2592e6)),10000325:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/business and industrial/company/annual report"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/business and industrial/company/bankruptcy"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/business and industrial/company/earnings"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/business and industrial/company/joint venture"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/business and industrial/company/merger and acquisition"),i.ge(3)),2592e6))),10000327:i.q(i.tw(i.cw(0,i.pc_(2,"/finance/personal finance/debt management"),i.ge(3)),2592e6)),10000328:i.q(i.tw(i.cw(0,i.pc_(2,"/finance/personal finance/insurance"),i.ge(3)),2592e6)),10000329:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/finance/accounting and auditing/billing and invoicing"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/finance/accounting and auditing/bookkeeping"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,217),i.ge(3)),2592e6))),10000330:i.q(i.tw(i.cw(0,i.pc_(2,"/finance/investing"),i.ge(3)),2592e6)),10000687:i.q(i.tw(i.cw(0,i.pc_(2,"/science/social science"),i.ge(3)),2592e6)),10000688:i.q(i.tw(i.cw(0,i.pc_(2,215),i.ge(3)),2592e6)),10000689:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,211),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/scooters and mopeds"),i.ge(3)),2592e6))),10000690:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/fiat"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/ford"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/honda"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/hyundai"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/nissan"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/peugeot"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/subaru"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/suzuki"),i.ge(3)),2592e6))),10000691:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,210),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/audi"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/bentley"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/ferrari"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/lamborghini"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/land rover"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/maserati"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/mercedes-benz"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/porsche"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/rolls-royce"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/toyota"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/volkswagen"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/vehicle brands/volvo"),i.ge(3)),2592e6))),10000692:i.q(i.tw(i.cw(0,i.pc_(2,"automotive and vehicles/cars/coupe"),i.ge(3)),2592e6)),10000693:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/auto parts"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/auto repair"),i.ge(3)),2592e6))),10000694:i.q(i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/cars"),i.ge(3)),2592e6)),10000695:i.q(i.tw(i.cw(0,i.pc_(2,"/automotive and vehicles/cars/sedan"),i.ge(3)),2592e6)),10000696:i.q(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/books and literature/children\'s books"),i.ge(3)),2592e6)),10000697:i.q(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/books and literature/poetry"),i.ge(3)),2592e6)),10000698:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/careers/career advice"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/careers/resume writing and advice"),i.ge(3)),2592e6))),10000699:i.q(i.tw(i.cw(0,i.pc_(2,"/careers/telecommuting"),i.ge(3)),2592e6)),10000700:i.q(i.tw(i.cw(0,i.pc_(2,"/careers/career planning"),i.ge(3)),2592e6)),10000701:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/careers/job fairs"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/careers/job search"),i.ge(3)),2592e6))),10000702:i.q(i.tw(i.cw(0,i.pc_(2,214),i.ge(3)),2592e6)),10000703:i.q(i.tw(i.cw(0,i.pc_(2,"/education/distance learning"),i.ge(3)),2592e6)),10000704:i.q(i.tw(i.cw(0,i.pc_(2,"/education/special education"),i.ge(3)),2592e6)),10000705:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,199),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,215),i.ge(3)),2592e6))),10000706:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/education/homework and study tips"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/education/teaching and classroom resources/lesson plans"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/education/teaching and classroom resources/school supplies"),i.ge(3)),2592e6))),10000707:i.q(i.tw(i.cw(0,i.pc_(2,"/hobbies and interests/arts and crafts/photography"),i.ge(3)),2592e6)),10000708:i.q(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/theatre"),i.ge(3)),2592e6)),10000709:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,147),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,207),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,209),i.ge(3)),2592e6))),10000710:i.q(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,149),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,222),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,150),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/pets/animal welfare"),i.ge(3)),2592e6))),10000711:i.q(i.tw(i.cw(0,i.pc_(2,"/food and drink/beverages/non alcoholic beverages"),i.ge(3)),2592e6)),10000712:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/food and drink/kosher food"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,222),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,150),i.ge(3)),2592e6))),10000713:i.q(i.tw(i.cw(0,i.pc_(2,"/food and drink/cuisines"),i.ge(3)),2592e6)),10000714:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/food and drink/food/condiments and dressings"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/food and drink/food/frozen food"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,220),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/food and drink/food/grains and pasta"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/food and drink/food/herbs and spices"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,221),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/food and drink/food/snack foods"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/food and drink/gastronomy/slow food"),i.ge(3)),2592e6))),10000715:i.q(i.tw(i.cw(0,i.pc_(2,"/health and fitness/aging"),i.ge(3)),2592e6)),10000716:i.q(i.tw(i.cw(0,i.pc_(2,"/health and fitness/weight loss"),i.ge(3)),2592e6)),10000717:i.q(i.tw(i.cw(0,i.pc_(2,"/hobbies and interests/arts and crafts"),i.ge(3)),2592e6)),10000718:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/hobbies and interests/collecting"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/hobbies and interests/collecting/stamps and coins"),i.ge(3)),2592e6))),10000719:i.q(i.tw(i.cw(0,i.pc_(2,"/hobbies and interests/games/board games and puzzles"),i.ge(3)),2592e6)),10000720:i.q(i.tw(i.cw(0,i.pc_(2,"/hobbies and interests/magic and illusion"),i.ge(3)),2592e6)),10000721:i.q(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/music/musical instruments"),i.ge(3)),2592e6)),10000722:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,224),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,227),i.ge(3)),2592e6))),10000723:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/radio"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/technology and computing/consumer electronics/radios"),i.ge(3)),2592e6))),10000724:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/books and literature/fan fiction"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/art and entertainment/books and literature/science fiction"),i.ge(3)),2592e6))),10000725:i.q(i.tw(i.cw(0,i.pc_(2,"/home and garden/appliances"),i.ge(3)),2592e6)),10000726:i.q(i.tw(i.cw(0,i.pc_(2,226),i.ge(3)),2592e6)),10000727:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/visual art and design/design/interior design"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/art and entertainment/visual art and design/drawing"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/art and entertainment/visual art and design/painting"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/hobbies and interests/arts and crafts/woodworking"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,226),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/home and garden/remodeling and construction"),i.ge(3)),2592e6))),10000728:i.q(i.tw(i.cw(0,i.pc_(2,225),i.ge(3)),2592e6)),10000729:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/home and garden/bed and bath/bathroom"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/home and garden/bed and bath/bedroom"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/home and garden/home furnishings"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/home and garden/home furnishings/lamps and lighting"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/home and garden/interior decorating"),i.ge(3)),2592e6))),10000730:i.q(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/movies and tv/independent"),i.ge(3)),2592e6)),10000731:i.q(i.tw(i.cw(0,i.pc_(2,204),i.ge(3)),2592e6)),10000732:i.q(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/movies and tv/dramas"),i.ge(3)),2592e6)),10000733:i.q(i.tw(i.cw(0,i.pc_(2,146),i.ge(3)),2592e6)),10000734:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,145),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,146),i.ge(3)),2592e6))),10000735:i.q(i.tw(i.cw(0,i.pc_(2,208),i.ge(3)),2592e6)),10000736:i.q(i.tw(i.cw(0,i.pc_(2,208),i.ge(3)),2592e6)),10000737:i.q(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/music/music genres/jazz"),i.ge(3)),2592e6)),10000738:i.q(i.tw(i.cw(0,i.pc_(2,147),i.ge(3)),2592e6)),10000739:i.q(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/music/music genres/blues"),i.ge(3)),2592e6)),10000740:i.q(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/music/music genres/country music"),i.ge(3)),2592e6)),10000741:i.q(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/music/music genres/hip hop"),i.ge(3)),2592e6)),10000742:i.q(i.tw(i.cw(0,i.pc_(2,148),i.ge(3)),2592e6)),10000743:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/music/music genres/electronic music"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,148),i.ge(3)),2592e6))),10000744:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,147),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,207),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,209),i.ge(3)),2592e6))),10000745:i.q(i.tw(i.cw(0,i.pc_(2,"/news/local news"),i.ge(3)),2592e6)),10000746:i.q(i.tw(i.cw(0,i.pc_(2,"/news/international news"),i.ge(3)),2592e6)),10000747:i.q(i.tw(i.cw(0,i.pc_(2,"/finance/personal finance/financial planning/retirement and pension"),i.ge(3)),2592e6)),10000748:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,217),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/finance/personal finance/financial planning"),i.ge(3)),2592e6))),10000749:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,232),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,233),i.ge(3)),2592e6))),10000750:i.q(i.tw(i.cw(0,i.pc_(2,"/pets/aquariums"),i.ge(3)),2592e6)),10000751:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,145),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,146),i.ge(3)),2592e6))),10000752:i.q(i.tw(i.cw(0,i.pc_(2,"/real estate/architects"),i.ge(3)),2592e6)),10000753:i.q(i.tw(i.cw(0,i.pc_(2,"/real estate/apartments"),i.ge(3)),2592e6)),10000754:i.q(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/business and industrial/agriculture and forestry"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/business and industrial/agriculture and forestry/organic farming"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,224),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,228),i.ge(3)),2592e6))),10000755:i.q(i.tw(i.cw(0,i.pc_(2,"/real estate/buying and selling homes"),i.ge(3)),2592e6)),10000756:i.q(i.tw(i.cw(0,i.pc_(2,236),i.ge(3)),2592e6)),10000757:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/water polo"),i.ge(3)),2592e6)),10000758:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/table tennis and ping-pong"),i.ge(3)),2592e6)),10000759:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/softball"),i.ge(3)),2592e6)),10000760:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/sports/volleyball"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,236),i.ge(3)),2592e6))),10000761:i.q(i.tw(i.cw(0,i.pc_(2,234),i.ge(3)),2592e6)),10000762:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/rowing"),i.ge(3)),2592e6)),10000763:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/badminton"),i.ge(3)),2592e6)),10000764:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/sailing"),i.ge(3)),2592e6)),10000765:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,232),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,233),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/sports/polo"),i.ge(3)),2592e6))),10000766:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/skating/figure skating"),i.ge(3)),2592e6)),10000767:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/cheerleading"),i.ge(3)),2592e6)),10000768:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/auto racing"),i.ge(3)),2592e6)),10000769:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/weightlifting"),i.ge(3)),2592e6)),10000770:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/gymnastics"),i.ge(3)),2592e6)),10000771:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/swimming"),i.ge(3)),2592e6)),10000772:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/running and jogging"),i.ge(3)),2592e6)),10000773:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/sports/hockey"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/sports/hockey/field hockey"),i.ge(3)),2592e6))),10000774:i.q(i.tw(i.cw(0,i.pc_(2,231),i.ge(3)),2592e6)),10000775:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/sports/bicycling/mountain biking"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/sports/canoeing and kayaking"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/sports/climbing"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,231),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/sports/go kart"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/sports/parachuting"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/sports/scuba diving"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/sports/skating"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,235),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/sports/skiing/waterskiing"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/sports/snowboarding"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/sports/surfing and bodyboarding"),i.ge(3)),2592e6))),10000776:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/wrestling"),i.ge(3)),2592e6)),10000777:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,"/sports/olympics"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,234),i.ge(3)),2592e6))),10000778:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/martial arts"),i.ge(3)),2592e6)),10000779:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/cricket"),i.ge(3)),2592e6)),10000780:i.q(i.tw(i.cw(0,i.pc_(2,"/sports/soccer"),i.ge(3)),2592e6)),10000781:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/art and entertainment/shows and events"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,210),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,213),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,219),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/home and garden/luxury homes"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/style and fashion/fashion designers"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/style and fashion/luxury goods"),i.ge(3)),2592e6))),10000782:i.q(i.tw(i.cw(0,i.pc_(2,"/style and fashion/beauty/hair care"),i.ge(3)),2592e6)),10000783:i.q(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/style and fashion/accessories"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,237),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/style and fashion/jewelry"),i.ge(3)),2592e6))),10000784:i.q(i.tw(i.cw(0,i.pc_(2,"/style and fashion/clothing"),i.ge(3)),2592e6)),10000785:i.q(i.tw(i.cw(0,i.pc_(2,"/business and industrial/automation/robotics"),i.ge(3)),2592e6)),10000786:i.q(i.tw(i.cw(0,i.pc_(2,"/science/computer science/artificial intelligence"),i.ge(3)),2592e6)),10000787:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,204),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,12),i.ge(3)),2592e6))),10000788:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,205),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,12),i.ge(3)),2592e6))),10000789:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,145),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,12),i.ge(3)),2592e6))),10000790:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,201),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,12),i.ge(3)),2592e6))),10000791:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,202),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,12),i.ge(3)),2592e6))),10000792:i.q(i.ocq(i.tw(i.cw(0,i.pc_(2,203),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,12),i.ge(3)),2592e6))),10000793:i.q(i.tw(i.cw(0,i.pc_(2,"/travel/tourist destinations/seaside resort"),i.ge(3)),2592e6)),10000794:i.q(i.tw(i.cw(0,i.pc_(2,"/travel/tourist destinations/africa"),i.ge(3)),2592e6)),10000795:i.q(i.tw(i.cw(0,i.pc_(2,"/travel/tourist facilities/camping"),i.ge(3)),2592e6)),10000796:i.q(i.tw(i.cw(0,i.pc_(2,"/travel/tourist destinations/south america"),i.ge(3)),2592e6)),10000797:i.q(i.tw(i.cw(0,i.pc_(2,"/travel/transports/road travel/road accident"),i.ge(3)),2592e6)),10000798:i.q(i.tw(i.cw(0,i.pc_(2,"/travel/tourist destinations/japan"),i.ge(3)),2592e6)),10000799:i.q(i.tw(i.cw(0,i.pc_(2,"/travel/tourist destinations/australia and new zealand"),i.ge(3)),2592e6)),10000800:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cw(0,i.pc_(2,"/travel/tourist destinations/eastern europe"),i.ge(3)),2592e6),i.tw(i.cw(0,i.pc_(2,"/travel/tourist destinations/europe"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/travel/tourist destinations/france"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/travel/tourist destinations/greece"),i.ge(3)),2592e6)),i.tw(i.cw(0,i.pc_(2,"/travel/tourist destinations/italy"),i.ge(3)),2592e6))),10000801:i.q(i.tw(i.cw(0,i.pc_(2,"/travel/specialty travel/adventure travel"),i.ge(3)),2592e6)),10000802:i.q(i.tw(i.cw(0,i.pc_(2,"/travel/business travel"),i.ge(3)),2592e6)),10000803:i.q(i.tw(i.cw(0,i.pc_(2,"/travel/traveling with kids"),i.ge(3)),2592e6)),10116:i.q(i.cw(0,i.o([i.os(i.w,0,[250,238,253,261,243,252,517,319,416,191,115,399,374,488,498,478,279,502,503,493,495,431,432,433,405,404,"aire-lliure","aire-libre","actividades-exterior","activitats-exterior",377,385]),i.os(i.s,1,[250,238,253,261,243,252,517,319,416,191,115,399,374,488,498,478,279,502,503,377,385,493,495,431,432,433,405,404,"aire lliure","aire libre","actividades exterior","activitats exterior"]),i.pc_(4,"outdoor activities"),i.pc_(4,115)]),i.ge(1))),10179:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.itp("liveramp_Experian","1004602309",!1,"10179"),i.itp("liveramp_Experian","1004602309",!1,"10179")),i.itp("eyeota","6685",!1,"10179")),i.itp("liveramp_Experian","1004602299",!1,"10179")),i.itp("eyeota","6685",!1,"10179")),i.itp("liveramp_Experian","1004602229",!1,"10179"))),103289:i.q(i.cw(0,i.os(i.s,0,["https://www.timeout.com/uk/travel/why-san-francisco-should-be-at-the-top-of-your-2022-travel-list","https://www.timeout.com/uk/travel/seven-must-do-experiences-in-san-diego","https://www.timeout.com/uk/travel/seven-must-have-experiences-in-los-angeles"]),i.ge(1))),10339:i.q(i.cw(0,i.a([i.pe(18,"UK"),i.y(14,259)]),i.ge(1))),103566:i.q(i.cw(2,i.pe(16,2990142385),i.ge(1))),103641:i.q(i.cw(0,i.os(i.w,0,["https://www.timeout.cat/barcelona/ca/viatge/un-estiu-de-luxe","https://www.timeout.com/es/espana/viaje/verano-de-lujo"]),i.ge(1))),10428:i.q(i.sq(i.cw(0,i.t,i.e(1)))),10463:i.q(i.ocq(i.ocq(i.ocq(i.cw(1,i.os(i.s,7,[178,179,181,422,137,77,142,136,110,113]),i.ge(1)),i.cw(0,i.os(i.s,0,[180,424,137,77,142,136,110,113]),i.ge(1))),i.itp("skimlinks","4823309",!1,"10463")),i.itp("skimlinks","4823544",!1,"10463"))),10622:i.q(i.sq(i.cw(0,i.t,i.n(1)))),107543:i.q(i.cw(0,i.o([i.os(i.s,0,[109,108,95,72,138,121,119,577,103,86,87,100,13,33,88,323,492,69,581,55]),i.os(i.s,1,[109,108,95,72,138,121,119,576,103,86,87,100,"London Culture",13]),i.os(i.w,3,[445,"sex and dating (category)",338,134,168,88,323,492,69,581,55])]),i.ge(1))),10790:i.q(i.ocq(i.ocq(i.itp("comscore","321997US",!1,"10790"),i.itp("eyeota","228",!1,"10790")),i.itp("eyeota","11209",!1,"10790"))),10853:i.q(i.itp("comscore","218997US",!1,"10853")),10854:i.q(i.itp("comscore","118997US",!1,"10854")),10855:i.q(i.ocq(i.itp("comscore","218246US",!1,"10855"),i.itp("comscore","118246US",!1,"10855"))),10856:i.q(i.ocq(i.itp("comscore","225346US",!1,"10856"),i.itp("comscore","125346US",!1,"10856"))),10857:i.q(i.ocq(i.itp("comscore","235546US",!1,"10857"),i.itp("comscore","135546US",!1,"10857"))),10858:i.q(i.ocq(i.itp("comscore","245997US",!1,"10858"),i.itp("comscore","145997US",!1,"10858"))),10859:i.q(i.ocq(i.itp("comscore","255997US",!1,"10859"),i.itp("comscore","155997US",!1,"10859"))),10860:i.q(i.itp("eyeota","326",!1,"10860")),10861:i.q(i.itp("eyeota","327",!1,"10861")),10862:i.q(i.ocq(i.itp("eyeota","13003",!1,"10862"),i.itp("eyeota","246",!1,"10862"))),10863:i.q(i.ocq(i.itp("eyeota","13000",!1,"10863"),i.itp("eyeota","248",!1,"10863"))),10864:i.q(i.ocq(i.itp("eyeota","13004",!1,"10864"),i.itp("eyeota","245",!1,"10864"))),10865:i.q(i.itp("eyeota","241",!1,"10865")),10866:i.q(i.itp("eyeota","238",!1,"10866")),10867:i.q(i.itp("eyeota","239",!1,"10867")),10868:i.q(i.itp("eyeota","240",!1,"10868")),10869:i.q(i.itp("eyeota","236",!1,"10869")),10870:i.q(i.itp("eyeota","237",!1,"10870")),11122:i.q(i.cw(0,i.o([i.os(i.s,1,[143,144,307,318,361,"jack daniel","jim beam",430,469,468,456,"markers-mark",313,403,412,454,455,126]),i.os(i.s,0,[143,144,307,318,361,"jack-daniel","jim-beam",430,469,468,456,"makers-mark",313,403,412,454,455,126])]),i.ge(1))),12381:i.q(i.itp("comscore","118997US",!1,"12381")),12475:i.q(i.ocq(i.tw(i.cw(0,i.os(i.s,1,[13,"Primavera Sound","snar","crulla"]),i.ge(1)),2592e6),i.tw(i.cw(0,i.pc_(4,93),i.ge(1)),2592e6))),12668:i.q(i.tw(i.cw(0,i.o([i.os(i.s,0,[367,518,519,599,490,190,523,516,542,541,"vintageclothes","vintage-clothes",520,515,291,559,"corporate-responsib",334,605,371]),i.os(i.s,1,[367,518,519,599,490,190,523,516,542,541,"vintage clothes",520,515,291,559,"corporate responsib",334,605,371])]),i.ge(1)),2592e6)),13108:i.q(i.ocq(i.ocq(i.ocq(i.cw(0,i.ps(1,"first-time buyer"),i.ge(1)),i.cw(0,i.ps(1,"shared ownership"),i.ge(1))),i.cw(0,i.ps(1,"Help to Buy"),i.ge(1))),i.itp("eyeota","6692",!1,"13108"))),13183:i.q(i.cw(0,i.o([i.ps(0,"classical-music"),i.pe(9,"classical-and-opera")]),i.ge(1))),13444:i.q(i.tw(i.cw(3,i.t,i.ge(1)),2592e6)),13445:i.q(i.tw(i.cw(0,i.t,i.ge(5)),2592e6)),13446:i.q(i.sq(i.cw(0,i.t,i.ge(3)))),13520:i.q(i.tw(i.cw(0,i.os(i.s,0,[5,"wellbeing","well-being",604,"salud","salut","bienestar","benestar"]),i.ge(1)),2592e6)),13769:i.q(i.ocq(i.ocq(i.itp("eyeota","12220",!1,"13769"),i.itp("eyeota","6700",!1,"13769")),i.itp("eyeota","6699",!1,"13769"))),13825:i.q(i.ocq(i.itp("eyeota","225",!1,"13825"),i.itp("eyeota","6672",!1,"13825"))),13826:i.q(i.ocq(i.itp("eyeota","229",!1,"13826"),i.itp("eyeota","6675",!1,"13826"))),13827:i.q(i.ocq(i.itp("eyeota","230",!1,"13827"),i.itp("eyeota","6676",!1,"13827"))),13828:i.q(i.ocq(i.itp("eyeota","232",!1,"13828"),i.itp("eyeota","6677",!1,"13828"))),13829:i.q(i.ocq(i.itp("eyeota","234",!1,"13829"),i.itp("eyeota","6678",!1,"13829"))),13830:i.q(i.ocq(i.itp("eyeota","235",!1,"13830"),i.itp("eyeota","6679",!1,"13830"))),13831:i.q(i.ocq(i.itp("eyeota","243",!1,"13831"),i.itp("eyeota","6681",!1,"13831"))),13832:i.q(i.ocq(i.itp("eyeota","242",!1,"13832"),i.itp("eyeota","6680",!1,"13832"))),13855:i.q(i.tw(i.cw(0,i.t,i.ge(3)),2592e6)),13856:i.q(i.tw(i.cw(0,i.t,i.ge(8)),2592e6)),13857:i.q(i.tw(i.cw(0,i.t,i.ge(10)),2592e6)),14282:i.q(i.ocq(i.ocq(i.itp("eyeota","35391",!1,"14282"),i.itp("eyeota","35388",!1,"14282")),i.itp("eyeota","35390",!1,"14282"))),14371:i.q(i.ocq(i.itp("eyeota","6673",!1,"14371"),i.itp("comscore","318997US",!1,"14371"))),14577:i.q(i.cw(0,i.o([i.os(i.s,1,[386,387,18]),i.os(i.w,9,["food & drink events",18]),i.os(i.s,1,["cookery class",18])]),i.ge(1))),14748:i.q(i.itp("eyeota","6680",!1,"14748")),14808:i.q(i.ocq(i.tw(i.cw(0,i.o([i.pc_(4,554),i.os(i.s,0,[54,36,38,34,59,44,52,51,53,27,26,46,41,31,25,29,56,61,123,102,73,124,106,75,76,131,116,117,306,23,530]),i.os(i.s,1,[54,36,5,38,34,59,44,52,51,53,27,26,46,41,31,25,29,56,61,123,102,73,124,106,75,76,131,116,117,302,23,530])]),i.ge(1)),2592e6),i.cw(0,i.o([i.os(i.s,0,[89,80]),i.os(i.s,1,[89,80])]),i.ge(1)))),14812:i.q(i.tw(i.cw(0,i.o([i.pc_(4,5),i.os(i.s,0,[5,14,15,129,70,84,97,96,83,354,125,120,122,82,74,105,99,132,"sano","comida-sana","dieta","sin-gluten","menjar-sa","sin-lactosa",512,609,270,272,317,465,466,"alochol-free",271,486,453,452]),i.os(i.s,1,[5,14,15,129,70,84,97,96,83,82,354,125,120,122,74,105,99,132,"sin gluten","sense gluten","sin lactosa","sense lactosa",609,"suc",270,272,512,"calories",317,"menjar sa","comer sano","comida sana",465,466,"alcohol-free",271,486,453,452])]),i.ge(1)),2592e6)),14816:i.q(i.acq(i.tw(i.cw(0,i.o([i.pc_(4,554),i.os(i.s,0,[54,36,38,34,59,44,52,51,53,27,26,46,41,31,25,29,56,61,123,102,73,124,106,75,76,131,116,117,306,23,89,80]),i.os(i.s,1,[54,36,5,38,34,59,44,52,51,53,27,26,46,41,31,25,29,56,61,123,102,73,124,106,75,76,131,116,117,302,23,89,80])]),i.ge(1)),2592e6),i.tw(i.cw(0,i.o([i.pc_(4,5),i.os(i.s,0,[5,14,15,129,70,84,97,96,83,82,125,120,122,74,105,99,132]),i.os(i.s,1,[5,14,15,129,70,84,97,96,83,82,125,120,122,74,105,99,132])]),i.ge(1)),2592e6))),14823:i.q(i.tw(i.cw(0,i.o([i.os(i.s,0,[552,143,435,"jim-bean",429,126,309,"gin-","-gin",598,"rum-","-rum",264,538,565,532,448,449,450,144,165,447,402,529,527,339,263,154]),i.os(i.s,1,[552,143,435,429,126,309,598,"jim bean","rum",264,538,565,532,448,449,450,144,165,529,527,447,339,402,263,154])]),i.ge(1)),2592e6)),14830:i.q(i.tw(i.cw(0,i.o([i.os(i.s,0,[375,467,196,336,284,324,247,"/h-m",531,287,408,511,355,391,"forever-21",326,"century-21",597,522,265,580,558,308,543,507,414,548,575,305,"popup",600,434,483,266]),i.os(i.s,1,[375,467,196,336,284,324,247,531,287,408,511,355,391,326,"forever 21","century 21",597,522,265,580,558,308,543,414,507,548,575,305,600,434,483,266]),i.pc_(4,127),i.pc_(4,128),i.pc_(4,545),i.ps(3,128),i.os(i.s,9,["style & shopping (blog posts)","vintage shops"])]),i.ge(1)),2592e6)),14831:i.q(i.tw(i.cw(0,i.o([i.pc_(4,20),i.ps(3,139),i.os(i.s,0,[20,384,37,140,262,267,603,602,"long-weekend","longweekend"]),i.os(i.s,1,[20,384,37,140,262,267,"weekend break","long weekend"])]),i.ge(1)),2592e6)),14848:i.q(i.tw(i.cw(0,i.o([i.y(3,94),i.os(i.s,0,[6,0,10,24,57,47,48,2,40,39,273,68,32,356,43,187,45,85,60,50,547]),i.os(i.s,1,[6,0,10,24,57,47,48,2,40,39,67,32,85,43,186,45,60,50,194])]),i.ge(1)),2592e6)),14851:i.q(i.tw(i.cw(0,i.o([i.pc_(4,473),i.os(i.s,3,[11,288]),i.os(i.s,1,[11,3,4]),i.os(i.s,0,[11,3,4])]),i.ge(1)),2592e6)),14858:i.q(i.cw(0,i.o([i.os(i.s,0,[381,487,350,"checkout",161,315,135,496]),i.os(i.s,1,[381,487,350,161,315,135,496])]),i.ge(1))),14919:i.q(i.ocq(i.tw(i.cw(0,i.o([i.os(i.s,0,[160,"craft-beer",346,415,311,"bud-light",557,344,312,"paleale","pale-ale",441,"guinness",278,310,329,328]),i.os(i.s,1,[160,346,415,311,"bud light",557,344,312,"pale ale",441,"guiness",278,310,329,328,"estrella","cruzcampo","mahou","san miguel"]),i.pe(9,"breweries")]),i.ge(1)),2592e6),i.cw(0,i.os(i.s,0,["www.timeout.com/sydney/things-to-do/world-square-presents-the-time-out-hop-up","www.timeout.com/melbourne/bars/world-square-presents-the-time-out-hop-up","www.timeout.com/sydney/bars/little-creatures-live-at-the-time-out-hop-up"]),i.ge(1)))),14921:i.q(i.tw(i.cw(0,i.o([i.os(i.s,0,[6,0,10,24,57,47,48,2,40,39,273,68,32,356,43,187,45,85,60,50,547,7,58,1,42,296,30,135,348]),i.os(i.s,1,[6,0,10,24,57,47,48,2,40,39,67,32,"direct now",43,186,45,85,60,50,194,7,58,1,42,296,30,135,348]),i.os(i.s,3,[94,292,164,342,168,185,133,134])]),i.ge(1)),2592e6)),14923:i.q(i.tw(i.cw(0,i.o([i.y(3,342),i.os(i.s,0,[16,341,395,417,425,426,438,442,428,427,556,555,534]),i.os(i.s,1,[16,341,395,417,425,426,438,442,428,427,556,"stand up",555,534])]),i.ge(1)),2592e6)),16243:i.q(i.cw(0,i.o([i.y(3,168),i.ps(1,1),i.ps(0,1)]),i.ge(1))),18570:i.q(i.ocq(i.cw(0,i.ps(0,2),i.ge(1)),i.cw(0,i.ps(1,2),i.ge(1)))),21542:i.q(i.ocq(i.cw(0,i.os(i.s,1,["black-friday","black friday","Black Friday"]),i.ge(1)),i.tw(i.cw(0,i.y(3,128),i.ge(1)),2592e6))),21794:i.q(i.cw(0,i.os(i.s,0,["https://www.timeout.com/manchester","https://www.timeout.com/london","https://www.timeout.com/bristol","https://www.timeout.com/birmingham","https://www.timeout.com/glasgow","https://www.timeout.com/edinburgh","https://www.timeout.com/leeds"]),i.ge(1))),23694:i.q(i.ocq(i.cw(0,i.os(i.s,1,[6,0,10,24,57,47,48,2,40,39,67,32,"directtv",43,186,45,60,50,194,172,192,55,"gamer","esport","video game","arcade","takeaways","chippies",561,"deliveroo",112,183]),i.ge(1)),i.cw(0,i.os(i.w,0,["https://www.timeout.com/about/latest-news/time-out-and-deliveroo-bring-food-battles-to-london-101018","https://www.timeout.com/london/things-to-do/time-out-deliveroo-fried-chicken-fight-club","https://www.timeout.com/london/things-to-do/londons-food-vendor-champs-have-been-crowned-in-the-time-out-x-deliveroo-food-battles","https://www.timeout.com/london/things-to-do/deliveroo-x-time-out-food-battle-recap-battle-of-the-burger","https://www.timeout.com/london/things-to-do/deliveroo-time-out-battle-of-the-broth","https://www.timeout.com/london/things-to-do/find-out-whos-been-crowned-londons-master-of-fried-chicken"]),i.ge(1)))),27457:i.q(i.ocq(i.cw(1,i.os(i.s,7,[178,179,181,422,137,77,110,113,142,136,"livenation.co.uk"]),i.ge(1)),i.cw(0,i.os(i.s,0,[180,424,137,77,110,113,142,136]),i.ge(1)))),28391:i.q(i.ocq(i.ocq(i.ocq(i.cw(0,i.a([i.y(8,63),i.z(10,63)]),i.ge(1)),i.cw(0,i.a([i.y(8,249),i.z(10,249)]),i.ge(1))),i.cw(0,i.a([i.y(8,245),i.z(10,245)]),i.ge(1))),i.cw(0,i.os(i.s,1,["road-trip","road trip","day trips",173,"day-trips"]),i.ge(1)))),28538:i.q(i.cw(0,i.pge(12,1),i.ge(1))),28540:i.q(i.cw(0,i.pge(["basket","quantity"],1),i.ge(1))),29195:i.q(i.tw(i.cw(0,i.os(i.s,1,["St Patrick\'s","St Patrick","St.Patrick\'s","St.Patrick","St Paddy\'s","St Paddy","St.Paddy","Irish","Guinness","Dublin","Ireland"]),i.ge(1)),24192e5)),29219:i.q(i.tw(i.cw(1,i.os(i.s,7,["facebook.com/sharer","twitter.com/intent"]),i.ge(1)),2592e6)),29567:i.q(i.acq(i.cw(0,i.pge(12,1),i.ge(1)),i.cw(0,i.y(6,22),i.ge(1)))),29568:i.q(i.acq(i.cw(0,i.pge(12,1),i.ge(1)),i.cw(0,i.y(6,21),i.ge(1)))),29569:i.q(i.acq(i.cw(0,i.pge(12,1),i.ge(1)),i.cw(0,i.y(6,62),i.ge(1)))),29571:i.q(i.acq(i.cw(0,i.pge(12,1),i.ge(1)),i.cw(0,i.y(6,8),i.ge(1)))),29572:i.q(i.acq(i.cw(0,i.pge(12,1),i.ge(1)),i.cw(0,i.y(6,151),i.ge(1)))),29573:i.q(i.acq(i.cw(0,i.pge(12,1),i.ge(1)),i.cw(0,i.y(6,153),i.ge(1)))),29574:i.q(i.acq(i.cw(0,i.pge(12,1),i.ge(1)),i.cw(0,i.y(6,64),i.ge(1)))),29575:i.q(i.acq(i.cw(0,i.pge(12,1),i.ge(1)),i.cw(0,i.y(6,65),i.ge(1)))),29576:i.q(i.acq(i.cw(0,i.pge(12,1),i.ge(1)),i.cw(0,i.pe(6,"Yoga"),i.ge(1)))),29581:i.q(i.cw(0,i.pge(["transaction","revenue"],50),i.ge(1))),29582:i.q(i.cw(0,i.pg(12,1),i.ge(1))),29585:i.q(i.cw(1,i.os(i.s,7,["ticketmaster","axs","roundhouse","earthackney","festicket","livenation","barbican"]),i.ge(1))),29590:i.q(i.ocq(i.cw(0,i.os(i.w,5,[22,"Brunch",254]),i.ge(1)),i.cw(0,i.y(6,22),i.ge(1)))),29591:i.q(i.ocq(i.cw(0,i.os(i.w,5,[244,21]),i.ge(1)),i.cw(0,i.y(6,21),i.ge(1)))),29592:i.q(i.ocq(i.cw(0,i.os(i.w,5,["Art",62]),i.ge(1)),i.cw(0,i.y(6,62),i.ge(1)))),29593:i.q(i.ocq(i.cw(0,i.os(i.w,5,["Basketball",8,"Performance","Sports","Talk","Tour","Tour + Tasting"]),i.ge(1)),i.cw(0,i.y(6,8),i.ge(1)))),29594:i.q(i.ocq(i.cw(0,i.os(i.w,5,["Expo",246]),i.ge(1)),i.cw(0,i.y(6,246),i.ge(1)))),29595:i.q(i.ocq(i.cw(0,i.os(i.w,5,["Classical Music",151]),i.ge(1)),i.cw(0,i.y(6,151),i.ge(1)))),29596:i.q(i.ocq(i.cw(0,i.y(5,153),i.ge(1)),i.cw(0,i.y(6,153),i.ge(1)))),29598:i.q(i.ocq(i.cw(0,i.os(i.w,5,["Standup Comedy","West End",64]),i.ge(1)),i.cw(0,i.y(6,64),i.ge(1)))),29599:i.q(i.ocq(i.cw(0,i.y(5,65),i.ge(1)),i.cw(0,i.y(6,65),i.ge(1)))),32319:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.cw(0,i.pc_(4,"sport and fitness (category)"),i.ge(1)),i.cw(0,i.os(i.s,0,[54,36,38,34,59,44,52,51,53,27,26,46,41,31,25,29,56,"pool","run",23]),i.ge(1))),i.cw(0,i.os(i.s,5,[8,"Health and Wellbeing"]),i.ge(1))),i.cw(0,i.y(6,8),i.ge(1))),i.cw(0,i.os(i.s,0,["timeout.com/london/sport-and-fitness/the-best-yoga-studios-streaming-online-classes-right-now","timeout.com/london/my-non-dairy-diary-fitness-hacks","timeout.com/newyork/news/work-out-to-these-fitness-classes-you-can-stream-from-home-031620","timeout.com/sydney/sport-and-fitness/the-best-online-workouts-you-can-do-at-home"]),i.ge(1)))),32321:i.q(i.ocq(i.ocq(i.ocq(i.cw(0,i.y(3,440),i.ge(1)),i.cw(0,i.os(i.s,0,[107,"kid",78,163,156,112,167,"son","daughter",188,182,92,35,169,197,155,71,189,184,170]),i.ge(1))),i.cw(0,i.y(8,152),i.ge(1))),i.cw(0,i.os(i.s,0,["timeout.com/london/film/the-best-movies-on-disney","timeout.com/london/news/disney-uk-release-date-how-to-watch-and-how-much-does-it-cost-032520","timeout.com/london/news/david-walliams-is-releasing-a-free-kids-audiobook-every-day-for-30-days-032420","timeout.com/london/news/disney-is-offering-10-off-when-you-pre-order-by-march-23","timeout.com/london/news/the-national-trust-is-opening-its-parks-and-gardens-for-free-031820","timeout.com/melbourne/news/disney-is-streaming-frozen-2-now-three-months-ahead-of-schedule-031720","timeout.com/melbourne/kids/the-best-kids-shows-to-stream-online-right-now","timeout.com/sydney/things-to-do/quokka-cuddles-livestream","timeout.com/sydney/film/the-best-kids-shows-to-stream-online-right-now","timeout.com/sydney/news/the-rspca-is-asking-self-isolating-aussies-to-foster-a-rescue-animal-031920","timeout.com/sydney/news/disney-is-streaming-frozen-2-now-three-months-ahead-of-schedule-031720","timeout.com/sydney/news/you-can-now-get-the-best-bit-of-the-easter-show-delivered-straight-to-your-door-032420"]),i.ge(1)))),32324:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.cw(0,i.y(3,193),i.ge(2)),i.cw(0,i.os(i.s,0,["cooking",18,"food-market",387,"cookery","cookery-class","recipe","recipes",386,"food-festival",561,"take-out","take out",19,"cookbook"]),i.ge(1))),i.cw(0,i.os(i.w,5,[244,22,254]),i.ge(1))),i.cw(0,i.y(15,22),i.ge(1))),i.cw(0,i.os(i.s,0,["timeout.com/melbourne/restaurants/restaurants-and-bars-now-doing-takeaway-in-melbourne","timeout.com/melbourne/news/ides-have-released-a-zine-and-every-single-dollar-goes-directly-to-staff-032520","timeout.com/melbourne/news/you-can-now-get-thats-amore-cheeses-delivered-right-to-your-door-032520","timeout.com/melbourne/news/melbournes-gnoccheria-is-now-offering-home-delivery-032520","timeout.com/melbourne/news/moon-dog-has-launched-contactless-beer-drive-throughs-and-home-delivery-032520","timeout.com/melbourne/news/aangan-is-giving-away-free-meals-to-seniors-031820","timeout.com/melbourne/news/burn-city-smokers-is-delivering-barbecue-to-your-door-031820","timeout.com/melbourne/news/how-to-support-your-local-restaurant-during-the-outbreak-of-covid-19","timeout.com/melbourne/restaurants/late-night-food-delivery-in-melbourne","timeout.com/sydney/news/heres-how-sydneys-hospitality-businesses-are-adapting-to-the-covid-19-pandemic-032020","timeout.com/sydney/news/chin-chin-is-offering-takeaway-for-the-first-time-ever-032520","timeout.com/sydney/news/support-your-favourite-restaurant-in-these-trying-times-by-buying-a-voucher-031720","timeout.com/sydney/news/lucios-whole-menu-is-available-for-take-away-at-a-huge-discount-031820","timeout.com/sydney/shopping/the-best-sydney-bottle-shops-offering-home-delivery",".timeout.com/sydney/news/our-restaurant-of-the-year-is-offering-sri-lankan-lamprai-to-take-away-031820","timeout.com/sydney/news/saint-peter-is-now-offering-takeaway-dinners-031720","timeout.com/sydney/news/food-delivery-services-are-offering-no-contact-delivery-now-032020","timeout.com/sydney/film/the-9-best-food-movies-you-should-be-streaming-right-now","timeout.com/sydney/restaurants/the-best-healthy-deliveries-in-sydney","timeout.com/sydney/restaurants/the-best-things-to-order-from-uber-eats-in-sydney","timeout.com/london/restaurants/the-latest-top-london-restaurants-doing-home-delivery","timeout.com/london/restaurants/the-best-takeaways-for-delivery-in-london","timeout.com/london/shopping/the-best-ways-to-get-your-groceries-delivered-in-london","timeout.com/london/restaurants/best-indian-takeaways-london","timeout.com/london/shopping/best-alcohol-delivery-services-in-london","timeout.com/london/restaurants/the-best-recipe-boxes-in-london-tried-and-tested","timeout.com/newyork/news/worlds-best-bar-dante-launches-delivery-and-takeout-during-coronavirus-shutdown-031720","timeout.com/newyork/news/this-new-york-bakery-is-offering-take-home-cookie-dough-032020","timeout.com/newyork/news/nycs-best-breweries-are-now-delivering-beers-to-your-door-032020","timeout.com/newyork/news/raos-nycs-most-exclusive-restaurant-is-doing-take-out-for-the-first-time-ever-032320","timeout.com/newyork/news/how-to-help-new-york-restaurants-and-bars-now-031920","timeout.com/newyork/news/restaurant-gift-cards-and-merch-to-buy-during-coronavirus-shutdown-031620"]),i.ge(1)))),32333:i.q(i.ocq(i.ocq(i.cw(0,i.os(i.w,15,[21,8]),i.ge(1)),i.cw(0,i.os(i.w,5,[21,62,65,8]),i.ge(1))),i.cw(0,i.os(i.s,0,[9,4,"crafts","pottery","paint","painting",290,3,"paintings","artists","exhibitions"]),i.ge(1)))),32334:i.q(i.ocq(i.cw(0,i.os(i.w,3,[164,94]),i.ge(1)),i.cw(0,i.os(i.s,0,[0,"movies",2,68,55,"amazon","disney","films",6,187]),i.ge(1)))),32336:i.q(i.ocq(i.cw(0,i.os(i.w,3,[185,114,"classical & opera","pop, rock & hip-hop","french music",1]),i.ge(1)),i.cw(0,i.os(i.s,0,[42,"playlist","podcast","podcasts",30,"concerts","stream","live-stream",55,"song","albumn","album","albums",290,"DJ","DJs",174,"gigs"]),i.ge(1)))),32337:i.q(i.ocq(i.cw(0,i.os(i.w,3,[158,"clubbing",338,114]),i.ge(1)),i.cw(0,i.os(i.s,0,["cocktails",165,"bar","pub",363,154,"wine",160,"bars","pint","glass","pints"]),i.ge(1)))),32338:i.q(i.ocq(i.cw(0,i.os(i.s,0,["walk","walking",537,"national trust","national-trust",190,115,191]),i.ge(1)),i.cw(0,i.ps(0,"timeout.com/london/things-to-do/9-places-to-see-cherry-blossom-in-london"),i.ge(1)))),32339:i.q(i.ocq(i.cw(0,i.os(i.w,3,[421,139]),i.ge(1)),i.cw(0,i.os(i.s,0,["beaches",159,37,173,602,603,"roadtrip","break","breaks","weekends","visit",537]),i.ge(1)))),32340:i.q(i.cw(0,i.os(i.s,0,["library",161,28,"e-book","bookstores","libraries","read","reading","librarians"]),i.ge(1))),32341:i.q(i.ocq(i.ocq(i.ocq(i.cw(0,i.os(i.w,3,[133,"theatre comedy",568]),i.ge(1)),i.cw(0,i.os(i.s,1,[7,58,504,"plays","actor","shakespeare","broadway","west end","west-end",474,"musicals"]),i.ge(1))),i.cw(0,i.y(15,8),i.ge(1))),i.cw(0,i.y(5,64),i.ge(1)))),32344:i.q(i.ocq(i.cw(0,i.os(i.w,3,[292,134,473]),i.ge(1)),i.cw(0,i.os(i.s,1,["tour","virtual","virtual tour","attractions",11,4,3,"tours"]),i.ge(1)))),32347:i.q(i.cw(0,i.o([i.os(i.s,1,[283,398,"game",172,564,285,192,484,141,"videos",573,"tik tok",514,"puzzles","jigsaw","board","board games","board-games",343,560,397]),i.os(i.s,0,[283,398,172,564,285,192,504,484,141,573,514,"board-gam",343,560,397])]),i.ge(1))),32348:i.q(i.cw(0,i.os(i.s,1,["work","home","work from home","wework","we work","office","office space"]),i.ge(1))),32627:i.q(i.ocq(i.cw(0,i.os(i.s,1,[299,"skincare",546,"make-up",550,604,"meditation","hair","haircare","hairdressers","barbers","barber",477,457,497,"massage",372,"facials",578,579,551]),i.ge(1)),i.cw(0,i.os(i.s,11,[546,299,"nails",477,550,578,457,497,372,551,579]),i.ge(1)))),62592:i.q(i.ocq(i.cw(0,i.os(i.s,1,[601,510,459,241,436,437,584,585,303,304,359,358,320,257,574]),i.ge(1)),i.cw(0,i.os(i.s,0,[601,510,459,241,436,437,584,585,303,304,359,358,320,257,574]),i.ge(1)))),71852:i.q(i.ocq(i.ocq(i.cw(0,i.os(i.s,0,[171,549,379,378,607,390,389,499,"football-clubs",388,198,195,369,423,370]),i.ge(1)),i.cw(0,i.os(i.s,1,[171,549,607,"women in football",499,389,390,388,"football-club",378,379,"world cup","world-cup",198,195,366,"play-as-you-go",369,423,370,239,260,258,256]),i.ge(1))),i.cw(0,i.os(i.s,13,[198,171,195,"stadium tour",366,"white hart lane",239,260,258,256]),i.ge(1)))),73622:i.q(i.ocq(i.cw(0,i.y(3,193),i.ge(1)),i.cw(0,i.os(i.s,1,["chinese food delivery","chinese food","chinese","chinese delivery","delivery me food","food near me","delivery near me","pizza delivery","pizza","delivery restaurants",19,"chinese near me","food for delivery","restaurant delivery","pizza hut delivery","pizza hut","delivery service","food delivery service","dominos delivery","dominos","thai food delivery","thai food","best food delivery","delivery food places","pizza near me","kebab","indian delivery","indian food","kebab delivery",18,363]),i.ge(1)))),74544:i.q(i.ocq(i.ocq(i.cw(3,i.pe(16,2449191106),i.ge(1)),i.cw(0,i.os(i.s,1,["Natural History Museum | Museums in South Kensington, London","Natural History Museum | Museums in USC/Exposition Park, Los Angeles",419,"Military History Tour of New York Harbor | Classic Harbor Line | Things to do in New York","Museum of Natural History\'s new gem hall finally has an official opening date","National Museum of Funeral History | Museums in Greater Houston, Houston","American Museum of Natural History | Museums in Upper West Side, New York","Most Famous Paintings in Art History Of All Time Ranked","100 best movie sex scenes in the history of film","Best Free Museums in NYC for Art, History and More","13 Best Boston Museums to Explore History, Science and Art","Butterfly Pavilion at the Natural History Museum | Natural History Museum | Things to do in Los Angeles","10 Best Parks in Amsterdam Are Steeped in History","10 Best Museums in Prague: Kafka, Art, Czech History and More","Best walking tours NYC has to offer from art to history","10 Best Museums in San Antonio for Art, Culture and History","The Viktor Wynd Museum of Curiosities, Fine Art & Natural History | Museums in Hackney, London","The Met is opening the largest Michelangelo exhibition in its history","Introducing Fantastic Beasts: The Wonder of Nature | Natural History Museum | Museums in London","Azul Histrico",418,"past"]),i.ge(1))),i.cw(0,i.os(i.s,0,["https://www.timeout.com/london/museums/natural-history-museum",419,"https://www.timeout.com/los-angeles/art/a-brief-history-of-the-vagina-in-art-slide-show","https://www.timeout.com/los-angeles/museums/natural-history-museum","https://www.timeout.com/london/things-to-do/an-oral-history-of-rowans-tenpin-bowl","https://www.timeout.com/london/things-to-do/an-oral-history-of-rowans-tenpin-bowl?itm_source=parsely-api","https://www.timeout.com/newyork/things-to-do/military-history-tour-of-new-york-harbor","https://www.timeout.com/newyork/art/top-famous-paintings-in-art-history-ranked","https://www.timeout.com/houston/museums/national-museum-of-funeral-history","https://www.timeout.com/newyork/museums/american-museum-of-natural-history","https://www.timeout.com/newyork/art/top-impressionist-painters-in-art-history","https://www.timeout.com/los-angeles/things-to-do/free-museums-in-la-best-art-history-and-more-for-free","https://www.timeout.com/los-angeles/things-to-do/butterfly-pavilion-at-the-natural-history-museum","https://www.timeout.com/london/museums/the-viktor-wynd-museum-of-curiosities-fine-art-natural-history","https://www.timeout.com/newyork/blog/the-met-is-opening-the-largest-michelangelo-exhibition-in-its-history-050917",418]),i.ge(1)))),75203:i.q(i.ocq(i.cw(0,i.o([i.os(i.s,0,[383,111,17,90,"https://www.timeout.com/usa/things-to-do/best-couples-vacations-in-america","couples","https://www.timeout.com/newyork/things-to-do/best-couples-cooking-classes-in-nyc","https://www.timeout.com/newyork/news/showtime-series-couples-therapy-is-looking-for-nyc-couples-051221","relationship","boyfriend","girlfriend","wife","husband"]),i.os(i.s,1,[382,111,90,17]),i.pc_(4,443),i.pc_(4,17),i.pc_(4,444)]),i.ge(1)),i.cw(0,i.pg(17,50),i.ge(1)))),7809:i.q(i.cw(0,i.t,i.ge(1))),7827:i.q(i.ocq(i.cw(0,i.o([i.os(i.s,0,[20,"airport-transport","travel-information",583,176,140,37,177,159,593,596,"vacaiones",582,594,595,368,269,268,352,353,"desti"]),i.os(i.s,1,[20,"airport transport","travel information",583,176,140,37,177,159,593,596,"vacaciones",582,594,595,368,269,268,352,353,"dest","destins"]),i.pc_(4,139),i.os(i.w,3,[139,421]),i.pc_(4,177),i.pc_(4,173),i.pc_(4,20),i.pc_(4,176)]),i.ge(1)),i.itp("skimlinks","7310447",!1,"7827"))),7834:i.q(i.ocq(i.ocq(i.cw(0,i.o([i.os(i.s,0,[68,281,282,10,16,360,362,0,101,6,2,"online-video",528,536,"sci-fi",572,141,540,280,335,539]),i.os(i.s,1,[67,281,282,10,16,360,362,0,101,6,2,"online video",528,536,"sci fi",572,141,540,280,335,539]),i.y(3,94),i.y(3,164),i.pc_(4,"film genres"),i.pc_(4,0),i.pc_(4,10),i.pc_(4,6)]),i.ge(1)),i.itp("skimlinks","4823307",!1,"7834")),i.itp("skimlinks","4823539",!1,"7834"))),7835:i.q(i.cw(0,i.o([i.os(i.s,0,[0,11,28,81,"adult-entertainment",66,49,33,4,9,69,104,3,13,118,1,88,91,294,79,16,98,"harry-potter",524,571,19,482,470,471,451,446,347,396,289,349,392,"comedia",521]),i.os(i.s,1,[0,11,28,81,"adult entertainment",66,49,33,4,9,69,104,3,13,118,1,88,91,293,79,16,98,"harry potter",524,570,19,482,470,471,451,446,347,396,289,349,392,521])]),i.ge(1))),7838:i.q(i.ocq(i.ocq(i.cw(0,i.o([i.os(i.s,0,[156,163,78,167,92,107,183,112,189,35,184,170,71,155,197,481,485,300,373,35,169,188,182,494,458]),i.os(i.s,1,[156,163,78,167,92,107,183,112,189,35,184,170,71,155,197,481,485,300,373,"famlies",169,188,182,494,458])]),i.ge(1)),i.cw(0,i.o([i.y(3,440),i.pc_(4,"kids activities and themes"),i.pc_(4,"101kids"),i.pc_(4,92),i.pc_(4,78),i.pc_(4,"family-friendly"),i.pc_(4,"babysitting"),i.pc_(4,"parents"),i.pc_(4,71),i.pc_(4,"toddlers"),i.pc_(4,35),i.pc_(4,107)]),i.ge(1))),i.cw(0,i.y(8,152),i.ge(1)))),7843:i.q(i.tw(i.cw(0,i.o([i.os(i.s,0,[30,174,42,365,13,316,474,357,337]),i.os(i.s,1,[30,174,42,365,"sonar",337,13,316,357]),i.y(3,185),i.pc_(4,"music genres")]),i.ge(1)),2592e6)),7844:i.q(i.cw(0,i.o([i.ps(0,19),i.ps(1,19),i.y(3,193),i.pc_(4,"restaurant & bar facilities"),i.pc_(4,"restaurants & cafes (venues)"),i.pc_(4,"restaurants"),i.pc_(4,"food & drink (subject)"),i.ps(3,18)]),i.ge(1))),7878:i.q(i.cw(0,i.o([i.os(i.s,0,[571,569,"que-fer","que-hacer"]),i.os(i.s,1,[570,569,"qu fer","qu hacer"]),i.y(3,134)]),i.ge(1))),7880:i.q(i.ocq(i.cw(0,i.o([i.os(i.s,0,[383,111,17,90]),i.os(i.s,1,[382,111,90,17]),i.pc_(4,443),i.pc_(4,17),i.pc_(4,444)]),i.ge(1)),i.cw(0,i.pg(17,50),i.ge(1)))),7881:i.q(i.ocq(i.ocq(i.ocq(i.cw(0,i.o([i.os(i.s,0,[58,7,563,562]),i.os(i.s,1,[7,58,180,562,563])]),i.ge(1)),i.cw(0,i.o([i.y(3,133),i.pc_(4,133),i.pc_(4,568)]),i.ge(1))),i.cw(1,i.os(i.s,7,[178,179,181]),i.ge(1))),i.cw(0,i.os(i.s,0,["www.timeout.com/newyork/theater/the-phantom-of-the-opera-19","www.timeout.com/newyork/theater/five-reasons-to-see-david-byrnes-american-utopia","www.timeout.com/newyork/things-to-do/ways-and-places-to-cool-down-in-manhattan","www.timeout.com/newyork/theater/three-unique-country-western-experiences-in-manhattan","www.timeout.com/newyork/theater/five-reasons-you-should-see-the-ferryman","www.timeout.com/newyork/things-to-do/looking-for-fashion-inspo-check-out-brooklyn-museums-latest-exhibition","www.timeout.com/london/theatre/five-reasons-why-you-should-book-tickets-to-the-invitation","www.timeout.com/london/theatre/the-national-theatres-much-loved-production-of-peter-pan-is-back-this-summer","www.timeout.com/london/theatre/five-reasons-to-see-the-night-of-the-iguana","www.timeout.com/london/theatre/five-reasons-why-you-need-to-see-rosmersholm"]),i.ge(1)))),7925:i.q(i.cw(0,i.o([i.os(i.s,0,[544,127]),i.os(i.s,1,[544,127]),i.pc_(4,545),i.pc_(4,127),i.y(3,128),i.pc_(4,196)]),i.ge(1))),7981:i.q(i.cw(0,i.o([i.os(i.s,0,[109,108,95,72,138,121,119,577,103,86,87,100]),i.os(i.s,1,[109,108,95,72,138,121,119,576,103,86,87,100]),i.y(3,445)]),i.ge(1))),8015:i.q(i.cw(0,i.o([i.os(i.s,0,[11,28,81,66,49,33,4,9,104,3,118,1,91,294,79,98,7]),i.os(i.s,1,[11,28,81,66,49,33,4,9,104,3,118,1,91,293,79,98,7]),i.pc_(4,472),i.pc_(4,9),i.pc_(4,7),i.os(i.s,3,[7,9,472,1]),i.pc_(4,4),i.pc_(4,49),i.pc_(4,3)]),i.ge(1))),8301:i.q(i.acq(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.itp("eyeota","229",!1,"8301"),i.itp("eyeota","294",!1,"8301")),i.itp("eyeota","6675",!1,"8301")),i.itp("eyeota","230",!1,"8301")),i.itp("eyeota","295",!1,"8301")),i.itp("eyeota","6676",!1,"8301")),i.ocq(i.ocq(i.itp("eyeota","242",!1,"8301"),i.itp("eyeota","300",!1,"8301")),i.itp("eyeota","6680",!1,"8301")))),8500:i.q(i.cw(0,i.o([i.y(3,288),i.pc_(4,9)]),i.ge(1))),8501:i.q(i.tw(i.cw(0,i.y(3,158),i.ge(1)),2592e6)),8502:i.q(i.ocq(i.ocq(i.cw(0,i.o([i.pe(3,"property (category)"),i.os(i.s,1,["property","postcode","ownership","housemate","properties","live","rent","house","houses","flat","flats","area guide","letting","neighbours","neighbourhood"])]),i.ge(1)),i.itp("skimlinks","4823302",!1,"8502")),i.itp("skimlinks","5387377",!1,"8502"))),8679:i.q(i.cw(0,i.ps(0,"the-cultural-tfl-map"),i.ge(1))),87823:i.q(i.cw(2,i.os(i.e,16,[2877767675,2917173786]),i.ge(1))),88397:i.q(i.ocq(i.ocq(i.itp("eyeota","229",!1,"88397"),i.itp("eyeota","230",!1,"88397")),i.itp("eyeota","232",!1,"88397"))),92512:i.q(i.cw(2,i.pe(16,2858295264),i.ge(1))),94379:i.q(i.cw(2,i.os(i.e,16,[2858670617,2930588348]),i.ge(1))),9697:i.q(i.cw(0,i.o([i.os(i.cx,4,[15,14]),i.os(i.s,1,[14,15,591,588,413,462,589,501,592,489,461,500,590,"vegetari","vegano","veg","organico"]),i.os(i.s,0,[14,15,591,588,413,462,589,501,592,489,461,500,590,"vegetaria"]),i.pc_(4,"vegetarian-friendly")]),i.ge(1))),9702:i.q(i.cw(0,i.o([i.pc_(4,162),i.os(i.s,1,[162,166,376,330,409,331,295,"#foodporn",439,157,"steak",130,301,298,526,525,509,332,314,364,586,410,322,566,297,587,345,"costillas",508,327,505,506,321]),i.os(i.s,0,[162,166,376,330,409,331,295,439,157,130,301,298,526,525,509,332,314,364,586,410,322,321,566,587,297,345,"costilles",508,327,505,506]),i.pc_(4,166),i.pc_(4,274),i.os(i.s,9,[274,157,"burgers",130,286,"grils"]),i.pc_(4,130),i.pc_(4,286),i.pc_(4,"grills")]),i.ge(1))),9704:i.q(i.acq(i.cw(0,i.o([i.pc_(4,175),i.os(i.s,1,[175,101,"dress shops",411,325,400,553,535,567,513]),i.os(i.s,0,[175,101,411,325,400,553,535,567,513])]),i.ge(1)),i.scq(i.sw("PageviewComplete",i.t,["properties","aggregations","PageviewEngagement","engaged_time"]),i.vq(i.sw("PageviewEngagement",i.t,["properties","engaged_time"])),i.ge(5)))),9705:i.q(i.cw(0,i.o([i.os(i.s,1,[242,606,401,351,533,333,420,464,608,479,480,475,476,"reis mags","reyes magos","noel"]),i.os(i.s,0,[242,606,401,351,533,333,420,464,608,479,480,475,476,"reis-mags","reyes-magos"]),i.pc_(4,"christmas")]),i.ge(1))),97745:i.q(i.cw(0,i.os(i.s,1,["Harry Potter and the Cursed Child review and tickets","Harry Potter Broadway Lottery and Cheap Tickets Guide","Harry Potter Store in NYC: See photos of NYC\'s magical d","Harry Potter and the Cursed Child Is a Triumph of Theater Magic","Harry Potter Book Night Experience a Barcelona: on i quan es far?","Harry Potter: A History Of Magic | Tokyo Station Gallery | Things to do in Tokyo","Harry Potter House Quiz: Find out which Hogwarts house you belong to with our sorting hat quiz","Harry Potter Tours, Shows and Experiences in London - Magical Experiences For Harry Potter Fans","\'Harry Potter: A History of Magic\' exhibition is coming to Tokyo this December","A Harry Potter-themed high tea experience is coming to NYC","La \'Harry Potter Book Night\' vuelve a Madrid: lectura y magia para los fans de la saga","10 Hardest Harry Potter Trivia Questions","This magical map shows all the Harry Potter locations in London","IMAX Thailand is bringing back Harry Potter and the Sorcerers Stone to the big screen","A guide to the Wizarding World of Harry Potter in Los Angeles","Una experiencia teatral mgica en la Harry Potter Book Night Experience","Abre Carrer Maldag, la tienda ms grande de Harry Potter en Barcelona","Warner Bros Studio Tour London  The Making of Harry Potter | Attractions in Hertfordshire, London"]),i.ge(1))),9812:i.q(i.cw(0,i.o([i.os(i.s,1,[393,463,460,491,394,93,406,276,275,277,380,407,340]),i.os(i.w,0,[406,393,463,491,460,394,93,275,276,340,277,"amistat",380,407,"grupos"]),i.os(i.w,3,[158,114]),i.pc_(4,"city life (blog posts)"),i.pc_(4,"going in a group"),i.pc_(4,114),i.ps(9,93)]),i.ge(1))),9831:i.q(i.sq(i.cw(0,i.t,i.e(2)))),9837:i.q(i.ocq(i.ocq(i.ocq(i.cw(0,i.a([i.y(10,63),i.z(8,63),i.pe(14,"United Kingdom")]),i.ge(1)),i.cw(0,i.a([i.as(i.x,8,[251,152]),i.y(10,251),i.y(14,259)]),i.ge(1))),i.cw(0,i.a([i.y(10,240),i.z(8,240),i.y(14,255)]),i.ge(1))),i.cw(0,i.a([i.z(8,248),i.y(10,248),i.y(14,255)]),i.ge(1))))}||{},{"!UpdateThirdPartyData":["10179","10463","10790","10853","10854","10855","10856","10857","10858","10859","10860","10861","10862","10863","10864","10865","10866","10867","10868","10869","10870","12381","13108","13769","13825","13826","13827","13828","13829","13830","13831","13832","14282","14371","14748","7827","7834","8301","8502","88397"],LinkClick:["10463","27457","29219","29585","7881"],Pageview:["10000000","10000001","10000002","10000003","10000004","10000005","10000006","10000007","10000008","10000010","10000011","10000012","10000013","10000014","10000015","10000016","10000017","10000018","10000019","10000020","10000021","10000022","10000023","10000024","10000025","10000026","10000035","10000036","10000037","10000038","10000039","10000040","10000041","10000042","10000043","10000044","10000045","10000046","10000047","10000048","10000049","10000050","10000051","10000052","10000053","10000054","10000055","10000056","10000057","10000058","10000059","10000060","10000061","10000062","10000063","10000064","10000065","10000066","10000067","10000068","10000069","10000070","10000071","10000072","10000073","10000074","10000075","10000076","10000077","10000078","10000079","10000080","10000081","10000082","10000083","10000084","10000085","10000086","10000087","10000088","10000089","10000090","10000324","10000325","10000327","10000328","10000329","10000330","10000687","10000688","10000689","10000690","10000691","10000692","10000693","10000694","10000695","10000696","10000697","10000698","10000699","10000700","10000701","10000702","10000703","10000704","10000705","10000706","10000707","10000708","10000709","10000710","10000711","10000712","10000713","10000714","10000715","10000716","10000717","10000718","10000719","10000720","10000721","10000722","10000723","10000724","10000725","10000726","10000727","10000728","10000729","10000730","10000731","10000732","10000733","10000734","10000735","10000736","10000737","10000738","10000739","10000740","10000741","10000742","10000743","10000744","10000745","10000746","10000747","10000748","10000749","10000750","10000751","10000752","10000753","10000754","10000755","10000756","10000757","10000758","10000759","10000760","10000761","10000762","10000763","10000764","10000765","10000766","10000767","10000768","10000769","10000770","10000771","10000772","10000773","10000774","10000775","10000776","10000777","10000778","10000779","10000780","10000781","10000782","10000783","10000784","10000785","10000786","10000787","10000788","10000789","10000790","10000791","10000792","10000793","10000794","10000795","10000796","10000797","10000798","10000799","10000800","10000801","10000802","10000803","10116","103289","10339","103641","10428","10463","10622","107543","11122","12475","12668","13108","13183","13445","13446","13520","13855","13856","13857","14577","14808","14812","14816","14823","14830","14831","14848","14851","14858","14919","14921","14923","16243","18570","21542","21794","23694","27457","28391","28538","28540","29195","29567","29568","29569","29571","29572","29573","29574","29575","29576","29581","29582","29590","29591","29592","29593","29594","29595","29596","29598","29599","32319","32321","32324","32333","32334","32336","32337","32338","32339","32340","32341","32344","32347","32348","32627","62592","71852","73622","74544","75203","7809","7827","7834","7835","7838","7843","7844","7878","7880","7881","7925","7981","8015","8500","8501","8502","8679","9697","9702","9704","9705","97745","9812","9831","9837"],PageviewComplete:["9704"],PageviewEngagement:["9704"],SlotClicked:["13444","74544"],SlotViewable:["103566","87823","92512","94379"]}||{})}();!function(e){const t=self;function n(e,n,r,o){function i(n){if("function"!=typeof t.postMessage)return e.ports[0].postMessage(n);t.postMessage(n)}if(!r)return i([n,null,o]);"undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",r),i([n,r])}t.addEventListener("message",(function(t){if(r=t,!Array.isArray(r.data)||2!==r.data.length)return;var r;const o=t.data,[i,c]=o;if("function"==typeof e)return function(e,t,r,o){const i=function(e,t){try{return{res:e(t)}}catch(e){return{err:e}}}(t,o);return Boolean(null===(c=i)||void 0===c?void 0:c.err)?n(e,r,i.err):!(a=i.res)||"object"!=typeof a&&"function"!=typeof a||"function"!=typeof a.then?n(e,r,null,i.res):void i.res.then((function(t){n(e,r,null,t)}),(function(t){n(e,r,t)}));var c,a}(t,e,i,c);n(t,i,new Error("Please pass a function into register()."))}))}((function(e){switch(e.type){case"bootstrap":return Mn(e.stateMap,...e.payload,Cn,Hn);case"updateEnvironment":return Pn(e.stateMap,...e.payload,Cn,Hn);case"updateLAL":return function(e,t,n,r,o,i){return Sn.getLookalikeModels=()=>r,jn=!0,Tn(e,t,n,xn,"updateLAL",o,i)}(e.stateMap,...e.payload,Cn,Hn);case"updateTPD":return function(e,t,n,r,o,i){On(r),An(),_n=!0;const c=Nn(e,t,n,kn.length>0?kn:[xn],"updateTPD",o,i);return kn=[],c}(e.stateMap,...e.payload,Cn,Hn);case"updateExternalState":return function(e,t,n,r,o){return Tn(e,t,n,xn,"updateExternalState",r,o)}(e.stateMap,...e.payload,Cn,Hn);case"process":return Nn(e.stateMap,...e.payload,"event",Cn,Hn);case"processTransitions":return function(e,t,n,r,o,i){return Nn(e,t,n,r,"transition",o,i)}(e.stateMap,...e.payload,Cn,Hn);case"noop":return{diff:{},errors:[]}}}))})();',"Worker",void 0,void 0)}var Kt=n(64),$t=n(6013),Ft=n(7545),Ht=n(7121);class Jt{constructor(e,t,n){this.externalData=e,this.localQueries=t,this.externalQueries=n,this.queryCodesAsList=[],this.queryCodesAsMap={};const i=this.externalData.getExternalData(Kt.mL),r=(0,Nt.fS)((()=>[]))((0,Nt.Y3)((()=>(JSON.parse(i)||[]).filter((e=>(0,Ht.UC)(e,this.localQueries,this.externalQueries))))));this.add(r)}has(e){return e in this.queryCodesAsMap}add(e){return(0,Bt.zG)(e.forEach((e=>this.queryCodesAsMap[e]=!0)),(e=>this.updateSegmentsList()))}remove(e){return(0,Bt.zG)(e.forEach((e=>delete this.queryCodesAsMap[e])),(e=>this.updateSegmentsList()))}getAllAsList(){return this.queryCodesAsList}getStdAsList(){return this.queryCodesAsList.filter((e=>e>=1e7))}getAllAsMap(){return this.queryCodesAsMap}getUpdates(e){const t=[],n=[];return Object.entries(e).forEach((([e,i])=>{const r=parseInt(e),s=(null==i?void 0:i.result)||{result:!1},o=!0===(null==s?void 0:s.result)&&!(r in this.queryCodesAsMap),a=!1===(null==s?void 0:s.result)&&r in this.queryCodesAsMap;o?t.push(r):a&&n.push(r)})),{entered:t,exited:n}}flush(){this.externalData.setExternalData(Kt.mL,JSON.stringify(this.getAllAsList()))}reset(){this.externalData.removeExternalData(Kt.mL),this.queryCodesAsList=[],this.queryCodesAsMap={}}updateSegmentsList(){this.queryCodesAsList=Object.keys(this.queryCodesAsMap).map((e=>parseInt(e)))}}const Qt={7809:"0c8b70cdb7",7827:"c4c50cfd83",7834:"20d9c16a82",7835:"ac319152cc",7838:"e29f176f7b",7843:"0abf02cfc7",7844:"be8a9bae4f",7878:"f2aaee1205",7880:"717a6b45b3",7881:"a60c6b29df",7925:"39ad13166c",7981:"ad94911d29",8015:"f67718459f",8301:"0c69eb38e0",8500:"b35ce275e4",8501:"49a20952d7",8502:"fc9446fcb9",8679:"424c9c287a",9697:"a14739ecdd",9702:"25d491145f",9704:"440b3eb82e",9705:"7ada3fec83",9812:"21a8a2546a",9831:"e8d96d95ff",9837:"1b8afdec22",10116:"1bc53f4cd6",10179:"573c37ae98",10339:"177c02719a",10428:"5f67debed9",10463:"23d5965bd7",10622:"582169f0f2",10790:"818c4a4cee",10853:"1ed51fbdf9",10854:"83436be25c",10855:"b21a1328f2",10856:"a48dbb517d",10857:"4c9bea17f0",10858:"0bc6c0f5bb",10859:"aae15174fd",10860:"39fd3182ff",10861:"ff4141612d",10862:"cd3d474bb9",10863:"eaea8d4150",10864:"91c56521ed",10865:"67027d49f5",10866:"3c9f503b5b",10867:"8cc466146b",10868:"9d132cac28",10869:"b17b71daa7",10870:"0338020d5e",11122:"bcd36340ef",12381:"83436be25c",12475:"190e00793a",12668:"871294e9be",13108:"c303063a0a",13183:"df3175455d",13444:"a0b1e4511f",13445:"25b32e17c9",13446:"b9295c640a",13520:"22215388a0",13769:"9e28027d6a",13825:"d56f7a5456",13826:"072c7bb173",13827:"c2efc62eaf",13828:"3f2a906cd4",13829:"796a56ec6a",13830:"d785351b40",13831:"19a730d5f2",13832:"6d2787d327",13855:"8d661148fc",13856:"caab8a7dbd",13857:"6e98532ec3",14282:"65011f1c1e",14371:"0f5797071e",14577:"2e6225c09f",14748:"2321bc3d67",14808:"6bfd5b8f26",14812:"8573db81f8",14816:"3f3d74f0c1",14823:"abd941c6d7",14830:"d4de7ebf2a",14831:"4fe6688899",14848:"d19868d715",14851:"cc9df07ac7",14858:"85332ae5e6",14919:"b0d203e2e6",14921:"e272154bf4",14923:"d9b65faecb",16243:"a85266c7ef",18570:"f919dec8ab",21542:"c3d98ea6fc",21794:"4bca7eab5d",23694:"ce5a97a7b6",27457:"0277837843",28391:"8479311e32",28538:"0c1e978936",28540:"f129216e83",29195:"346fe6107f",29219:"64c33c497b",29567:"c74aa15543",29568:"5801f7dead",29569:"c98e94b49e",29571:"6b0620432f",29572:"79fff59697",29573:"a9e1e18313",29574:"b6e0993561",29575:"9906eff264",29576:"cffc835354",29581:"565cc1c977",29582:"200f02b472",29585:"2c728e1a6b",29590:"9452c351cd",29591:"d146710f38",29592:"fe59168a81",29593:"c352970d3d",29594:"34a2a2c2e7",29595:"7913ef5244",29596:"5f229a5b1d",29598:"3abf365d43",29599:"0c73fcaf7d",32319:"1e1cb0d8c0",32321:"ca60f440d5",32324:"32e95eb132",32333:"cbe14ba5f3",32334:"ba68239c20",32336:"f2f864fdba",32337:"678c39457d",32338:"e36d6dfd31",32339:"d2a8cf4bb1",32340:"25203a123c",32341:"62e74bb3eb",32344:"f4282db095",32347:"43e170c24d",32348:"c12e9150f0",32627:"e0a8b88dbb",62592:"4ab1a28af4",71852:"0b545e011f",73622:"7e700bcc65",74544:"c4875d6060",75203:"c0b4b9329b",87823:"0935db3388",88397:"8fbeab35bc",92512:"52accc079c",94379:"56159946c4",97745:"d16a0140b2",103289:"7bbb305a2b",103566:"ed1ff52928",103641:"9b740ad87d",107543:"1f37165260",1e7:"ab2a79b4e1",10000001:"ea7eca3b49",10000002:"7a0b76bb2f",10000003:"49e502122c",10000004:"f1c67fac3c",10000005:"377db020e8",10000006:"547879da4e",10000007:"12ed0bff2a",10000008:"1a9d700b97",10000010:"a4cefa7f58",10000011:"aa7075e35b",10000012:"1ae8bddb93",10000013:"1e8886ad72",10000014:"f516ad362e",10000015:"787c19bee4",10000016:"d6475b75d5",10000017:"38ea08fad7",10000018:"5fab00fa2c",10000019:"e109f9b360",10000020:"90a178ea71",10000021:"bd128fcfed",10000022:"cd3face523",10000023:"c2f26784d1",10000024:"eb85193dfd",10000025:"9674e8f207",10000026:"6d37ba6b9a",10000035:"b0aca14cab",10000036:"d36ef645a5",10000037:"adf0bd9d7d",10000038:"0a8427037a",10000039:"9b0eb48861",10000040:"de880ed625",10000041:"82f6856d68",10000042:"98ff38947b",10000043:"3cde49fc7f",10000044:"204ea1bd83",10000045:"87b257dec6",10000046:"5579a14726",10000047:"aca78f9e2e",10000048:"fa2ea1e2fa",10000049:"673bfae6e5",10000050:"6f4e13e789",10000051:"d7f4837226",10000052:"53669c17cf",10000053:"cd9d4baf1b",10000054:"36a6a1b8ac",10000055:"61fbd3f45d",10000056:"36169adc34",10000057:"4dcf4dc5ea",10000058:"91ed3d5df9",10000059:"9975f2d18a",10000060:"291bb4c201",10000061:"835df65992",10000062:"8af22f787c",10000063:"13625d9512",10000064:"865b534730",10000065:"711a803835",10000066:"3f5a01518e",10000067:"a90790be86",10000068:"840b4c697a",10000069:"5b811cacf3",10000070:"26f90895bf",10000071:"ecfb5c1cab",10000072:"49ab120d1d",10000073:"8816deadae",10000074:"5c7a1ac24a",10000075:"0dc58fe713",10000076:"c791f64ecd",10000077:"fb2601505c",10000078:"ec0d63e687",10000079:"9f1a1f7510",10000080:"e51622030c",10000081:"c7a8cae6d0",10000082:"8ce761d02d",10000083:"7b6a42ef76",10000084:"479977505c",10000085:"930fdc5c22",10000086:"39e47fa144",10000087:"08cf53e104",10000088:"a2e20ffb1f",10000089:"68f37c2880",10000090:"be04a0b54e",10000324:"1ccab119ee",10000325:"1f783b581b",10000327:"21c25a4900",10000328:"482cefaa5d",10000329:"8ea8e0687e",10000330:"7f88a52c7e",10000687:"8cfe8cac9d",10000688:"6e4f7fa14e",10000689:"52ef8e630f",10000690:"e072687254",10000691:"3fe53e0c18",10000692:"abf645cb8e",10000693:"d7956f1d3d",10000694:"05129d3c08",10000695:"74ef454681",10000696:"7ae9936d9c",10000697:"26fc0f70c4",10000698:"ae27296fe1",10000699:"d5f5b0f0cd",10000700:"eb8125a768",10000701:"3bea66735c",10000702:"16ae6df770",10000703:"761e431f4d",10000704:"063893f005",10000705:"55d48462e7",10000706:"5c3875edd3",10000707:"8968e719ff",10000708:"c517d35d9c",10000709:"6fc892f976",10000710:"3e7a4e35f2",10000711:"44912da274",10000712:"e4ce60c3dd",10000713:"f18696c094",10000714:"017f28f8bb",10000715:"55116c14c3",10000716:"0f4395c2c4",10000717:"f3450f1ac2",10000718:"d1bc7ccfce",10000719:"88d3e1a480",10000720:"8eda205ac0",10000721:"f384ae2fa0",10000722:"4a3d1ff840",10000723:"68fd2589c4",10000724:"bae84a23bd",10000725:"d0f5458a4e",10000726:"6676d3d9a9",10000727:"aae1e1dcd7",10000728:"91ed3d5df9",10000729:"8f0eb3e289",10000730:"f1cea45a0b",10000731:"9351a7c7b0",10000732:"8ff05a8c34",10000733:"03f2821968",10000734:"7e89a633cb",10000735:"5f368efb3a",10000736:"5f368efb3a",10000737:"5bb87220bd",10000738:"6254881159",10000739:"1e02537eb0",10000740:"39270e0a06",10000741:"012978eb27",10000742:"d04b907379",10000743:"7070b1a14e",10000744:"6fc892f976",10000745:"8669619b19",10000746:"8b94534036",10000747:"7a40512ab1",10000748:"38d2e91fcf",10000749:"257cd6d50c",10000750:"3aa7ebea4f",10000751:"7e89a633cb",10000752:"a5abec86a6",10000753:"abafd1fcfc",10000754:"26fe7dbd61",10000755:"66d80d09bc",10000756:"08faf112c3",10000757:"05fedf88fd",10000758:"7680d4aba9",10000759:"f634153f8a",10000760:"46657a12ff",10000761:"64531a69c2",10000762:"904c2afaa9",10000763:"a3a3991956",10000764:"603cbf8d13",10000765:"78b12b1080",10000766:"211483a594",10000767:"07a0d69300",10000768:"183297f1ac",10000769:"e1c66b1569",10000770:"66b9851322",10000771:"fea86fbb59",10000772:"79a6fb7d55",10000773:"17f646de43",10000774:"468b27f1e6",10000775:"dab0ea43a2",10000776:"c3dc556a6d",10000777:"5b4df291a5",10000778:"17f4fcfd36",10000779:"47f71b40c3",10000780:"5c22398d33",10000781:"be5e562f33",10000782:"8b1de71fa0",10000783:"fdad521149",10000784:"d9dd4fd30f",10000785:"78e513e696",10000786:"5d44629314",10000787:"a5ab24f97d",10000788:"fb921aed0e",10000789:"d7f4f9500b",10000790:"8e63833564",10000791:"e3f4d88317",10000792:"533d5822ba",10000793:"4b226ceeb1",10000794:"a479c5c4c7",10000795:"df7301c3d9",10000796:"54fc95930e",10000797:"0c10dbde30",10000798:"b91b525b50",10000799:"6a4d2d099e",10000800:"0adbbddcf3",10000801:"38c747aefd",10000802:"f33b4f3f34",10000803:"a2d275785b"},Yt=new Set([]);function Vt(){return(0,Ut.h)(new zt)}class Xt{constructor(e,t,n,i,r,s,o,a,c,u,d,l,g,p,f,m=new Jt(g,Qt,Yt)){this.logger=e,this.network=t,this.permutiveData=n,this.sessionManager=i,this.messages=r,this.customProperties=s,this.realtime=o,this.permutive=a,this.queryWorker=c,this.trace=u,this.userId=d,this.viewId=l,this.externalData=g,this.transitionDebounceTime=p,this.transitionDebounceMaxTime=f,this.userSegments=m,this.queryMetadata=Qt,this.isWorkerReady=!1,this.extStateMap={},this.segmentEntryQueryCodes=new Set,this.segmentExitQueryCodes=new Set,this.scheduler=new Ft.b(this.transitionDebounceTime,this.transitionDebounceMaxTime);this.debouncedProcessTransitions=this.scheduler.scheduleAccumulated((e=>this.processTransitions(e)),{concat:(e,t)=>e.concat(t),empty:[]});const h=this.permutiveData.getData("internal_query_states")||{},_=this.permutiveData.getData("external_query_states")||{},v=Object.keys(this.queryMetadata),w=Object.keys(h);this.hasNewOrModifiedQueries=v.length!==w.length||v.filter((e=>{var t;return this.queryMetadata[e]!==(null===(t=h[e])||void 0===t?void 0:t.checksum)})).length>0,e.log("QueryManager has new or modified queries",this.hasNewOrModifiedQueries);const b=this.hasNewOrModifiedQueries?(0,$t.fl)(h,(e=>{var t;return(null===(t=h[e])||void 0===t?void 0:t.checksum)===this.queryMetadata[e]})):h;this.extStateMap=this.hasNewOrModifiedQueries?(0,Bt.zG)((0,$t.fl)(_,(e=>e in b)),(e=>(this.permutiveData.setData("external_query_states",e),e))):_,this.stateMap={value:b,promise:Promise.resolve(b)};this.permutiveData.getData("query_states")&&this.permutiveData.setData("query_states",null)}bootstrap(e){const t=this.trace.startSpan("worker_bootstrap");return this.postMessage((t=>this.queryWorker.postMessage({type:"bootstrap",payload:[this.queryMetadata,this.extStateMap,{segments:{"1p":this.userSegments.getAllAsMap()},sessionId:this.sessionManager.getSessionId(),viewId:this.viewId.get(),lookalikeModels:{}},e],stateMap:t}))).then((e=>(t.finish(),e)))}updateEnvironment(e){return this.postMessage((t=>this.queryWorker.postMessage({type:"updateEnvironment",payload:[this.queryMetadata,this.extStateMap,e],stateMap:t})))}updateLAL(e){return this.postMessage((t=>this.queryWorker.postMessage({type:"updateLAL",payload:[this.queryMetadata,this.extStateMap,e],stateMap:t})))}updateTPD(e){return this.postMessage((t=>this.queryWorker.postMessage({type:"updateTPD",payload:[this.queryMetadata,this.extStateMap,e],stateMap:t})))}process(e,t){return(0,Ht.AG)(e)?this.debouncedProcessTransitions([e]):this.processStandard([e],t)}updateExternalState(e){const t=(0,$t.b0)(e,((e,t)=>{const n=this.queryMetadata[e];return n&&t[n]?(0,Nt.Uo)(rt(t[n])):Nt.YP})),n=(0,$t.b0)(this.extStateMap,((e,t)=>(0,Nt.Uo)(rt(t)))),i=(e,t,n)=>(0,Bt.zG)((0,Nt.Y3)((()=>function(e,t){return It("join",e,t)}(e,t))),(0,Nt.fS)((()=>(this.network.error(`Failed to join external state for query: ${n}. Had ${nt(t)}, received ${nt(e)}}`,this.userId.get()),t)))),r=(0,$t.b0)(Object.assign(Object.assign({},n),t),((e,t)=>n[e]?(0,Nt.G)(it(i(t,n[e],e))):(0,Nt.G)(it(t))));this.permutiveData.setData("external_query_states",r),this.extStateMap=r;return this.postMessage((e=>this.queryWorker.postMessage({type:"updateExternalState",payload:[this.queryMetadata,this.extStateMap],stateMap:e})))}updateExternalSegments(e){const t={};for(const n of Object.keys(e)){const i=parseInt(n);!isNaN(i)&&Yt.has(i)&&(t[i]={result:{result:e[i]}})}const{entered:n,exited:i}=this.userSegments.getUpdates(t);this.trackSegmentsTransition(n,i),this.updateUserSegments(n,i);(n.length>0||i.length>0)&&this.messages.emit("permutive:segments:updated")}processStandard(e,t){return this.processImpl((t=>this.queryWorker.postMessage(Object.assign({type:"process"},this.makeProcessPayload()(t,e)))),e,t)}processTransitions(e){return this.processImpl((t=>this.queryWorker.postMessage(Object.assign({type:"processTransitions"},this.makeProcessPayload()(t,e)))),e,!1)}makeProcessPayload(){return(e,t)=>({payload:(0,Bt.bc)(this.queryMetadata,this.extStateMap,t),stateMap:e})}processImpl(e,t,n){return this.postMessage(e).then((e=>(0,Bt.zG)(n?this.setAsRealTimeifNeeded(t):(0,Bt.Q1)(),(t=>e))))}postMessage(e){return new Promise((t=>{this.stateMap.promise=this.stateMap.promise.then(e).then((({diff:e,errors:n})=>{const[i,r]=this.onStateChange(e,n);return t([e,r]),i})).catch((e=>(0,Bt.zG)(this.network.error(`Error during query execution. Got ${e}`,this.userId.get()),(e=>t([{},{segmentsEntered:new Set,segmentsExited:new Set}])),(e=>this.stateMap.value))))}))}onStateChange(e,t){return(0,Bt.zG)(t.length>0?this.network.error(`QL error(s). Got ${t.join("; ")}`,this.userId.get()):{},(t=>this.stateMap.value=Object.assign(Object.assign({},this.stateMap.value),e)),(e=>this.isWorkerReady?[e,this.onStateChangeReady(e)]:[e,{segmentsEntered:new Set,segmentsExited:new Set}]))}trackSegmentsTransition(e,t){e.forEach((e=>{this.trackTransition(!0,e),this.messages.emit("permutive:query:changed",{queryCode:e,result:{result:!0}})})),t.forEach((e=>{this.trackTransition(!1,e),this.messages.emit("permutive:query:changed",{queryCode:e,result:{result:!1}})}))}updateUserSegments(e,t){this.userSegments.add(e),this.userSegments.remove(t),this.userSegments.flush()}onStateChangeReady(e){const{entered:t,exited:n}=this.userSegments.getUpdates(e);this.trackSegmentsTransition(t,n),this.updateUserSegments(t,n),this.logger.log("Writing new segment and query state cache",e),this.permutiveData.setData("internal_query_states",e);const i=t.length>0||n.length>0;return(0,Bt.zG)(i,(e=>e?this.messages.emit("permutive:segments:updated"):{}),(e=>({segmentsEntered:new Set(t),segmentsExited:new Set(n)})))}trackTransition(e,t){const n=Kt.ED?this.customProperties.getCustomProps():{},i=Object.assign(Object.assign(Object.assign({},n),{segment_number:t}),{});e?this.segmentEntryQueryCodes.add(t):this.segmentExitQueryCodes.add(t),this.permutive.track(e?"SegmentEntry":"SegmentExit",i)}setAsRealTimeifNeeded(e){return!this.realtime.isRealtime()&&e.filter((e=>"Pageview"===e.name)).length>0?Promise.resolve(this.realtime.setAsRealtime(this.userSegments.getAllAsList().length)):Promise.resolve()}reset(){this.userSegments.reset(),this.permutiveData.setData("internal_query_states",{}),this.permutiveData.setData("external_query_states",{}),this.stateMap={value:{},promise:Promise.resolve({})},this.extStateMap={}}setAsReady(){this.isWorkerReady=!0,this.onStateChangeReady(this.stateMap.value),this.messages.emit("permutive:queries:initialised")}getStateSizeInBytes(){return 2*JSON.stringify(this.stateMap.value).length}}},7121:(e,t,n)=>{n.d(t,{AG:()=>a,UC:()=>s,Yh:()=>o});var i=n(6567),r=n(6013);const s=(e,t,n)=>e in t||(()=>{const t="number"==typeof e?e:parseInt(e);return!1===isNaN(t)&&n.has(t)})(),o=e=>(0,r.b0)(e,((e,t)=>t.state?(0,i.G)({[t.checksum]:t.state}):i.YP));function a(e){var t;return["SegmentEntry","SegmentExit"].includes(e.name)&&void 0!==(null===(t=e.properties)||void 0===t?void 0:t.segment_number)}},3253:(e,t,n)=>{n.d(t,{S:()=>o});var i=n(655),r=n(3735),s=n(6013);class o{constructor(e,t){var n;this.db=e,this.options=t,this.hasChanged=!1,this.options=null!==(n=this.options)&&void 0!==n?n:{},this.options.timeout_seconds=this.options.timeout_seconds||1800,this.options.session_data_key=this.options.session_data_key||"permutive-session",this.session_id=null}getSessionId(){return this.session_id}sessionHasChanged(){return this.hasChanged}decodeSessionData(e){return null===e?null:"object"==typeof e&&e.hasOwnProperty("session_id")&&e.hasOwnProperty("last_updated")?Object.assign(Object.assign({},e),{last_updated:new Date(e.last_updated)}):null}reset(){return this.db.delete(this.options.session_data_key)}persistSessionData(e){return(0,i.mG)(this,void 0,void 0,(function*(){const t=e.last_updated.toISOString();yield this.db.put(Object.assign(Object.assign({},e),{last_updated:t}),this.options.session_data_key)}))}newSession(e){return this.hasChanged=!0,{session_id:(0,s.k$)(),last_updated:e}}hasExpired(e,t){if(isNaN(t.getTime()))return!0;return e>new Date(t.getTime()+1e3*this.options.timeout_seconds)}static initialise(e,t,n){return(0,i.mG)(this,void 0,void 0,(function*(){const i=new o(t,n);e.deleteCookie(i.options.session_data_key);const s=new Date,a=yield i.db.get(i.options.session_data_key).catch(r.gn),c=i.decodeSessionData(a),u=null===c||i.hasExpired(s,c.last_updated)?i.newSession(s):Object.assign(Object.assign({},c),{last_updated:s});return yield i.persistSessionData(u),i.session_id=u.session_id,i}))}}},2747:(e,t,n)=>{n.d(t,{S:()=>f});var i=n(3735),r=n(6013),s=n(7545);class o{constructor(e,t,n,i,r){this.config=e,this.namespace=t,this.logger=n,this.network=i,this.userId=r,this.permutiveData={},this.permutiveDataSize=0,this.localStorageQueue=new Set,this.localStorageScheduler=new s.b(e.localStorageWriteDelay,e.localStorageWriteMaxDelay),this.debouncedFlush=this.localStorageScheduler.schedule(this.flushLocalStorageQueue.bind(this)),this.debouncedStorageKeys=new Set(e.localStorageDebouncedKeys),this.localStorageScheduler.scheduleForPageUnload(this.flushLocalStorageQueue.bind(this)),this.permutiveData=this.buildData()}reset(){this.permutiveData={}}getDataSize(){return this.permutiveDataSize}getData(e){return this.permutiveData[e]}setData(e,t){this.permutiveData[e]=t,this.debouncedStorageKeys.has(e)?(this.localStorageQueue.add(e),this.debouncedFlush()):this.writeData(e)}flushLocalStorageQueue(){for(let e of this.localStorageQueue)this.writeData(e);this.localStorageQueue.clear()}buildData(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.getDataChunk("misc")),this.getDataChunk("models")),this.getDataChunk("queries")),this.getDataChunk("tpd")),this.getDataChunk("enrichers"))}getDataChunk(e){const t=this.namespace.getNamespacedStorageKey(this.chunkKeyToStorageKey(e)),n=window.localStorage.getItem(t);return null===n?{}:(this.permutiveDataSize+=2*n.length,JSON.parse(n))}chunkKeyToStorageKey(e){switch(e){case"models":return this.config.permutiveDataModelsKey;case"queries":return this.config.permutiveDataQueriesKey;case"tpd":return this.config.permutiveDataTPDKey;case"enrichers":return this.config.permutiveDataEnrichersKey;case"misc":return this.config.permutiveDataMiscKey;default:return(0,r.Fi)(e)}}writeData(e){this.logger.debug(`Data Store: Writing ${e} to localStorage`);const[t,n]=this.dataKeyToChunkInfo(e);return(0,r.Z_)(this.network,this.userId,(()=>window.localStorage.setItem(this.namespace.getNamespacedStorageKey(t),JSON.stringify(n))))()}dataKeyToChunkInfo(e){const t=e=>(0,r.eu)(this.permutiveData,e);switch(e){case"models_data":case"models_last_updated":return[this.chunkKeyToStorageKey("models"),t(a)];case"query_states":case"internal_query_states":case"external_query_states":case"state_offset":case"event-source-id":return[this.chunkKeyToStorageKey("queries"),t(c)];case"third-party-data":case"third-party-data-session-id":case"third-party-data-usage":return[this.chunkKeyToStorageKey("tpd"),t(u)];case"enricher:geoip":case"enricher:watson":return[this.chunkKeyToStorageKey("enrichers"),t(d)];case"identities":case"amp_ready":case"metricsEnabled":case"addon:tradedesk":case"addon:tracking_pixel":case"addon:eyeota_pixel":case"addon:twitter_pixel":case"addon:pinterest_pixel":case"addon:facebook_pixel_v2":case"addon:appnexus":case"addon:ddp":case"addon:gigya":case"addon:neustar_fabrick":case"pubmatic":case"lotame":return[this.chunkKeyToStorageKey("misc"),t(l)];default:return(0,r.Fi)(e)}}}const a=["models_data","models_last_updated"],c=["query_states","internal_query_states","external_query_states","state_offset","event-source-id"],u=["third-party-data","third-party-data-session-id","third-party-data-usage"],d=["enricher:geoip","enricher:watson"],l=["identities","amp_ready","metricsEnabled","addon:tradedesk","addon:tracking_pixel","addon:eyeota_pixel","addon:twitter_pixel","addon:pinterest_pixel","addon:facebook_pixel_v2","addon:appnexus","addon:ddp","addon:gigya","addon:neustar_fabrick","pubmatic","lotame"];var g=n(590);const p=e=>{const{logger:t,consentTracking:n}=e,i=e=>{t.debug(`Data Store: Failed to write ${e} as consent is revoked`)};return e=>class extends e{constructor(){super(...arguments),this.writeData=(0,g.vX)(super.writeData.bind(this),i,n.isRevoked)}}},f=(e,t,n,r,s,a)=>new((0,i.zG)(o,p({consentTracking:a,logger:n})))(e,t,n,r,s)},1823:(e,t,n)=>{n.d(t,{$:()=>r});var i=n(6013);class r{constructor(e){this.permutiveData=e,this.eventSourceId=e.getData("event-source-id")||this.generateAndStoreEventSourceId()}get(){return this.eventSourceId}generateAndSet(){this.eventSourceId=this.generateAndStoreEventSourceId()}generateAndStoreEventSourceId(){const e=(0,i.k$)();return this.permutiveData.setData("event-source-id",e),e}}},7738:(e,t,n)=>{n.d(t,{L:()=>i});class i{constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}},1728:(e,t,n)=>{n.d(t,{u:()=>i});class i{constructor(e,t){this.metrics=e,this.messages=t}isRealtime(){return this._isRealtime}isReady(){return this._isReady}setAsRealtime(e){this._isRealtime=!0,this.messages.emit("permutive:realtime"),this.metrics.trackTimeSinceInit("sdk_realtime_targeting_set_task_duration_seconds",{}),this.metrics.track({name:"sdk_user_segments_count",value:e,labels:{}})}setAsReady(){this._isReady=!0,this.messages.emit("permutive:ready"),this.metrics.trackTimeSinceInit("sdk_initialisation_task_duration_seconds",{sdk_version:"v19.9.0"}),window.performance&&window.performance.memory&&(this.metrics.track({name:"sdk_heap_memory_bytes_used",value:window.performance.memory.usedJSHeapSize,labels:{}}),this.metrics.track({name:"sdk_heap_memory_limit_fraction_used",value:window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,labels:{}}))}}},4327:(e,t,n)=>{n.d(t,{a:()=>o});var i=n(655),r=n(3735),s=n(356);class o{constructor(e,t,n,i,r,s,o,a){this.config=e,this.localStorage=t,this.logger=n,this.queryManager=i,this.permutiveData=r,this.eventSourceId=s,this.cookies=o,this.externalData=a,this.allExternalData={_paols:!0,_papns:!0,_pcrdbs:!0,_pcrprs:!0,"_pdem-state":!0,_pdfps:!0,_pfwqp:!0,_pnativo:!0,_ppam:!0,_prps:!0,_prubicons:!0,_psegs:!0,_psmart:!0,"permutive-events-cache":!0,"permutive-id":!0,"permutive-loaded":!0,_pclmc:!0}}reset(){return(0,i.mG)(this,void 0,void 0,(function*(){return this.logger.log("Resetting State"),(0,r.zG)(this.cookies.deleteCookie(this.config.cookieName),(e=>this.externalData.removeExternalData(this.config.cookieName)),(e=>(0,s.XP)(this.allExternalData).forEach((e=>this.externalData.removeExternalData(e)))),(e=>this.queryManager.reset()),(e=>this.permutiveData.reset()),(e=>this.eventSourceId.generateAndSet()),(e=>Promise.all([this.localStorage.delete(this.config.permutiveDataModelsKey),this.localStorage.delete(this.config.permutiveDataQueriesKey),this.localStorage.delete(this.config.permutiveDataTPDKey),this.localStorage.delete(this.config.permutiveDataEnrichersKey),this.localStorage.delete(this.config.permutiveDataMiscKey)])),r.Q1)}))}}},1714:(e,t,n)=>{n.d(t,{N:()=>f,e:()=>g});var i=n(7183),r=n(70),s=n(3735),o=n(477),a=n.n(o);function c(){return a()('/*! permutive-javascript-sdk v19.9.0 (web) (built 2022-05-18T14:23:25.118Z) */(()=>{"use strict";const n=()=>({kind:"null",value:null}),r=n=>({kind:"string",value:n}),t=n=>({kind:"number",value:n}),e=n=>({kind:"array",value:n}),u=n=>({kind:"object",value:n}),i=n=>n,o=()=>({kind:"bottom"}),c=n=>({kind:"inner",a:n}),a=n=>({kind:"top",error:n}),s=n=>({kind:"unbounded",group:n}),f=(n,r)=>({kind:"windowed",key:r,group:n}),l=(n,r,t)=>({kind:"countLimit",n:t,limit:r,group:n}),d=(n,r,t)=>({kind:"uniqueLimit",n:t,limit:r,group:n}),p=n=>({kind:"numberGroup",group:n}),m=n=>({kind:"stringGroup",group:n}),g=n=>({kind:"tuple",tuple:n}),v=n=>({state:n}),h=(n,r)=>({commands:n,payload:r});function k(n){return n}function w(n,r,t,e,u,i,o,c,a){switch(arguments.length){case 1:return n;case 2:return r(n);case 3:return t(r(n));case 4:return e(t(r(n)));case 5:return u(e(t(r(n))));case 6:return i(u(e(t(r(n)))));case 7:return o(i(u(e(t(r(n))))));case 8:return c(o(i(u(e(t(r(n)))))));case 9:return a(c(o(i(u(e(t(r(n))))))));default:for(var s=arguments[0],f=1;f<arguments.length;f++)s=arguments[f](s);return s}}var y=function(n){return{equals:function(r,t){return r===t||n(r,t)}}},b=function(n){return y((function(r,t){for(var e in n)if(!n[e].equals(r[e],t[e]))return!1;return!0}))},x=function(n){return function(r,t){return r===t||0===n(r,t)}},j=function(n){return{equals:x(n),compare:function(r,t){return r===t?0:n(r,t)}}},N=function(n){return function(r){return j((function(t,e){return r.compare(n(t),n(e))}))}},q=function(n){return function(r,t){return-1===n.compare(r,t)}},L=function(n){return function(r,t){return 1===n.compare(r,t)}},O=function(n){return function(r,t){return r===t||n.compare(r,t)>-1?r:t}};var M={equals:function(n,r){return n===r}},S={equals:M.equals,compare:function(n,r){return n<r?-1:n>r?1:0}};const G=(n,r)=>{switch(n.kind){case"bottom":return{kind:"bottom"};case"inner":return c(r(n.a));case"top":return a(n.error)}},E=n=>j(((r,t)=>{if("bottom"===r.kind&&"bottom"===t.kind)return 0;if("bottom"===r.kind)return-1;if("bottom"===t.kind)return 1;if("top"===r.kind&&"top"===t.kind)return S.compare(r.error,t.error);if("top"===r.kind)return 1;if("top"===t.kind)return-1;if("inner"===r.kind&&"inner"===t.kind)return n.compare(r.a,t.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var _=function(n,r){for(var t=0,e=r.length,u=n.length;t<e;t++,u++)n[u]=r[t];return n},A=function(n){return"Some"===n._tag},$={_tag:"None"},I=function(n){return{_tag:"Some",value:n}},C=function(n){return"Left"===n._tag},z=(Object.prototype.hasOwnProperty,function(n){return _([n[0]],n.slice(1))});var J=$,P=I;function R(n){return function(r){return n(r)?P(r):J}}var F=function(n){return"Left"===n._tag?J:P(n.right)},W=function(n){return{equals:function(r,t){return r===t||(H(r)?H(t):!H(t)&&n.equals(r.value,t.value))}}},B=function(n){return{equals:W(n).equals,compare:function(r,t){return r===t?0:D(r)?D(t)?n.compare(r.value,t.value):1:-1}}},T=function(n){return function(r){return H(r)?J:P(n(r.value))}},U=F,D=A,H=function(n){return"None"===n._tag},K=function(n){return function(r){return H(r)?n():r.value}};var Q;Q=void 0;var V=function(n){return n[0]},X=V;var Y=function(n,r){for(var t=0,e=r.length,u=n.length;t<e;t++,u++)n[u]=r[t];return n},Z=function(n){return n.length>0},nn=function(n,r){return n<0||n>=r.length},rn=function(n){return function(r){return Y([n],r)}},tn=rn,en=function(n){return function(r){return Y(Y([],r),[n])}},un=en,on=z,cn=function(n){return Z(n)?I(n):$},an=function(n){return function(r){for(var t=Math.max(0,Math.floor(r)),e=[n(0)],u=1;u<t;u++)e.push(n(u));return e}};var sn=on;var fn=function(n){return function(r){var t=Math.max(1,n);return t>=r.length?[sn(r),[]]:[w(r.slice(1,t),tn(dn(r))),r.slice(t)]}},ln=function(n){return y((function(r,t){return r.length===t.length&&r.every((function(r,e){return n.equals(r,t[e])}))}))},dn=X;var pn={equals:function(n,r){return n===r}},mn={equals:pn.equals,compare:function(n,r){return n<r?-1:n>r?1:0}};var gn=function(n,r){return function(t){for(var e=t.length,u=n,i=0;i<e;i++)u=r(i,u,t[i]);return u}};var vn=function(n){return 0===n.length},hn=Z,kn=tn,wn=un,yn=function(n,r){return n<=0?[]:an(r)(n)};var bn=nn,xn=function(n){return function(r){return bn(n,r)?qn(r):r.slice(0,n)}};var jn=function(n,r){for(var t=n.length,e=0;e<t&&r(n[e]);e++);return e};var Nn=function(n){return function(r){return n<=0||vn(r)?qn(r):n>=r.length?[]:r.slice(n,r.length)}};var qn=function(n){return n.slice()},Ln=function(n){return vn(n)?[]:n.slice().reverse()},On=function(n){return function(r){return r.length<=1?qn(r):r.slice().sort(n.compare)}},Mn=function(n,r,t){for(var e=[],u=Math.min(n.length,r.length),i=0;i<u;i++)e[i]=t(n[i],r[i]);return e};var Sn=function(n){return function(r){return n>=1&&hn(r)?fn(n)(r):vn(r)?[qn(r),[]]:[[],qn(r)]}};var Gn=function(n){return function(r){return w(r,function(n){return function(r){for(var t=[],e=0;e<r.length;e++)t.push.apply(t,n(e,r[e]));return t}}((function(r,t){return n(t)})))}},En=function(n){return function(r){for(var t=[],e=0;e<r.length;e++){var u=n(e,r[e]);A(u)&&t.push(u.value)}return t}},_n=function(n){return En((function(r,t){return n(t)}))},An=_n(k),$n=gn,In=function(n){var r=Cn(n);return function(n){return r((function(r,t){return n(t)}))}},Cn=function(n){return function(r){return $n(n.of([]),(function(t,e,u){return n.ap(n.map(e,(function(n){return function(r){return w(n,wn(r))}})),r(t,u))}))}},zn=function(n){return j((function(r,t){for(var e=r.length,u=t.length,i=Math.min(e,u),o=0;o<i;o++){var c=n.compare(r[o],t[o]);if(0!==c)return c}return mn.compare(e,u)}))},Jn=function(n){return{_tag:"Left",left:n}},Pn=function(n){return{_tag:"Right",right:n}},Rn=function(n,r){return w(n,Bn(r))},Fn=function(n,r){return w(n,Un(r))},Wn="Either",Bn=function(n){return function(r){return Hn(r)?r:Pn(n(r.right))}},Tn=Pn,Un=function(n){return function(r){return Hn(r)?r:Hn(n)?n:Pn(r.right(n.right))}},Dn={URI:Wn,map:Rn,ap:Fn,of:Tn},Hn=C;var Kn=function(n){return-1===n?1:1===n?-1:0};function Qn(n,r){return An(n.map(r))}function Vn(n,r,t,e){const u=(n,r)=>{if(0===n.length)return An(r.map((n=>P({1:n[1],2:t(J,P(n[2]))}))));if(0===r.length)return An(n.map((n=>P({1:n[1],2:t(P(n[2]),J)}))));if(n.length>0&&r.length>0&&q(e)(n[0][1],r[0][1])){const[e,...i]=n,o=e[1],c=e[2];return kn({1:o,2:t(P(c),J)})(u(i,r))}if(n.length>0&&r.length>0&&L(e)(n[0][1],r[0][1])){const[e,...i]=r,o=e[1],c=e[2];return kn({1:o,2:t(J,P(c))})(u(n,i))}if(n.length>0&&r.length>0){const[e,...i]=n,[o,...c]=r,a=e[1],s=e[2],f=o[2];return kn({1:a,2:t(P(s),P(f))})(u(i,c))}throw new Error("Non exhaustive match in mapOption2")},i=N((n=>n[1]))(e),o=(n=>{const r=Qn(n,(n=>D(n[2])?P({1:n[1],2:n[2].value}):J));return 0===r.length?J:P(r)})(u(On(i)([...n].map((n=>({1:n[0],2:n[1]})))),On(i)([...r].map((n=>({1:n[0],2:n[1]}))))));return T((n=>new Map(n.map((n=>[n[1],n[2]])))))(o)}function Xn(n,r,t,e){const u=N((n=>n[0]))(e),i=On(u)([...r]).reduceRight(((n,r)=>{if(Hn(n)){const e=t(r[1],n.left);return D(e)?Jn(e.value):Pn(r[0])}return n}),Jn(n));return U(i)}function Yn(n,r){return new Map([...n].map(r))}function Zn(n,r){return new Map([...n].filter(r))}function nr(n){return JSON.stringify(rr(n))}function rr(n){switch(n.kind){case"null":return ur.encode(n);case"string":return ir.encode(n);case"number":return or.encode(n);case"array":return cr.encode(n);case"object":return ar.encode(n)}}function tr(n){return null===n?ur.decode(n):"number"==typeof n?or.decode(n):"string"==typeof n?ir.decode(n):Array.isArray(n)?cr.decode(n):ar.decode(n)}const er=(n,r)=>Jn(`Failed to decode. Input was ${JSON.stringify(n)}. Codec type was ${r}`),ur={encode:n=>null,decode:n=>null===n?Pn({kind:"null",value:null}):er(n,"SimpleNull")},ir={encode:n=>n.value,decode:n=>"string"==typeof n?Pn(r(n)):er(n,"SimpleString")},or={encode:n=>n.value,decode:n=>"number"==typeof n?Pn(t(n)):er(n,"SimpleNumber")},cr={encode:n=>n.value.map(rr),decode:n=>{if(Array.isArray(n)){const r=In(Dn)(tr)(n);return Bn(e)(r)}return er(n,"SimpleArray")}},ar={encode:n=>{const r=[...n.value.entries()];return Object.assign({},...Array.from(r,(([n,r])=>({[n]:rr(r)}))))},decode:n=>{if(n&&n.constructor===Object){const r=In(Dn)((([n,r])=>w(tr(r),Bn((r=>function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n}(n,r))))))(Object.entries(n));return Bn((n=>u(new Map([...n]))))(r)}return er(n,"SimpleObject")}};function sr(n){return w(n,lr,T(nr),K((()=>"<encode error>")))}function fr(n){return T(hr)(function(n){switch(n.state.kind){case"top":return P(r(n.state.error));case"bottom":return J;case"inner":return lr(n.state.a)}}(n))}function lr(n){return function(n){switch(n.kind){case"numberGroup":case"stringGroup":return dr(n.group);case"tuple":return n.tuple.length>0}}(n.payload)?P(e(function(n,r){const t=T((n=>kn(n)(r)))(n);return K((()=>r))(t)}(T((n=>r(function(n){const r=n=>{switch(n){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},t=n=>1===n[2]?r(n[1]):r(n[1])+JSON.stringify(n[2]);return n.map(t).join("")}(n))))(n.commands),function(n){const e=n=>{switch(n.kind){case"bottom":return{kind:"null",value:null};case"top":return r(n.error);case"inner":return t(n.a)}},i=n=>Qn([pr,mr,n=>w(n,vr,u,P)],(r=>r(n))),o=n=>Qn([pr,gr,n=>w(n,vr,(n=>Yn(n,(([n,r])=>[JSON.stringify(n),r]))),u,P)],(r=>r(n)));switch(n.kind){case"tuple":return n.tuple.map(e);case"stringGroup":return i(n.group);case"numberGroup":return o(n.group)}}(n.payload)))):J}function dr(n){switch(n.kind){case"unbounded":return n.group.size>0;case"windowed":return n.group.size>0||D(n.key);case"countLimit":case"uniqueLimit":return n.group.size>0||D(n.limit)}}function pr(n){switch(n.kind){case"unbounded":return J;case"windowed":return P(r("w"));case"countLimit":return P(r(1===n.n?"x":`x${n.n}`));case"uniqueLimit":return P(r(1===n.n?"u":`u${n.n}`))}}function mr(n){switch(n.kind){case"unbounded":return J;case"windowed":return P(r(D(n.key)?n.key.value:""));case"countLimit":case"uniqueLimit":return P(r(D(n.limit)?n.limit.value:""))}}function gr(n){switch(n.kind){case"unbounded":return J;case"windowed":return D(n.key)?P(t(n.key.value)):P({kind:"null",value:null});case"countLimit":case"uniqueLimit":return D(n.limit)?P(t(n.limit.value)):P({kind:"null",value:null})}}function vr(n){switch(n.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return n.group}}function hr(n){switch(n.kind){case"array":return 0===n.value.length?{kind:"null",value:null}:1===n.value.length?hr(n.value[0]):e(n.value.map(hr));case"object":return w(Zn(n.value,(([n,r])=>"null"!==r.kind)),(n=>Yn(n,(n=>[n[0],hr(n[1])]))),u);default:return n}}function kr(n){const r=n=>{if(0===n.length)return{kind:"bottom"};const r=(n=>{if(4!==n.length)return J;const[r,t,e,u]=n;if("string"===r.kind&&"string"===t.kind&&"object"===u.kind){const n=R((n=>wr(n[1].value)&&yr(n[2].value)))({1:r,2:t});return T((n=>({prim:n[1].value,grp:n[2].value,cutoff:e,m:u.value})))(n)}return J})(n);if(D(r)){const{prim:n,grp:t,cutoff:e,m:u}=r.value,i=br(e,u,xr(t));return"string"==typeof i?a(i):c(h(jr(n),i))}const t=(n=>{if(3!==n.length)return J;const[r,t,e]=n;if("string"===r.kind&&"object"===e.kind){const n=R((n=>yr(n.value)))(r);return T((n=>({grp:n.value,cutoff:t,m:e.value})))(n)}return J})(n);if(D(t)){const{grp:n,cutoff:r,m:e}=t.value,u=br(r,e,xr(n));return"string"==typeof u?a(u):c(h(J,u))}const e=(n=>{if(2!==n.length)return J;const[r,t]=n;if("string"===r.kind&&"object"===t.kind){const n=R((n=>wr(n.value)))(r);return T((n=>({prim:n.value,m:t.value})))(n)}return J})(n);if(D(e)){const{prim:n,m:r}=e.value;return c(h(jr(n),m(s(r))))}const u=(n=>{if(1!==n.length)return J;const[r]=n;return"object"===r.kind?P({m:r.value}):J})(n);if(D(u)){const{m:n}=u.value;return c(h(J,m(s(n))))}const i=(n=>{if(n.length<1)return J;const[r,...t]=n;if("string"===r.kind){const n=R((n=>wr(n.value)))(r);return T((n=>({prim:n.value,rest:t})))(n)}return J})(n);if(D(i)){const{prim:n,rest:r}=i.value;return c(h(jr(n),qr(r)))}return c(h(J,qr(n)))},t=n=>"array"===n.kind?Gn(t)(n.value):[n];return"null"===n.kind?v({kind:"bottom"}):v(r(t(n)))}function wr(n){const r=n.split("");if(!0==(0===r.length))return!1;{const[n,...t]=r;return-1!=="pmvn".indexOf(n)&&t.every((n=>-1!=="pmvn0123456789".indexOf(n)))}}function yr(n){const r=n.split("");switch(!0){case 0===r.length:return!1;case"w"===r[0]&&void 0===r[1]:return!0;default:{const[n,...t]=r;return-1!=="ux".indexOf(n)&&-1===t.map((n=>!isNaN(parseInt(n)))).indexOf(!1)}}}function br(n,r,t){switch(n.kind){case"string":return m(t({1:P(n.value),2:r}));case"number":case"null":return p(t({1:"null"===n.kind?J:P(n.value),2:Zn(Yn(r,(([n,r])=>[Number(n),r])),(n=>!isNaN(n[0])))}));default:return"{bad cutoff}"}}function xr(n){const r=n=>r=>d(r[2],r[1],n),t=n=>r=>l(r[2],r[1],n),e=n.split("");switch(!0){case"w"===e[0]&&void 0===e[1]:return n=>f(n[2],n[1]);case"u"===e[0]&&void 0===e[1]:return r(1);case"u"===e[0]&&void 0!==e[1]:return r(parseInt(e.slice(1).join("")));case"x"===e[0]&&void 0===e[1]:return t(1);case"x"===e[0]&&void 0!==e[1]:return t(parseInt(e.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function jr(n){return T(i)(cn(Nr(n,(n=>{const r=n.split("");if(0===r.length)return J;const[t,...e]=r,u=(n=>{switch(n){case"p":return P("add");case"m":return P("mul");case"v":return P("max");case"n":return P("min");default:return J}})(t);return T((n=>{const{init:r,rest:t}=(u=n=>{return"number"==typeof(r=parseInt(n))&&isFinite(r)&&Math.floor(r)===r;var r},function(n){var r=Sn(jn(n,u))(n);return{init:r[0],rest:r[1]}})(e);var u;return{1:{1:n,2:0===r.length?1:parseInt(r.join(""))},2:t.join("")}}))(u)}))))}function Nr(n,r){const t=r(n);return K((()=>[]))(T((n=>[n[1]].concat(Nr(n[2],r))))(t))}function qr(n){return g(n.map(Lr))}function Lr(n){switch(n.kind){case"number":return c(n.value);case"string":return a(n.value);case"null":return{kind:"bottom"};case"object":return a("{object}");case"array":return a("{array}")}}const Or={strategy:(n,r,t)=>e=>{if(H(t))return r;if("delta"===n&&H(r))return J;if(H(r))return t;if(D(r)&&D(t))return e(r.value,t.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(n,r,t,e,u,i)=>{const c=zn(E(i));if("append"===n&&"add"===r)return Mn(t,e,Ir("append",u.plus));if("append"===n&&"mul"===r)return Mn(t,e,Ir("append",u.times));if("append"===n&&"max"===r)return O(c)(t,e);if("join"===n&&"add"===r)return Mn(t,e,Ir("join",O(i)));if("join"===n&&"mul"===r)return Mn(t,e,Ir("join",O(i)));if("join"===n&&"max"===r)return O(c)(t,e);if("min"===r)return Or.operation(n,"max",t,e,u,function(n){return j(((r,t)=>Kn(n.compare(r,t))))}(i));if("delta"===n&&"max"===r)return L(c)(t,e)?t:e.map(o);if("delta"===n)return Mn(t,e,((n,r)=>L(E(i))(n,r)?n:{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(n,r,t,e)=>{if("delta"===n&&"top"===t.kind&&"top"===e.kind)return L(S)(t.error,e.error)?a(t.error):{kind:"bottom"};if("delta"===n&&"bottom"===e.kind)return t;if("delta"===n&&"bottom"===t.kind)return{kind:"bottom"};if("top"===t.kind&&"top"===e.kind)return a(O(S)(t.error,e.error));if("top"===t.kind)return t;if("top"===e.kind)return e;if("inner"===t.kind&&"inner"===e.kind)return r(t.a,e.a);if("bottom"===t.kind)return e;if("bottom"===e.kind)return t;throw new Error("Non exhaustive match in extend")}},Mr={plus:(n,r)=>n+r,times:(n,r)=>n*r};function Sr(n,r,t,e){if("unbounded"===n.kind&&"unbounded"===r.kind){const u=n.group,i=r.group;return K(o)(T((n=>c(s(n))))(Vn(u,i,t,e)))}if("windowed"===n.kind&&"windowed"===r.kind){const u=n.key,i=n.group,a=r.key,s=r.group,l=O(B(e))(u,a);return K(o)(T((n=>c(f(n,l))))(Vn(i,s,t,e)))}if("countLimit"===n.kind&&"countLimit"===r.kind){const u=n.n,i=r.n;if(u===i){const i=n.limit,a=n.group,s=r.limit,f=r.group,d=O(B(e))(i,s);return K(o)(T((n=>c(l(n,d,u))))(Vn(a,f,t,e)))}return a("Non matching counts")}if("uniqueLimit"===n.kind&&"uniqueLimit"===r.kind){const u=n.n,i=r.n;if(u===i){const i=n.limit,a=n.group,s=r.limit,f=r.group,l=O(B(e))(i,s);return K(o)(T((n=>c(d(n,l,u))))(Vn(a,f,t,e)))}return a("Non matching counts")}return a("Non matching group types")}function Gr(n,r,t,e,u,i){const c=(n,r)=>({1:xn(n)(r).concat(yn(Math.max(0,n-r.length),o)),2:Nn(n)(r)}),a=(r,t,e)=>{if(0===r.length)return Or.operation(n,"max",t,e,u,i);if(r.length>0){const[o,...s]=r,f=c(o[2],t),l=f[1],d=f[2],p=c(o[2],e),m=p[1],g=p[2];return Or.operation(n,o[1],l,m,u,i).concat(a(s,d,g))}throw new Error("Non exhaustive match in recurse")};return Ln((s=n=>"bottom"===n.kind,function(n){return n.slice(jn(n,s))})(Ln(a(r,t,e))));var s}function Er(r,t,e){return K(n)(_r(r,J)(t,e))}function _r(n,r){const t=r=>(t,e)=>Or.strategy(n,t,e)(_r(n,r)),e=(e,u)=>{if(W(ln(b({1:M,2:pn}))).equals(e.commands,u.commands)){const i=((r,e,u)=>{if("stringGroup"===e.kind&&"stringGroup"===u.kind){const n=Sr(e.group,u.group,t(r),S);return G(n,(n=>m($r(n,S))))}if("numberGroup"===e.kind&&"numberGroup"===u.kind){const n=Sr(e.group,u.group,t(r),mn);return G(n,(n=>p($r(n,mn))))}if("tuple"===e.kind&&"tuple"===u.kind){const t=D(r)?r.value:[];return c(g(Gr(n,t,e.tuple,u.tuple,Mr,mn)))}throw new Error(`Non matching payload. Got ${e.kind} and ${u.kind}`)})(H(e.commands)?r:e.commands,e.payload,u.payload);return G(i,(n=>h(e.commands,n)))}throw new Error(`Non matching primitive strings. Got ${sr(e)} and ${sr(u)}`)};return(r,t)=>fr(v(Or.extend(n,e,kr(r).state,kr(t).state)))}function Ar(n,r,t){const e=T((r=>Zn(n,(([n,e])=>{return(u=t,function(n,r){return-1!==u.compare(n,r)})(n,r);var u}))))(r);return K((()=>n))(e)}function $r(n,r){switch(n.kind){case"unbounded":return n;case"windowed":return H(n.key)?n:f(Ar(n.group,n.key,r),n.key);case"countLimit":{const t=n.limit,e=n.n,u=n.group,i=(n,r)=>r<=1?J:P(r-1),o=Xn(e,u,i,r),c=O(B(r))(t,o);return l(Ar(u,c,r),c,e)}case"uniqueLimit":{const t=n.limit,e=n.n,u=n.group,i=(n,r)=>{if("object"===n.kind){const t=[...n.value.keys(),...r.keys()],u=new Set(t);return u.size>=e?J:P(u)}return J},o=Xn(new Set,u,i,r),c=O(B(r))(t,o);return d(Ar(u,c,r),c,e)}}}function Ir(n,r){return(t,e)=>Or.extend(n,((n,t)=>c(r(n,t))),t,e)}function Cr(n,r,t,e,u,i,o,c,a){switch(arguments.length){case 1:return n;case 2:return r(n);case 3:return t(r(n));case 4:return e(t(r(n)));case 5:return u(e(t(r(n))));case 6:return i(u(e(t(r(n)))));case 7:return o(i(u(e(t(r(n))))));case 8:return c(o(i(u(e(t(r(n)))))));case 9:return a(c(o(i(u(e(t(r(n))))))));default:for(var s=arguments[0],f=1;f<arguments.length;f++)s=arguments[f](s);return s}}var zr=function(n){return"Some"===n._tag},Jr={_tag:"None"},Pr=function(n){return{_tag:"Some",value:n}},Rr=function(n){return"Left"===n._tag},Fr=Object.prototype.hasOwnProperty,Wr=Rr,Br=function(n){return function(r){return Wr(r)?n(r.left):r.right}};var Tr=function(n){return function(r){return!n(r)}};var Ur=Jr,Dr=Pr;var Hr=zr;var Kr=function(n){for(var r in n)if(Fr.call(n,r))return!1;return!0};function Qr(n){return function(r){var t={},e=!1;for(var u in r)if(Fr.call(r,u)){var i=r[u];n(u,i)?t[u]=i:e=!0}return e?t:r}}var Vr=function(n){return Qr((function(r,t){return n(t)}))};var Xr=Kr;var Yr=Vr;Yr(Tr(Xr));Tr((function(n){return 0===n.length}));function Zr(n,r){const t=Object.keys(n),e=t.length,u={};for(let i=0;i<e;i++){const e=t[i],o=r(e,n[e]);Hr(o)&&(u[e]=o.value)}return u}function nt(n,r){const t=Cr((n=>Zr(n,((n,r)=>r.state?Dr({[r.checksum]:r.state}):Ur)))(n),tr,Br((n=>u(new Map)))),e=Cr(tr(r),Br((n=>u(new Map))));return Cr(function(n,r){return Er("delta",n,r)}(t,e),(n=>rr(n)))||{}}!function(n){const r=self;function t(n,t,e,u){function i(t){if("function"!=typeof r.postMessage)return n.ports[0].postMessage(t);r.postMessage(t)}if(!e)return i([t,null,u]);"undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",e),i([t,e])}r.addEventListener("message",(function(r){if(e=r,!Array.isArray(e.data)||2!==e.data.length)return;var e;const u=r.data,[i,o]=u;if("function"==typeof n)return function(n,r,e,u){const i=function(n,r){try{return{res:n(r)}}catch(n){return{err:n}}}(r,u);return Boolean(null===(o=i)||void 0===o?void 0:o.err)?t(n,e,i.err):!(c=i.res)||"object"!=typeof c&&"function"!=typeof c||"function"!=typeof c.then?t(n,e,null,i.res):void i.res.then((function(r){t(n,e,null,r)}),(function(r){t(n,e,r)}));var o,c}(r,n,i,o);t(r,i,new Error("Please pass a function into register()."))}))}((function(n){switch(n.type){case"delta":return nt(n.stateMap,n.lastSentStateMapWithChecksum);case"noop":return{}}}))})();',"Worker",void 0,void 0)}var u=n(6013),d=n(7545),l=n(7121);function g(){return(0,i.h)(new c)}const p={concat:(e,t)=>Object.assign(Object.assign({},e),t),empty:{}};class f{constructor(e,t,n,i,r,s,o,a,c){this.api=e,this.network=t,this.sessionManager=n,this.permutiveData=i,this.queryManager=r,this.metrics=s,this.userId=o,this.eventSourceId=a,this.stateWorker=c,this.DEBOUNCE_TIME=1e3,this.MAX_DEBOUNCE_TIME=5e3,this.fetchUnseenState=!0,this.scheduler=new d.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedSyncIfNotEmpty=this.scheduler.scheduleAccumulated((e=>this.syncIfNotEmpty.bind(this)("standard",e)),p),this.fetchUnseenState=!!m.includes("67cbf6c5-d926-407b-a684-a0606570ff08")||this.sessionManager.sessionHasChanged(),this.stateOffset=this.permutiveData.getData("state_offset")||0,this.lastSentStateMapWithChecksum=(0,l.Yh)(this.permutiveData.getData("internal_query_states")||{}),this.stateWorker.postMessage({type:"noop"})}sync(e){return(0,s.zG)(this.debouncedSyncIfNotEmpty(e),(e=>Promise.resolve()))}syncWithUnseen(){return this.syncIfNotEmpty("unseen").then(s.Q1)}syncIfNotEmpty(e,t){const[n,i,r]="standard"===e?[this.stateOffset,t,this.fetchUnseenState]:"unseen"===e?[this.stateOffset,this.queryManager.stateMap.value,!0]:[0,{},!0],o=this.metrics.startTimer("sdk_compute_delta_seconds",{}),a=this.stateWorker.postMessage({type:"delta",stateMap:i,lastSentStateMapWithChecksum:this.lastSentStateMapWithChecksum}).then((e=>(this.metrics.stopTimer("sdk_compute_delta_seconds",o),e))),c=e=>{this.fetchUnseenState=!1;const t=(0,s.ls)((e=>this.network.error(`Error sending state delta. Got ${JSON.stringify(e)}`,this.userId.get())),(e=>({})));return this.api.state(this.metrics,this.userId.get(),this.eventSourceId.get(),e,n,r).then((e=>function(e){return!!e}(e)?this.onStateResponse(e):{})).then((t=>(this.lastSentStateMapWithChecksum=e,t))).catch(t)};return a.then((e=>r||Object.keys(e).length>0?c(e):Promise.resolve({})))}resetSync(e,t){return(0,s.zG)(this.reset(),(n=>Promise.all([this.syncIfNotEmpty("reset"),e.segments(),t.getModels()]).then((([e,t,n])=>this.queryManager.bootstrap([]).then((e=>{this.queryManager.updateEnvironment({segments:(0,u.PM)({"1p":this.queryManager.userSegments.getAllAsMap()},t),lookalikeModels:n})}))))))}reset(){this.lastSentStateMapWithChecksum={}}onStateResponse(e){const t=(0,r.Y3)((()=>JSON.parse(e.state)),(e=>this.network.error(`Failed to parse State API response, got ${e}`,this.userId.get()))),n=e=>e?this.queryManager.updateExternalState(e):(0,s.Q1)();return(0,r.tO)(t)?(0,s.zG)(e.state_offset,(e=>this.stateOffset=e),(e=>this.permutiveData.setData("state_offset",e)),(e=>n(t.right)),(e=>t.right)):{}}}const m=["fe68d1f7-c9f4-45b3-8905-7cda73d3fd74"]},7258:(e,t,n)=>{n.d(t,{u:()=>i});class i{constructor(e,t,n,i,r){this.permutiveData=e,this.permutiveReset=t,this.userId=n,this.viewId=i,this.eventsCache=r}getPermutiveData(e){return this.permutiveData.getData(e)}setPermutiveData(e,t){return this.permutiveData.setData(e,t)}getStateSizeInBytes(){return this.permutiveData.getDataSize()+this.eventsCache.getStateSizeInBytes()}reset(){return this.permutiveReset.reset()}}},7846:(e,t,n)=>{n.d(t,{M:()=>o});var i=n(3735),r=n(6567),s=n(6013);class o{constructor(e,t,n,i){this.config=e,this.clientContext=t,this.cookies=n,this.externalData=i,this.userId=this.getOrGenerateUserId(),this.set(this.userId)}get(){return this.userId}set(e){this.cookies.setCookie(this.config.cookieName,e,!0),this.externalData.setExternalData(this.config.cookieName,e),this.clientContext.updateContext(["user_id",e]),this.userId=e}getOrGenerateUserId(){return(0,r.fS)((()=>(0,r.fS)(s.k$)(this.getUserIdFromLocalStorage())))(this.getUserIdFromCookie())}getUserIdFromCookie(){return this.getUserIdFromStorageIfValid("cookie")}getUserIdFromLocalStorage(){return this.getUserIdFromStorageIfValid("localStorage")}getUserIdFromStorageIfValid(e){const t=(0,r.DT)(s.Gz);return(0,i.zG)("cookie"===e?this.cookies.getCookie(this.config.cookieName):this.externalData.getExternalData(this.config.cookieName),r.ij,(0,r.tS)(t))}}},6919:(e,t,n)=>{n.d(t,{W:()=>r});var i=n(6013);class r{constructor(e,t){this.clientContext=e,this.config=t,t.viewId&&(0,i.Gz)(t.viewId)?this.set(t.viewId):this.generateAndSet()}get(){return this.viewId}generateAndSet(){return this.set((0,i.k$)())}set(e){return this.viewId=e,this.clientContext.updateContext(["view_id",this.viewId]),this.viewId}}},2485:(e,t,n)=>{n.d(t,{_:()=>r});var i=n(590);const r=e=>{const{logger:t,consentTracking:n}=e,r=(e,n)=>(t.debug(`DB: Failed to write ${n} as consent is revoked`),Promise.resolve(n));return e=>class extends e{constructor(){super(...arguments),this.put=(0,i.vX)(super.put.bind(this),r,n.isRevoked)}}}},3195:(e,t,n)=>{n.d(t,{S:()=>o});var i=n(3735),r=n(2485);class s{constructor(e){this.namespace=e}put(e,t){return(0,i.zG)(this.namespace.getNamespacedStorageKey(String(t)),(t=>window.localStorage.setItem(t,JSON.stringify(e))),(e=>Promise.resolve(t)))}get(e){return(0,i.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>JSON.parse(window.localStorage.getItem(e))),(e=>Promise.resolve(e)))}delete(e){return(0,i.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>Promise.resolve(window.localStorage.removeItem(e))))}deleteStore(){return Promise.resolve()}}const o=(e,t,n)=>new((0,i.zG)(s,(0,r._)({logger:t,consentTracking:n})))(e)},1057:(e,t,n)=>{n.d(t,{Ec:()=>o,_8:()=>s});var i=n(6567),r=n(6013);const s=e=>{const t=e.__tcfapi,n={type:"aborted"},s=["tcloaded","useractioncomplete"];return t?(0,r.a4)((()=>a(t,"getTCData")),(()=>a(t,"getTCData").then((e=>"loaded"===(null==e?void 0:e.cmpStatus)&&s.includes(null==e?void 0:e.eventStatus))))).then((0,i.g_)((()=>n),(e=>({type:"loaded",data:e})))):Promise.resolve({type:"missing"})},o=e=>e.gdprApplies?(0,i.G)(e.vendor.consents):i.YP,a=(e,t)=>new Promise((n=>{e(t,2,(e=>{n(e)}))}))},3351:(e,t,n)=>{n.d(t,{D:()=>i});const i={tradedesk:21,ddp:755,appnexus:32,pubmatic:76,neustar_fabrick:468}},7997:(e,t,n)=>{n.d(t,{v:()=>o});var i=n(655),r={equals:function(e,t){return e===t}},s=n(6013);class o{constructor(e,t,n,i,r,s,o,a,c,u,d){this.network=e,this.logger=t,this.api=n,this.permutiveData=i,this.messages=r,this.sessionManager=s,this.metrics=o,this.permutiveIdentity=a,this.queryManager=c,this.permutive=u,this.userId=d,this.logger.log("Enabling tpd reporting"),this.messages.on("permutive:segments:updated",(()=>{this.reportUsage()})),this.userSegments=this.permutiveData.getData("third-party-data")||{},this.lastCheckedSession=this.permutiveData.getData("third-party-data-session-id")||"",this.lastUserIdentitiesChecked=new Date}hasUserIdentityChanged(){const e=this.lastUserIdentitiesChecked<this.permutiveIdentity.getIdentitiesLastModified;return this.lastUserIdentitiesChecked=new Date,e}segments(){if(this.segmentsPromise)return this.segmentsPromise;const e=this.sessionManager.getSessionId();if(!1===this.hasUserIdentityChanged()&&this.lastCheckedSession===e)return Promise.resolve(this.userSegments);const t=(0,s.b2)();this.lastCheckedSession=e;const n=this.metrics.startTimer("sdk_get_third_party_data_task_duration_seconds",{}),i=Object.assign(Object.assign({},this.permutiveIdentity.getCustomerDefinedIdentitiesMap()),this.permutiveIdentity.getTPDIdentitiesMap());if(Object.keys(i).length>0){const e=this.permutiveIdentity.getPrioritizedIdentities(i),n=a(e);this.api.tpd(this.metrics,n).then((e=>{this.userSegments=c(e),t.resolve(this.userSegments)})).catch((e=>{this.network.error(`Third Party Data segments retrieval failed with reason: ${e}`,this.userId.get()),t.resolve({})}))}else t.resolve({});const o=t.promise.then((e=>this.userSegments));return o.then((t=>{this.permutiveData.setData("third-party-data-session-id",e),this.metrics.stopTimer("sdk_get_third_party_data_task_duration_seconds",n);const i=this.permutiveData.getData("third-party-data")||{},o=(0,s.rB)((0,s.rB)(r)),a=(0,s.rB)(r);if(0===Object.keys(i).length||!o.equals(i,t)){this.permutiveData.setData("third-party-data",this.userSegments);const e=Object.entries(t||{});(i?e.filter((([e,t])=>!a.equals(i[e]||{},t))):e).forEach((([e,t])=>this.fireSegments(e,Object.keys(t))))}})),this.segmentsPromise=o,this.segmentsPromise}reset(e){"short-circuit"!==e?(this.segmentsPromise=null,this.userSegments={}):this.segmentsPromise=null}fireSegments(e,t){this.permutive.track("ThirdPartySegments",{data_provider:e,segments:t})}reportUsage(){const e=u(this.queryManager.stateMap.value),t=(0,s.vp)(JSON.stringify(e));if(this.permutiveData.getData("third-party-data-usage")!==t&&Object.keys(e).length>0){this.permutiveData.setData("third-party-data-usage",t);const n={user_id:this.userId.get(),time:new Date,tpd_segments:e};this.api.tpdUsage(this.metrics,n)}}}const a=e=>(null==e?void 0:e.reduce(((e,t)=>(e[t.tag]=t.id,e)),{}))||{},c=e=>Object.entries(e).reduce(((e,[t,n])=>Object.assign(Object.assign({},e),{[t]:(0,s.j5)(n)})),{}),u=e=>{const t={},n=Object.keys(e),r=n.length;for(let s=0;s<r;s++){const r=n[s],o=e[r],{activations:a}=o;(0,i._T)(o,["activations"]);a&&Object.keys(a).length>0&&(t[r]=a)}return t}},4725:(e,t,n)=>{n.d(t,{C:()=>s});var i=n(655);const r=(0,n(6745).H)([[{name:"dfp",import:Promise.resolve().then(n.bind(n,9186))}],[],[],[],[],[{name:"appnexus",import:Promise.resolve().then(n.bind(n,4211))}],[],[{name:"clean_room",import:Promise.resolve().then(n.bind(n,8726))}],[],[],[],[{name:"facebook_pixel_v2",import:Promise.resolve().then(n.bind(n,8496))}],[],[],[],[],[{name:"overlays",import:Promise.resolve().then(n.bind(n,718))}],[],[],[],[],[{name:"pubmatic",import:Promise.resolve().then(n.bind(n,3423))}],[],[{name:"rubicon_ssp",import:Promise.resolve().then(n.bind(n,2404))}],[{name:"scriptrunner",import:Promise.resolve().then(n.bind(n,7926))}],[{name:"tracking_pixel",import:Promise.resolve().then(n.bind(n,2586))}],[],[{name:"twitter_pixel",import:Promise.resolve().then(n.bind(n,7791))}],[{name:"web",import:Promise.resolve().then(n.bind(n,8482))}],[]]),s=({_internals:e,logger:t,network:n,permutiveMethods:s,q:o,clientContext:a})=>{const c=Object.entries(r).map((([r,c])=>(0,i.mG)(void 0,void 0,void 0,(function*(){return t.log(`Loading addon ${r}`),(yield c).load(o,s,e,n,a)}))));return Promise.all(c)}},8726:(e,t,n)=>{n.r(t),n.d(t,{CleanRoomAddon:()=>u,load:()=>a});var i=n(9320),r=n(4011),s=n(2751),o=n(7493);const a=(e,t,n)=>{e.push({functionName:"addon",arguments:["clean_room",{}]})},c=(e,t)=>({direct_buy:(0,i.G0)(s.Eq)(e.direct_buy,t.direct_buy),programmatic:(0,i.G0)(s.Eq)(e.programmatic,t.programmatic)});class u{constructor(e){this.options=e,this.api=e.api,this.namespace=e.namespace,this.queryManager=e.queryManager,this.messages=e.messages,this.api=e.api,this.userId=e.userId,this.sessionManager=e.sessionManager;const t=this.sessionManager.sessionHasChanged();this.makeRequest(t)}makeRequest(e){this.getQueries(e).then((t=>{if(e){const e=this.getOrEmpty(t.queries);this.cacheLocally(e),this.emitUpdated(e)}else{const e=this.getOrEmpty(t.queries),n=this.getCache(),i=c(e,n);this.cacheLocally(i),this.emitUpdated(i)}}))}getQueries(e){const t=this.queryManager.userSegments.getStdAsList(),n=this.queryManager.userSegments.getAllAsList(),s=(0,i.e5)(r.Eq)(n,t);return this.api.cleanRoom(e,{stds:t,fps:s,userId:this.userId.get()})}getCache(){const e=JSON.parse(this.options.externalData.getExternalData(o.P)),t=JSON.parse(this.options.externalData.getExternalData(o.l));return{direct_buy:null!=e?e:[],programmatic:null!=t?t:[]}}cacheLocally(e){this.options.externalData.setExternalData(o.P,JSON.stringify(e.direct_buy)),this.options.externalData.setExternalData(o.l,JSON.stringify(e.programmatic))}emitUpdated(e){this.messages.emit("permutive:cleanroom:db:updated",(0,i.G0)(s.Eq)(e.programmatic,e.direct_buy))}getOrEmpty(e){var t,n;return{direct_buy:null!==(t=e.direct_buy)&&void 0!==t?t:[],programmatic:null!==(n=e.programmatic)&&void 0!==n?n:[]}}}},8311:(e,t,n)=>{n.d(t,{c:()=>r,j:()=>i});const i={},r=[]},5099:(e,t,n)=>{n.d(t,{Q:()=>r,k:()=>i});const i="_pdfps",r="&trunc=1"},5495:(e,t,n)=>{n.r(t),n.d(t,{createAddon:()=>b});var i=n(9320),r=n(6567),s=n(3735),o=n(2751);var a=n(7493),c=n(5506),u=(n(9678),n(6013)),d=n(5099);const l={liveSegments:[],classificationModelSegments:[],cleanRoomSegments:[],eligibleSegments:{}},g={segments:l};let p,f=!1;const m=(e,t)=>e.filter((e=>e in t)).map((e=>t[e])),h=({metrics:e,logger:t})=>{f||(e.track({name:"sdk_targeting_size_limit_exceeded_count",value:1,labels:{target:"dfp"}}),f=!0,t.debug("DFP has exceeded targeting limit"))},_=(e,t)=>{const{logger:n}=e;window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],(e=>{const{logger:t}=e;!f&&googletag.pubadsReady&&(p=null!=p?p:({slot:n})=>{const{getContentUrl:i}=n;i&&"function"==typeof i&&(0,s.zG)(i(),(0,o.pn)(d.Q))&&(t.debug("DFP content URL has been truncated!"),h(e),googletag.pubads().removeEventListener("slotRenderEnded",p),p=null)},googletag.pubads().addEventListener("slotRenderEnded",p))})(e),window.googletag.cmd.push((()=>{const{getTargeting:e,setTargeting:r}=googletag.pubads(),s=e("permutive")||[],o=Object.values(l.eligibleSegments).map(String).concat(l.classificationModelSegments).concat(l.cleanRoomSegments).concat("rts"),a=(0,i.uK)((e=>o.includes(e))),{left:c}=a(s),u=t.concat(c).concat("rts");n.debug("DFP setting GPT targeting to",u),r("permutive",u)}))},v=(e,t)=>{const{logger:n,metrics:i,externalData:r}=e,s=t.map(String).concat(l.classificationModelSegments).concat(l.cleanRoomSegments);if(0===s.length)return n.debug("DFP has no targeting values, skipping update"),l.liveSegments;n.debug("DFP is updating with targeting values",s);let o=JSON.stringify(s);return _({metrics:i,logger:n},s),r.setExternalData(d.k,o),(({api:e,logger:t},n)=>{(0,c.$S)("sync_segments_cookie",!1)?(t.debug(`DFP syncing segment cookie ${d.k}`),e.segmentSync({key:d.k,value:n})):t.debug("DFP sync segments cookie not enabled, skipping sync")})(e,o),n.debug("DFP live segments updated to",t),t},w=e=>{const{logger:t,messages:n,queryManager:i,externalData:r,cookies:s,network:o,userId:a}=e;n.on("permutive:segments:updated",(0,u.Z_)(o,a,(()=>{t.debug("DFP received 'permutive:segments:updated' event");const n=i.userSegments.getAllAsList();l.liveSegments=((e,t)=>{const{logger:n}=e,i=m(t,l.eligibleSegments);return(0,u.cO)(i,l.liveSegments)?(n.debug("DFP new segments are equal to live segments, skipping update"),l.liveSegments):v(e,i)})(e,n)}))),n.on("permutive:classificationmodels:db:updated",(0,u.Z_)(o,a,(n=>{t.debug("DFP received 'permutive:classificationmodels:db:updated' event"),l.classificationModelSegments=n,l.liveSegments=v(e,l.liveSegments)}))),n.on("permutive:cleanroom:db:updated",(0,u.Z_)(o,a,(n=>{t.debug("DFP received 'permutive:cleanroom:db:updated' event"),l.cleanRoomSegments=n,l.liveSegments=v(e,l.liveSegments)}))),n.on("permutive:reset",(0,u.Z_)(o,a,(()=>{t.debug("DFP received 'permutive:reset' event"),r.removeExternalData(d.k),s.deleteCookie(d.k),l.liveSegments=[]})))},b=e=>{const{logger:t,activationManager:n,queryManager:c,messages:u,externalData:p}=e;l.classificationModelSegments=(e=>(0,s.zG)((0,r.Y3)((()=>(0,s.zG)(e.getExternalData("_pclmc"),JSON.parse,r.ij,(0,r.fS)((()=>[]))))),(0,r.fS)((()=>[]))))(p),l.cleanRoomSegments=(e=>{var t,n;const r=null!==(t=JSON.parse(e.getExternalData(a.P)))&&void 0!==t?t:[],s=null!==(n=JSON.parse(e.getExternalData(a.l)))&&void 0!==n?n:[];return(0,i.G0)(o.Eq)(r)(s)})(p),l.eligibleSegments=(e=>{const t=e.getSpecializedActivations("dfp"),n={};for(const e of t.dfp)n[e]=e;for(const e of Object.keys(t.dfp_legacy)){const i=Number(e);n[i]=t.dfp_legacy[i]}return n})(n),l.liveSegments=(e=>{const t=e.getExternalData(d.k);return t?JSON.parse(t):[]})(p),t.debug("DFP initialised with segments",l);const f=c.userSegments.getAllAsList(),h=m(f,l.eligibleSegments);return l.liveSegments=v(e,h),w(e),u.emit("permutive:dfp:ready"),g}},9186:(e,t,n)=>{n.r(t),n.d(t,{load:()=>a});var i=n(64),r=n(6013),s=n(5099),o=n(8311);const a=(e,t,n)=>{e.push({functionName:"addon",arguments:["dfp",{}]});window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((()=>c(t,n)))},c=(e,t)=>{e.ready(t.makeSafe((()=>_(t.metrics))),"realtime"),v(t.externalData),y(t.userId,t.viewId),p(e),googletag.cmd.push((()=>{f(e),m(e)})),window.addEventListener("message",d(e),!1)},u=({advertiserId:e,campaignId:t,lineItemId:n,creativeId:i})=>({advertiser_id:(0,r.ke)(e),campaign_id:(0,r.ke)(t),line_item_id:(0,r.ke)(n),creative_id:(0,r.ke)(i)}),d=e=>t=>{var n;try{const i=JSON.parse(t.data);if(!i.permutive_type||"google_ad_click"!==i.permutive_type)return;const{ad_unit_path:r,creative_id:s,advertiser_id:a,order_id:c,line_item_id:d}=null!==(n=null==i?void 0:i.data)&&void 0!==n?n:{},g=u({lineItemId:d,advertiserId:a,campaignId:c,creativeId:s});let p;Object.keys(o.j).some((e=>{const{slot:t,creative_id:n}=o.j[e];if((null==t?void 0:t.ad_unit_path)===r&&n===g.creative_id)return p=o.j[e],!0})),p=null!=p?p:Object.assign(Object.assign({},g),{is_empty:!1}),l(e,p)}catch(e){}},l=(e,t)=>{i.PH&&t&&e.track("SlotClicked",t)},g=(e,t,n)=>{o.j[t]=n,h(e,n),b(e,t)},p=e=>{const t=googletag.pubadsReady&&googletag.pubads().getSlots();t&&t.forEach((t=>{const n=t.getResponseInformation();if(!n)return;const i=Object.assign(Object.assign({},u(n)),{is_empty:!1,service_name:"publisher_ads",slot:w(t)}),r=t.getSlotElementId();g(e,r,i)}))},f=e=>{googletag.pubads().addEventListener("slotRenderEnded",(t=>{const n=Object.assign(Object.assign({},u(t)),{is_empty:t.isEmpty,service_name:t.serviceName,slot:w(t.slot)});if(t.size){const[e,i]=t.size;"number"==typeof e&&"number"==typeof i&&(n.width=e,n.height=i)}const i=t.slot.getSlotElementId();g(e,i,n)}))},m=e=>{i.EW&&googletag.pubads().addEventListener("impressionViewable",(({slot:t,serviceName:n})=>{const i=t.getResponseInformation();if(!i)return;const r=Object.assign(Object.assign({},u(i)),{service_name:n,slot:w(t)});e.track("SlotViewable",r)}))},h=(e,t)=>{if(!i.CL)return;const n=t=>{e.track("SlotRendered",t)};if(!i.s$)return n(t);n(Object.assign(Object.assign({},t),{rendered_timestamp:Date.now()})),o.c.push(t)},_=e=>{let t=0;const n=googletag.pubadsReady&&googletag.pubads().getSlots();n&&n.forEach((e=>e.getResponseInformation()&&t++));const i=0===t?"sdk_targeting_realtime_success_count":"sdk_targeting_realtime_fail_count";e.track({name:i,value:1,labels:{target:"dfp"}})},v=e=>{const t=e.getExternalData(s.k),n=t?JSON.parse(t):[];googletag.cmd.push((()=>{const{getTargeting:e,setTargeting:t}=googletag.pubads(),i=e("permutive")||[];t("permutive",[...new Set([...n.map(String),...i])])}))},w=e=>{const t={ad_unit_path:e.getAdUnitPath(),slot_element_id:e.getSlotElementId()};return i.jH?Object.assign(Object.assign({},t),(()=>{const t={},n=[],i=(e,i)=>{const r="slot"===e?e=>t[e]=1:()=>{},s=i.getTargetingKeys();for(let o=0;o<s.length;o++){const a=s[o];if(void 0!==t[a]&&"service"===e)continue;const c=[],u=i.getTargeting(a);for(let e=0;e<u.length;e++)c.push(u[e].toString());c.length>0&&(r(a),n.push({key:a,value:c}))}};return i("slot",e),i("service",googletag.pubads()),{targeting_keys:n}})()):t},b=(e,t)=>{let n=!1;const i=()=>{n&&l(e,o.j[t])},r=()=>{n=!0},s=()=>{n=!1};try{window.addEventListener("blur",i);const e=document.getElementById(t);e.addEventListener("mouseover",r),e.addEventListener("mouseout",s)}catch(e){}},y=(e,t)=>{const{setTargeting:n}=googletag.pubads()}},718:(e,t,n)=>{n.r(t),n.d(t,{OverlaysAddon:()=>s,load:()=>r});var i=n(6013);const r=e=>{e.unshift({functionName:"addon",arguments:["overlays",{}]})};class s{constructor(e){const t=this;this.permutive=e.permutive,this.options=e,this.activations=this.options.activationManager.getActivations("overlays"),this.loadedImageCounts={};for(let n=0;n<this.activations.length;n++){const r=this.activations[n],s=r.getSegmentCode(),o=r.getTriggerType(),a=r.getConfig(),c=this.buildOverlayCss(a,n);document.head.insertAdjacentHTML("beforeend",c);const u=this.buildOverlayBody(a,n);document.body.insertAdjacentHTML("beforeend",u);const d=`permutive-overlay-${n}`,l=document.getElementById(d),g=l.getElementsByClassName("close")[0],p=l.getElementsByClassName("content")[0],f=()=>{l.style.visibility="hidden",l.style.opacity="0"},m=e=>{p.contains(e.target)||(f(),l.removeEventListener("click",m))};g.addEventListener("click",f),l.addEventListener("click",m);[].slice.call(l.getElementsByTagName("a")).slice(1).forEach((e=>{e.addEventListener("click",(function(){r.trackConversion({useBeacon:!0})}))}));const h=l.getElementsByTagName("form")[0];h&&h.addEventListener("submit",(function(e){e.preventDefault(),r.trackConversion({success:function(){h.submit()}})}));const _=function(e,n){t.showOverlay(e),n.trackImpression()};"EveryTime"===o?this.permutive.segment(s,(0,i.Z_)(e.network,e.userId,(e=>{e?_(d,r):this.permutive.trigger(s,"result",(function(e){e.result&&_(d,r)}))}))):"OnEntry"===o?this.permutive.trigger(s,"result",(0,i.Z_)(e.network,e.userId,(function(e){e.result&&_(d,r)}))):"OnExit"===o&&this.permutive.trigger(s,"result",(0,i.Z_)(e.network,e.userId,(function(e){e.result||_(d,r)})))}}buildOverlayCss(e,t){return'<style type="text/css">.${overlay_class}{position:fixed;top:0;bottom:0;left:0;right:0;width:100%;height:100%;background:rgba(0,0,0,0.${opacity_percentage});transition:opacity ${opacity_transition_ms}ms;visibility:hidden;opacity:0;z-index:1000000;}.${modal_class}{position:fixed;padding:10px;background:#fff;border-radius:5px;z-index:1000001}.${modal_class} .content{overflow:auto;z-index:1000002;}.${modal_class} .close{position:absolute;top:20px;right:30px;transition:all 200ms;font-size:30px;font-weight:bold;text-decoration:none;color:#333;z-index:1000003}.${modal_class} .close:hover{color:orange;}</style>'.replace(/\${overlay_class}/g,"permutive-overlay-"+t).replace(/\${modal_class}/g,"permutive-modal-"+t).replace("${opacity_percentage}",e.opacity_percentage.toString()).replace("${opacity_transition_ms}",e.opacity_transition_ms.toString())}buildOverlayBody(e,t){const n=this.options.config.windowKey;let i="";return!function(e){return void 0!==e.html}(e)?function(e){return void 0!==e.image_url&&void 0!==e.image_link}(e)&&(i='<a href="'+e.image_link+'"><img src="'+e.image_url+'"/></a>'):i=e.html,'<div id="${overlay_class}" class="${overlay_class}"><div id="${modal_class}" class="${modal_class}"><a class="close" href="javascript:;">&times;</a><div class="content">${content}</div></div></div>'.replace(/\${overlay_class}/g,"permutive-overlay-"+t).replace(/\${modal_class}/g,"permutive-modal-"+t).replace("${content}",i).replace(/<img /g,`<img onload='window[${n}].addons.overlays.loadedImage("permutive-overlay-" + num + "")' `)}showOverlay(e){const t=document.getElementById(`${e}`),n=()=>{const e=t.getElementsByTagName("div")[0],n=e.getBoundingClientRect().height,i=e.getBoundingClientRect().width;e.style.left=window.innerWidth/2-i/2+"px",e.style.top=window.innerHeight/2-n/2+"px",t.style.visibility="visible",t.style.opacity="1"},i=t.getElementsByTagName("img");if(i.length>0){let t=0;const r=()=>{t<10&&(!(e in this.loadedImageCounts)||this.loadedImageCounts[e]<i.length)?(t+=1,setTimeout(r,500)):n()};r()}else n()}loadedImage(e){e in this.loadedImageCounts?this.loadedImageCounts[e]=this.loadedImageCounts[e]+1:this.loadedImageCounts[e]=1}}},1696:(e,t,n)=>{n.d(t,{i:()=>i});class i{constructor(e,t){this.isFirstRun=void 0===e.permutiveData.getData(t),this.cachedSegmentsMembership=e.userSegments.getAllAsMap(),this.isFirstRun&&e.permutiveData.setData(t,!0),e.messages.on("permutive:reset",(()=>e.permutiveData.setData(t,!1)))}}},4211:(e,t,n)=>{n.r(t),n.d(t,{AppnexusPixel:()=>s,load:()=>o});var i=n(1696);class r extends i.i{constructor(e,t,n){super(e,n);const i=e.activationManager.getSpecializedActivations(t);this.processSpecialisedActivations(e.permutive,i)}}class s extends r{constructor(e){super(e,"appnexus","addon:appnexus")}processSpecialisedActivations(e,t){Object.entries(t).forEach((([t,n])=>{const i=parseInt(t),r=i in this.cachedSegmentsMembership;this.isFirstRun&&r?this.firePixel(n):e.trigger(i,"",(e=>{e.result&&this.firePixel(n)}))}))}firePixel(e){(new Image).src=`https://secure.adnxs.com/seg?add=${e}&t=1`}}const o=e=>{e.push({functionName:"addon",arguments:["appnexus",{}]})}},8496:(e,t,n)=>{n.r(t),n.d(t,{FacebookV2Pixel:()=>o,load:()=>a});var i=n(6013),r=n(1696);class s extends r.i{constructor(e,t,n){super(e,n);e.activationManager.getActivations(t).forEach((t=>{const n=t.getSegmentCode(),i=n in this.cachedSegmentsMembership;this.isFirstRun&&i?this.fire(t,i):e.permutive.trigger(n,"",(e=>{this.fire(t,e.result)}))}))}}class o extends s{constructor(e){super(e,"facebook_pixel_v2","addon:facebook_pixel_v2")}fire(e,t){fbq("trackCustom",!0===t?"PermutiveSegmentEntry":"PermutiveSegmentExit",{segment_id:e.getSegmentCode()}),e.trackImpression()}}const a=(e,t)=>{(0,i.a4)((()=>t.addon("facebook_pixel_v2",{})),(()=>"undefined"!=typeof fbq),{waitTimeInMs:1e3,maxAttempts:3})}},3423:(e,t,n)=>{n.r(t),n.d(t,{PubMaticAddon:()=>s,load:()=>r});var i=n(6013);const r=e=>{e.push({functionName:"addon",arguments:["pubmatic",{}]})};class s{constructor(e){const t=this;this.options=e,this.defaultDpid="156924",this.eligibleSegments={},this.liveDpidsToSegments={},this.activations=this.options.activationManager.getActivations("pubmatic");for(let e=0;e<this.activations.length;e++){const t=this.activations[e],n=t.getSegmentCode(),i=t.getConfig().dpid||this.defaultDpid;this.eligibleSegments[n]=this.eligibleSegments[n]||[],this.eligibleSegments[n].push(i)}const n=this.options.permutiveData.getData("pubmatic"),r=this.options.userSegments.getAllAsList();void 0===n?this.updateIfNecessary(r):this.liveDpidsToSegments=this.dpidsToSegments(r),this.options.messages.on("permutive:segments:updated",(0,i.Z_)(e.network,e.userId,(()=>{const e=this.options.userSegments.getAllAsList();t.updateIfNecessary(e)}))),this.options.messages.on("permutive:reset",(0,i.Z_)(e.network,e.userId,(function(){t.liveDpidsToSegments={}})))}updateIfNecessary(e){const t=this.dpidsToSegments(e);for(const e in t)t.hasOwnProperty(e)&&this.embedPixel(e,t[e]);this.options.state.setPermutiveData("pubmatic",(new Date).toISOString()),this.liveDpidsToSegments=t}embedPixel(e,t){if(!(0,i.cO)(t,this.liveDpidsToSegments[e])){const n="https:"===location.protocol?"https:":"http:",i=n+"//aud.pubmatic.com/AdServer/Artemis?uidtype=0&dpid="+e+"&segid="+t.join(",");(new Image).src=n+"//image6.pubmatic.com/AdServer/UCookieSetPug?rd="+encodeURIComponent(i)}}dpidsToSegments(e){const t={};for(let n=0;n<e.length;n++){const i=e[n];if(null!=this.eligibleSegments[i]){const e=this.eligibleSegments[i];for(let n=0;n<e.length;n++){const r=e[n];t[r]=t[r]||[],t[r].push(i)}}}return t}}},2404:(e,t,n)=>{n.r(t),n.d(t,{RubiconSspAddon:()=>o,load:()=>s});var i=n(6013);const r="_prubicons",s=e=>{e.push({functionName:"addon",arguments:["rubicon_ssp",{}]})};class o{constructor(e){this.options=e;const t=e.externalData.getExternalData(r);this.liveSegments=t?JSON.parse(t):[],this.eligibleSegments={};const n=this.options.activationManager.getSpecializedActivations("rubicon_ssp");for(let e=0;e<n.length;e++)this.eligibleSegments[n[e]]=!0;const s=this.options.userSegments.getAllAsList();this.updateIfNecessary(s),this.options.messages.on("permutive:segments:updated",(()=>{const e=this.options.userSegments.getAllAsList();this.updateIfNecessary(e)})),this.options.messages.on("permutive:reset",(0,i.Z_)(e.network,e.userId,(()=>{localStorage.removeItem(r),this.liveSegments=[]})))}updateIfNecessary(e){const t=this.filterSegments(e);(0,i.cO)(t,this.liveSegments)||this.options.externalData.setExternalData(r,JSON.stringify(t)),this.liveSegments=t}filterSegments(e){return e.filter((e=>e in this.eligibleSegments))}}},7926:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ScriptRunnerAddon:()=>ScriptRunnerAddon,load:()=>load});const load=e=>{e.unshift({functionName:"addon",arguments:["scriptrunner",{}]})};class ScriptRunnerAddon{constructor(options){this.permutive=options.permutive,this.options=options,this.network=options.network,this.activations=this.options.activationManager.getActivations("scriptrunner");for(let i=0;i<this.activations.length;i++){const activation=this.activations[i],triggerType=activation.getTriggerType(),segmentCode=activation.getSegmentCode(),run=activation=>{const script=activation.getConfig().script.replace(/impression\(\)/g,"activation.trackImpression();").replace(/conversion\(\)/g,"activation.trackConversion();");try{eval(script)}catch(e){e instanceof Error&&(e.message="Error running custom script: "+e.message,this.network.error(e,this.options.userId.get()))}};"EveryTime"===triggerType?this.permutive.segment(segmentCode,(e=>{e?run(activation):this.permutive.trigger(segmentCode,"result",(function(e){e.result&&run(activation)}))})):"OnEntry"===triggerType?this.options.queryManager.segmentEntryQueryCodes.has(segmentCode)?run(activation):this.permutive.trigger(segmentCode,"result",(function(e){e.result&&run(activation)})):"OnExit"===triggerType&&(this.options.queryManager.segmentExitQueryCodes.has(segmentCode)?run(activation):this.permutive.trigger(activation.getSegmentCode(),"result",(function(e){e.result||run(activation)})))}}}},2586:(e,t,n)=>{n.r(t),n.d(t,{PixelAddon:()=>s,load:()=>r});var i=n(6013);const r=e=>{e.push({functionName:"addon",arguments:["tracking_pixel",{}]})};class s{constructor(e){const t=this;this.options=e,this.latestStateByDomain=this.options.permutiveData.getData("addon:tracking_pixel")||{},this.activations=this.options.activationManager.getActivations("tracking_pixel");const n=0===Object.keys(this.latestStateByDomain).length;this.eligibleSegmentsForEntries={},this.eligibleSegmentsForExits={};for(let e=0;e<this.activations.length;e++){const t=this.activations[e],n=t.getTriggerType(),i=t.getSegmentCode(),r=t.getConfig().pixel_url,s=this.extractPixelType(r);"OnEntry"===n?(s in this.eligibleSegmentsForEntries||(this.eligibleSegmentsForEntries[s]={}),this.eligibleSegmentsForEntries[s][i]=t):"OnExit"===n&&(s in this.eligibleSegmentsForExits||(this.eligibleSegmentsForExits[s]={}),this.eligibleSegmentsForExits[s][i]=t)}const r=this.options.queryManager.userSegments.getAllAsList();n&&(0,i.Z_)(e.network,e.userId,(()=>this.firePixelsIfNecessary(r))),this.options.messages.on("permutive:segments:updated",(0,i.Z_)(e.network,e.userId,(()=>{const e=this.options.queryManager.userSegments.getAllAsList();t.firePixelsIfNecessary(e)}))),this.options.messages.on("permutive:reset",(0,i.Z_)(e.network,e.userId,(()=>{t.latestStateByDomain={},this.options.state.setPermutiveData("addon:tracking_pixel",{})})))}extractPixelType(e){return e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]}firePixelsIfNecessary(e){const t=Object.keys(Object.assign(Object.assign({},this.eligibleSegmentsForEntries),this.eligibleSegmentsForExits)),n={},i=this.eligibleSegmentsForEntries,r=this.eligibleSegmentsForExits;t.forEach((t=>{n[t]=n[t]||[];for(let s=0;s<e.length;s++){const o=e[s];(i[t]&&i[t][o]||r[t]&&r[t][o])&&n[t].push(e[s])}})),t.forEach((e=>{const t=n[e]||[],s=Array.isArray(this.latestStateByDomain[e])?this.latestStateByDomain[e]:[];for(let n=0;n<t.length;n++){const r=t[n];if(-1===s.indexOf(r)){const t=i[e]&&i[e][r];"OnEntry"===(null==t?void 0:t.getTriggerType())&&this.firePixel(t)}}for(let n=0;n<s.length;n++){const i=s[n];if(-1===t.indexOf(i)){const t=r[e]&&r[e][i];"OnExit"===(null==t?void 0:t.getTriggerType())&&this.firePixel(t)}}})),this.latestStateByDomain=n,this.options.state.setPermutiveData("addon:tracking_pixel",this.latestStateByDomain)}firePixel(e){(new Image).src=e.getConfig().pixel_url,e.trackImpression()}}},7791:(e,t,n)=>{n.r(t),n.d(t,{TwitterAddon:()=>r,load:()=>i});const i=e=>{e.push({functionName:"addon",arguments:["twitter_pixel",{}]})};class r{constructor(e){const t=this;this.options=e,this.firedSegments=this.options.permutiveData.getData("addon:twitter_pixel")||{},this.activations=this.options.activationManager.getActivations("twitter_pixel");const n=0===Object.keys(this.firedSegments).length;this.eligibleSegments={};for(let e=0;e<this.activations.length;e++)this.eligibleSegments[this.activations[e].getSegmentCode()]=this.activations[e];n&&this.firePixelsIfNecessary(this.options.userSegments.getAllAsList()),this.options.messages.on("permutive:segments:updated",(()=>{t.firePixelsIfNecessary(this.options.userSegments.getAllAsList())})),this.options.messages.on("permutive:reset",(()=>{t.firedSegments={},this.options.permutiveData.setData("addon:twitter_pixel",{})}))}firePixelsIfNecessary(e){for(let t=0;t<e.length;t++){const n=e[t];n in this.eligibleSegments&&!(n in this.firedSegments)&&(this.firePixel(this.eligibleSegments[n]),this.firedSegments[n]=1)}this.options.permutiveData.setData("addon:twitter_pixel",this.firedSegments)}firePixel(e){(new Image).src=`https://analytics.twitter.com/i/adsct?txn_id=${e.getConfig().audience_tag_id}&p_id=Twitter`,e.trackImpression()}}},8482:(e,t,n)=>{n.r(t),n.d(t,{WebAddon:()=>k,load:()=>y});var i=n(655),r=n(2688),s=n(70),o=n(3735),a=n(4011),c=n(6567),u=n(7209),d=n(64),l=n(6013),g=n(3760);function p(e){return Object.assign(Object.assign(Object.assign({},e&&d._v?{taxonomy_labels:"$alchemy_taxonomy_labels"}:{}),e&&d.T2?{entity_names:"$alchemy_entity_names"}:{}),{classifications_watson:{taxonomy_labels:"$taxonomy_labels"}})}var f=n(8311);function m(e,t,n,i){const r=Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},{}),e),t);n.track("Pageview",r).then((e=>{i.emit("permutive:event:pageview",e)}))}function h(e,t,n,i,r,s,o){return Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},i),n),{aggregations:Object.assign(Object.assign(Object.assign({PageviewEngagement:Object.assign({engaged_time:e},d.UW?{completion:t}:{})},d.ED?{SegmentEntry:Array.from(r),SegmentExit:Array.from(s)}:{}),d.wI?{PrebidBids:o}:{}),d.s$?{SlotsRendered:f.c}:{})})}function _(e,t,n,i,r,s,o,a,u=!0,d=c.YP){const l=h(e,t,n,i,r,s,o),g=(0,c.fS)((()=>null))(d);let p={useBeacon:u};null!==g&&(p=Object.assign(Object.assign({},p),{unprocessedData:g})),a.track("PageviewComplete",l,p)}const v=["mousemove","click","scroll"],w=["email","tel","submit","reset","button","file","password","radio","checkbox"],b=["email","e-mail","password","tel","telephone","phone","name_first","name_last","sa_zip"],y=(e,t)=>{e.push({functionName:"addon",arguments:["web",{auto_init:!0}]})};class k{constructor(e){this.dirtyState=!1,this.totalCompletion=0,this.totalEngagedTime=0,this.hasPageviewCompleteFired=!1,this.cleanupPageEngagementDetection=o.Q1,this.permutive=e.permutive,this.options=e,this.api=e.api,this.clientContext=e.clientContext,this.logger=e.logger,this.unprocessedPVC=e.unprocessedPVC,this.options.customProperties.overrideCustomProps(e.page||{});this.pageEngagementDetected=(()=>{this.dirtyState=!0,d.Uy&&this.resetTimeout()}).bind(this),m(p(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),this.enablePageEngagementDetection(),"loading"!==document.readyState?this.attachListeners():window.addEventListener("DOMContentLoaded",this.attachListeners.bind(this),!1),d.t2&&(this.timerHandle=this.registerEngagementInterval(this.getEventInterval())),d.Uy&&(this.setPageviewCompleteTimeout(d.MU),(0,l.aq)((()=>{var e,t,n,i;return _(this.totalEngagedTime,this.totalCompletion,p(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager.segmentEntryQueryCodes,this.options.queryManager.segmentExitQueryCodes,null!==(i=null===(n=null===(t=null===(e=this.options)||void 0===e?void 0:e.addons)||void 0===t?void 0:t.prebid)||void 0===n?void 0:n.trackedBids)&&void 0!==i?i:[],this.permutive)}),navigator.userAgent))}sendLinkClickEvent(e,t){if(window.location.href&&e.href){const n=0===e.href.indexOf("data:")?"NOT_URL":e.href;this.permutive.track("LinkClick",{dest_url:n},{useBeacon:t})}}sendFormSubmissionEvent(e){{const t=e.currentTarget,n={form:Object.assign(Object.assign(Object.assign({method:t.method||"GET",properties:this.serializeForm(t)},"string"==typeof t.id?{id:t.id}:{}),t.name&&"string"==typeof t.name?{name:t.name}:{}),t.action&&"string"==typeof t.action?{action:t.action}:{})};this.permutive.track("FormSubmission",n)}}trackEngagementInterval(e){return(0,o.zG)(this.updateState(e),(({engaged_time:e,total_engaged_time:t,completion:n,total_completion:i})=>function(e,t,n,i,r,s){const o=Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",engaged_time:e,total_engaged_time:t},r),{completion:n,total_completion:i});s.track("PageviewEngagement",o)}(e,t,n,i,this.options.customProperties.getCustomProps(),this.permutive)),(e=>{var t,n,i,r;return function(e,t,n,i,r,s,o,a,c,u,d){const l=h(e,t,o,a,c,u,d);return r.then((e=>{const t={props:l,sessionId:n,viewId:i,client:e};s.put(t)}))}(this.totalEngagedTime,this.totalCompletion,this.options.sessionManager.getSessionId(),this.options.viewId.get(),this.clientContext.getClient(),this.unprocessedPVC,p(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager.segmentEntryQueryCodes,this.options.queryManager.segmentExitQueryCodes,null!==(r=null===(i=null===(n=null===(t=this.options)||void 0===t?void 0:t.addons)||void 0===n?void 0:n.prebid)||void 0===i?void 0:i.trackedBids)&&void 0!==r?r:[])}))}reset(e){var t,n,r,s;return(0,i.mG)(this,void 0,void 0,(function*(){if(this.disablePageEngagementDetection(),d.Uy){const e=yield this.unprocessedPVC.getIfPresent();this.hasPageviewCompleteFired=!1,_(this.totalEngagedTime,this.totalCompletion,p(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager.segmentEntryQueryCodes,this.options.queryManager.segmentExitQueryCodes,null!==(s=null===(r=null===(n=null===(t=this.options)||void 0===t?void 0:t.addons)||void 0===n?void 0:n.prebid)||void 0===r?void 0:r.trackedBids)&&void 0!==s?s:[],this.permutive,!1,e)}this.dirtyState=!1,this.options.state.viewId.generateAndSet(),this.totalCompletion=0,this.totalEngagedTime=0,this.options.customProperties.overrideCustomProps(e.page||{}),this.updateWebOptions(e),this.enablePageEngagementDetection();const i={logger:this.logger,clientContext:this.clientContext,api:this.api,permutiveData:this.options.permutiveData,metrics:this.options.metrics,sessionManager:this.options.sessionManager,enrichers:this.options.enrichers,network:this.options.network};(0,g.h)("watson",i).then((()=>{this.options.messages.emit("permutive:enrichers:ready"),m(p(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),d.t2&&(clearInterval(this.timerHandle),this.timerHandle=this.registerEngagementInterval(this.getEventInterval()))}))}))}serializeForm(e){return[...e.getElementsByTagName("input")].filter((e=>!(!e.type||!e.id||e.disabled||e.checked||"fieldset"===e.nodeName.toLowerCase()||-1!==w.indexOf(e.type.toLowerCase())||-1!==b.indexOf(e.name.toLowerCase())))).map((e=>({name:e.name||e.id,value:e.value}))).filter((e=>e.value.length<120))}registerEngagementInterval(e){return setInterval((()=>{this.dirtyState&&this.trackEngagementInterval(e)}),1e3*e)}attachListeners(){const e=e=>"a"===e.tagName.toLowerCase(),t=n=>e(n)?(0,c.G)(n):n.parentElement?e(n.parentElement)?(0,c.G)(n.parentElement):t(n.parentElement):c.YP;d.eV&&[].slice.call(document.getElementsByTagName("form"),0).forEach((e=>{e.addEventListener("submit",(0,l.Z_)(this.options.network,this.options.userId,this.sendFormSubmissionEvent.bind(this)))})),d.qr&&document.body.addEventListener("click",(e=>{if(e.target instanceof Element){const n=t(e.target);return(0,c.g_)((()=>{}),(t=>this.sendLinkClickEvent(t,((e,t)=>!("_blank"===t.target||e.metaKey||e.ctrlKey||e.shiftKey||2===e.which||3===e.which))(e,t))))(n)}}),{capture:!0})}updateState(e){const t=Math.max(this.totalCompletion,this.getCurrentCompletion()),n=t-this.totalCompletion;return this.totalEngagedTime+=e,this.totalCompletion=t,this.dirtyState=!1,{engaged_time:e,total_engaged_time:this.totalEngagedTime,completion:n,total_completion:this.totalCompletion}}getCurrentCompletion(){if("function"==typeof this.options.getPageCompletion)return(0,o.zG)((0,s.Y3)((0,o.ls)(this.options.getPageCompletion,Number,(e=>isNaN(e)?0:e),(0,u.uZ)(a.Df)(0,1)),r.w),(0,s.EQ)((e=>(this.logger.warn("Web: invoking getPageCompletion threw an error. Got",e),0)),(e=>(this.logger.debug("Web: invoking getPageCompletion returned",e),e))));return(()=>{const e=document.documentElement.scrollHeight,t=window.pageYOffset+window.innerHeight;return t<=0?0:t>=e?1:t/e})()}setPageviewCompleteTimeout(e){return window.setTimeout((()=>{var e,t,n,i;this.hasPageviewCompleteFired||(_(this.totalEngagedTime,this.totalCompletion,p(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager.segmentEntryQueryCodes,this.options.queryManager.segmentExitQueryCodes,null!==(i=null===(n=null===(t=null===(e=this.options)||void 0===e?void 0:e.addons)||void 0===t?void 0:t.prebid)||void 0===n?void 0:n.trackedBids)&&void 0!==i?i:[],this.permutive,!1),this.hasPageviewCompleteFired=!0)}),e)}resetTimeout(){clearTimeout(this.pageviewCompleteTimeoutHandle),this.pageviewCompleteTimeoutHandle=this.setPageviewCompleteTimeout(d.MU)}registerPageEngagementCleanup(e){if("function"!=typeof e)return this.logger.warn("No page detection cleanup was registered"),null;this.cleanupPageEngagementDetection=()=>(0,s.Y3)((()=>{e(),this.cleanupPageEngagementDetection=o.Q1}),(e=>this.logger.warn("Page detection cleanup threw an error",(0,r.w)(e))))}enablePageEngagementDetection(){this.options.addPageEngagementDetection&&(0,o.zG)(this.options.addPageEngagementDetection(this.pageEngagementDetected),(e=>this.registerPageEngagementCleanup(e))),this.setDirtyEventListenersTo(!0,this.getDirtyEvents())}disablePageEngagementDetection(){this.cleanupPageEngagementDetection(),this.setDirtyEventListenersTo(!1,this.getDirtyEvents())}setDirtyEventListenersTo(e,t){const n=e?window.addEventListener:window.removeEventListener;return t.forEach((e=>n(e,this.pageEngagementDetected))),null}getDirtyEvents(){return this.options.dirtyEvents||v}getEventInterval(){return this.options.eventInterval||5}updateWebOptions(e){const t={dirtyEvents:void 0,eventInterval:void 0,addPageEngagementDetection:void 0,getPageCompletion:void 0,page:void 0};return this.options=Object.assign(Object.assign(Object.assign({},this.options),t),e)}}},7735:(e,t,n)=>{n.d(t,{J:()=>r});var i=n(416);class r{constructor(){this.replacementMap={}}register(e){this.replacementMap=Object.assign(Object.assign({},this.replacementMap),e.getReplacementMap)}enrich(e,t){return this.enrichRecursive(e,t)}enrichRecursive(e,t){const n={output:{},isFullyEnriched:!0},r=Object.keys(e);for(let s=0;s<r.length;s++){const o=r[s],a=e[o];switch(!0){case(0,i.t)(a):const[e,r]=this.isPropertyReplaceable(a);n.output[o]=e?r:a,this.replacementMap.hasOwnProperty(a)&&r===a&&t&&delete n.output[o],n.isFullyEnriched=!!e&&n.isFullyEnriched;break;case null!==a&&"object"==typeof a&&a.constructor===Object:const s=this.enrichRecursive(a,t);n.output[o]=s.output,n.isFullyEnriched=n.isFullyEnriched&&s.isFullyEnriched;break;default:n.output[o]=a}}return n}isPropertyReplaceable(e){const t=this.replacementMap[e];return[this.replacementMap.hasOwnProperty(e)&&t!==e,t]}}},3323:(e,t,n)=>{n.d(t,{oq:()=>u,tZ:()=>d});var i=n(9320),r=n(3735),s=n(6567),o=n(6013),a=n(416);class c{constructor(e,t){this.config=e,this.logger=t,this.defaultReplacementMap=this.filterReplacementMap(this.config.defaultMap),this.replacementMap=this.setReplacementMap(this.config.replacementMap)}get getReplacementMap(){return this.replacementMap}setReplacementMap(e){return this.replacementMap=Object.assign(Object.assign({},this.defaultReplacementMap),this.filterReplacementMap(e)),this.logger.debug(`enrichers[${this.config.name}]: replacement map updated`,this.getReplacementMap),this.getReplacementMap}}class u extends c{filterReplacementMap(e){return(0,r.zG)(e,o.qh,(0,i.DZ)((e=>{const[,t]=e;return(0,a.t)(t)?s.YP:(0,s.G)(e)})),(0,i.u4)({},((e,[t,n])=>(void 0===n||(e[t]=n),e))))}}n(7735);class d extends c{filterReplacementMap(e){return e}}},9967:(e,t,n)=>{n.r(t),n.d(t,{GEOIP_ADDON_KEY:()=>c,load:()=>g});var i=n(3735),r=n(6567),s=n(274),o=n(3323);const a="geoip",c="enricher:geoip",u={},d={include_geo:(null==u?void 0:u.include_geo)||!0,include_isp:(null==u?void 0:u.include_isp)||!0,include_ip_hash:(null==u?void 0:u.include_ip_hash)||!0,include_ip:(null==u?void 0:u.include_ip)||!1},l=(e,t)=>{const{$ip_geo_info_continent:n,$ip_address:c,$ip_address_hash:u}=s.U,d={$ip_geo_info_continent:n,$ip_address:c,$ip_geo_info:{city:s.U.$ip_geo_info_city,continent:s.U.$ip_geo_info_continent,country:s.U.$ip_geo_info_country,postal_code:s.U.$ip_geo_info_postal_code,province:s.U.$ip_geo_info_province},$ip_address_hash:u,$ip_isp_info:{autonomous_system_number:0,isp:s.U.$ip_isp_info_isp,autonomous_system_organization:s.U.$ip_isp_info_autonomous_system_organization,organization:s.U.$ip_isp_info_organization}},l=(0,i.zG)((0,r.Y3)((()=>({$ip_geo_info:e.geo_info,$ip_geo_info_continent:e.geo_info.continent,$ip_isp_info:e.isp_info,$ip_address:e.ip,$ip_address_hash:e.ip_hash}))),(0,r.fS)((()=>({}))));return new o.tZ({name:a,defaultMap:d,replacementMap:l},t)},g=({clientContext:e,api:t,permutiveData:n,metrics:i,sessionManager:r,enrichers:s,network:o,logger:a})=>{const u=t=>{t.isp_info&&e.updateContext(["isp",t.isp_info.isp],["organization",t.isp_info.organization],["autonomous_system_number",t.isp_info.autonomous_system_number],["autonomous_system_organization",t.isp_info.autonomous_system_organization]),t.geo_info&&e.updateContext(["continent",t.geo_info.continent],["country",t.geo_info.country],["city",t.geo_info.city],["province",t.geo_info.province],["postal_code",t.geo_info.postal_code])},g=n.getData(c);return g&&g.session_id===r.getSessionId()?(u(g.data),s.register(l(g.data,a)),Promise.resolve()):(a.debug("enrichers[geoip]: start HTTP request"),t.geoip(i,d).then((e=>(a.debug("enrichers[geoip]: end HTTP request"),u(e),n.setData(c,{session_id:r.getSessionId(),data:e}),e))).catch((e=>(o.error(`Error while registering the geoip enricher: got ${e}`),null))).then((e=>{s.register(l(e,a))})))}},3760:(e,t,n)=>{n.d(t,{Y:()=>a,h:()=>o});var i=n(655),r=n(356);const s=(0,n(6745).H)([[{name:"geoip",import:Promise.resolve().then(n.bind(n,9967))}],[{name:"watson",import:Promise.resolve().then(n.bind(n,9602))}]]),o=(e,t)=>(0,i.mG)(void 0,void 0,void 0,(function*(){const n=yield s[e];return n?(t.logger.log(`Registering enricher ${e}`),n.load(t)):t.logger.log(`Failed to register enricher ${e}, it is not enabled!`)})),a=e=>{const t=(0,r.XP)(s).map((t=>o(t,e)));return Promise.all(t).catch((t=>{const n=t instanceof Error?t:new Error(JSON.stringify(t));return e.network.error(n),[]}))}},416:(e,t,n)=>{n.d(t,{t:()=>r});var i=n(64);const r=e=>"string"==typeof e&&e[0]===i.PA},9602:(e,t,n)=>{n.r(t),n.d(t,{WATSON:()=>a,enumerateAllValidHierarchies:()=>c,load:()=>u});var i=n(655),r=n(9320),s=n(2751),o=n(3323);const a="watson";function c(e){if(!e)return[];const t=(0,r.xH)(e.filter(Boolean).map((e=>(e=>{const t=e.split("/").filter((e=>e));return t.map(((e,n)=>"/"+t.slice(0,n+1).join("/")))})(e.label))));return(0,r.jj)(s.Eq)(t)}const u=({logger:e,clientContext:t,api:n,metrics:r,enrichers:s})=>(0,i.mG)(void 0,void 0,void 0,(function*(){e.debug("enrichers[watson]: start HTTP request");const i=yield t.getClient();return n.watson(r,i.url).then((n=>{e.debug(`enrichers[${a}]: end HTTP request`),t.updateContext([a,n]),s.register(((e,t)=>{var n,i,r,s;const u={$alchemy_concepts:null==e?void 0:e.concepts,$alchemy_document_emotion:null===(i=null===(n=null==e?void 0:e.emotion)||void 0===n?void 0:n.document)||void 0===i?void 0:i.emotion,$alchemy_document_sentiment:null===(r=null==e?void 0:e.sentiment)||void 0===r?void 0:r.document,$alchemy_entities:null==e?void 0:e.entities,$alchemy_entity_names:null===(s=null==e?void 0:e.entities)||void 0===s?void 0:s.map((e=>e.text)),$alchemy_keywords:null==e?void 0:e.keywords,$alchemy_taxonomy:null==e?void 0:e.taxonomy,$alchemy_taxonomy_labels:c(null==e?void 0:e.taxonomy),$taxonomy_labels:c(null==e?void 0:e.taxonomy)};return new o.oq({name:a,defaultMap:{$alchemy_concepts:[],$alchemy_document_emotion:null,$alchemy_document_sentiment:null,$alchemy_entities:[],$alchemy_entity_names:[],$alchemy_keywords:[],$alchemy_taxonomy:[],$alchemy_taxonomy_labels:[],$taxonomy_labels:[]},replacementMap:u},t)})(n,e))})).catch((t=>{e.log(`Error while registering the ${a} enricher: got ${t}`),r.track({name:"sdk_watson_classification_fail_count",value:1,labels:{}})}))}))},8799:(e,t,n)=>{n.d(t,{X:()=>s});var i=n(655);const r=(0,n(6745).H)([[{name:"std_segments",import:Promise.resolve().then(n.bind(n,5840))}]]),s=e=>{var{logger:t}=e,n=(0,i._T)(e,["logger"]);const s=Object.entries(r).map((([e,r])=>(0,i.mG)(void 0,void 0,void 0,(function*(){return t.log(`Registering segment ${e}`),(yield r).load(Object.assign({logger:t},n))}))));return Promise.all(s)}},5840:(e,t,n)=>{n.r(t),n.d(t,{PermutiveAudienceMarketLocalStorage:()=>i,load:()=>r});class i{constructor(e,t){this.segmentsWithPAM=e,this.internals=t,this.PUSH_TO_MARKETPLACE_STD_SEGMENTS_KEY="_ppam"}storeStdSegmentsToLocalStorage(e){const t=[];for(const n in e)n in this.segmentsWithPAM&&t.push(parseInt(n));const n=JSON.stringify(t);this.internals.externalData.setExternalData(this.PUSH_TO_MARKETPLACE_STD_SEGMENTS_KEY,n)}}const r=({_internals:e})=>{const t=new i({},e);e.messages.on("permutive:std_segments:updated",(e=>{t.storeStdSegmentsToLocalStorage(e)}))}},4762:(e,t,n)=>{n.d(t,{F:()=>s});var i=n(3735),r=n(6567);class s{constructor(e,t,n){this.urls=e,this.config=t,this.network=n}identify(e,t,n){return this.reqWithMetrics(e,"sdk_http_identify_seconds")({url:this.urls.getEndpointUrl("/identify",(0,r.G)(this.config.apiVersion)),method:"POST",payload:{user_id:t,aliases:n},contentType:"text/plain",dataType:"json",withCredentials:!0})}metrics(e){return this.network.req({url:this.urls.getEndpointUrl("/internal/metrics",(0,r.G)(this.config.apiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"text",withCredentials:!1})}track(e,t,n){const i=this.getTrackUrl(t,{isFullyEnriched:n,useBeacon:!1});return this.reqWithMetrics(e,"sdk_http_events_seconds")({url:i,method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBatch(e,t){const n=this.getTrackUrl(t,{isFullyEnriched:!0,useBeacon:!1});return this.reqWithMetrics(e,"sdk_http_events_seconds")({url:n,method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBeacon(e,t){const n=this.getTrackUrl(e,{isFullyEnriched:t,useBeacon:!0});return this.network.reqWithBeacon({url:n,payload:e})}trackBatchBeacon(e){const t=this.getTrackUrl(e,{isFullyEnriched:!0,useBeacon:!0});return this.network.reqWithBeacon({url:t,payload:e})}tpd(e,t){return this.reqWithMetrics(e,"sdk_http_tpd_seconds")({url:this.urls.getEndpointUrl("/tpd",(0,r.G)(this.config.apiVersion)),method:"POST",payload:{user_id:t},contentType:"text/plain",dataType:"json",withCredentials:!1})}tpdUsage(e,t){return this.reqWithMetrics(e,"sdk_http_tpd_usage_seconds")({url:this.urls.getEndpointUrl("/tpd/usage",(0,r.G)(this.config.apiVersion)),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}reset(e){return this.reqWithMetrics(e,"sdk_http_reset_seconds")({url:this.urls.getEndpointUrl("/reset",(0,r.G)(this.config.apiVersion)),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}segmentSync(e){return this.network.req({url:`https://${this.config.segmentSyncApiHost}/sync/${e.key}`,method:"POST",payload:`value=${encodeURIComponent(e.value)}`,contentType:"application/x-www-form-urlencoded",dataType:"json",withCredentials:!0})}modelsBinary(e){return this.reqWithMetrics(e,"sdk_http_models_seconds")({url:this.getModelsUrl("binary"),method:"GET",contentType:"text/plain",dataType:"binary",withCredentials:!1})}modelsJson(e){return this.reqWithMetrics(e,"sdk_http_models_seconds")({url:this.getModelsUrl("json"),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})}state(e,t,n,i,s,o){return this.reqWithMetrics(e,"sdk_http_reset_seconds")({url:this.urls.getEndpointUrl("/state",(0,r.G)("v1.0"),[["fetch_unseen",JSON.stringify(o)]]),method:"POST",payload:{group_id:t,event_source_id:n,state:JSON.stringify(i),last_seen_offset:s},contentType:"text/plain",dataType:"json",withCredentials:!1})}cleanRoom(e,t){return this.network.req({url:this.urls.getAdvertiserEndpointUrl("/segment",(0,r.G)(this.config.advertiserApiVersion),[["new-session",e.toString()]]),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}classificationModels(e){return this.network.req({url:this.urls.getClassificationModelsEndpointUrl("/segment",(0,r.G)(this.config.classificationModelsApiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"json",withCredentials:!1})}appnexus(e){return this.network.req({url:e,method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}pxid(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}queries(){const e={addons:{dfp:{activations:{dfp:[],dfp_legacy:{}},auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!1,track_slot_clicked:!1,track_targeting_keys:!1,sync_segments_cookie:!1},web:{auto_init:!1,track_pageview_engagement:!0,track_pageview_complete:!0,track_form_submission:!1,track_link_click:!1,engagement_edge_only:!0,segment_transition_edge_only:!1}},queries:{queries:{},eventSegments:{},eventsLookup:[],literalsLookup:[],stateSyncReplays:[],propertiesLookup:[]},queries_metadata:{}};return this.network.req({url:`https://${this.config.cdnBaseUrl}/queries/67cbf6c5-d926-407b-a684-a0606570ff08-amp.json`,withCredentials:!1,dataType:"json",method:"GET"}).catch((()=>e))}pxidReset(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}geoip(e,t){const n=[];return t.include_geo&&n.push(["include","geo"]),t.include_isp&&n.push(["include","isp"]),t.include_ip&&n.push(["include","ip"]),t.include_ip_hash&&n.push(["include","ip_hash"]),this.reqWithMetrics(e,"sdk_http_geoip_seconds")({url:this.urls.getEndpointUrl("/geoip",(0,r.G)(this.config.apiVersion),n),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})}watson(e,t){return this.reqWithMetrics(e,"sdk_http_watson_seconds")({url:this.urls.getEndpointUrl("/watson",(0,r.G)(this.config.apiVersion)),method:"POST",contentType:"text/plain",dataType:"json",withCredentials:!1,payload:{url:t,classify:!0}})}getSocioDemoPredictions(e){return this.network.req({method:"POST",url:this.urls.getEndpointUrl("/demographic/infer/v3",(0,r.G)(this.config.apiVersion)),dataType:"json",payload:e,withCredentials:!1})}reqWithMetrics(e,t){const n=e.startTimer(t,{});return r=>this.network.req(r).then((r=>(0,i.zG)(e.stopTimer(t,n),(e=>r))))}getTrackUrl(e,t){const{isFullyEnriched:n,useBeacon:i}=t,s=Array.isArray(e),o=!n;return this.urls.getEndpointUrl(s?"/batch/events":"/events",(0,r.G)(this.config.apiVersion),[["enrich",JSON.stringify(o)],["sdkp",JSON.stringify(!i)]])}getModelsUrl(e){const t=`https://${this.config.cdnBaseUrl}`;switch(e){case"binary":return`${t}/models/v2/67cbf6c5-d926-407b-a684-a0606570ff08-models.bin`;case"json":return`${t}/models/67cbf6c5-d926-407b-a684-a0606570ff08-models.json`}}}},550:(e,t,n)=>{n.d(t,{XO:()=>r,bk:()=>o,kJ:()=>i,mh:()=>s,sv:()=>a});const i=e=>Object.assign({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{}},c(e)),r=e=>Object.assign({id:e.id||null,name:e.name,time:(u(e.time)?e.time:new Date).toISOString(),properties:e.properties||{}},c(e)),s=(e,t)=>Object.assign({id:e.id,time:new Date(e.time),name:t.name,properties:t.properties},c(t)),o=e=>void 0!==e.request_id,a=e=>void 0!==e.properties,c=e=>Object.assign(Object.assign({},e.session_id?{session_id:e.session_id}:{}),e.view_id?{view_id:e.view_id}:{}),u=e=>isFinite(e)&&e instanceof Date},8110:(e,t,n)=>{n.d(t,{s:()=>r});var i=n(6567);class r{constructor(e){this.config=e,this.PATH_JOINER_Q="?",this.PATH_JOINER_A="&"}getEndpointUrl(e,t,n=[]){return this.getUrl("base",e,t,n)}getSdkErrorsUrl(e,t){return this.getUrl("sdk-errors",e,t,[])}getAdvertiserEndpointUrl(e,t,n=[]){return this.getUrl("adv",e,t,n)}getClassificationModelsEndpointUrl(e,t,n=[]){return this.getUrl("clm",e,t,n)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrlPrefix(e){switch(e){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm"}}getUrl(e,t,n,r){const s=this.getUrlPrefix(e),o=(0,i.g_)((()=>""),(e=>`/${e}`))(n),a=`${this.config.apiProtocol}://${this.config.apiHost}${s}${o}${t}`;return this.makeUrlWithQueryParams(a,r.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,t){const n=t.map((([e,t])=>`${e}=${t}`)).join(this.PATH_JOINER_A),i=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${i}${n}`}}},590:(e,t,n)=>{n.d(t,{NY:()=>p,vX:()=>w,D1:()=>v});var i=n(655),r=n(3735),s=n(3195);const o="permutive-consent";var a=n(6567);const c=(e,t)=>(0,r.zG)((0,a.ij)(t),(t=>!1===e&&(0,a.Wi)(t)?{isValid:!0,consentData:u()}:(e=>(0,a.pC)(e)&&(e=>null!==e&&"object"==typeof e)(e.value)&&(e=>{var t;return!0===e.opt_in&&"string"==typeof e.token&&(null===(t=e.token)||void 0===t?void 0:t.length)>0})(e.value))(t)?{isValid:!0,consentData:t.value}:{isValid:!1,consentData:d()})),u=()=>({opt_in:!0,token:o}),d=()=>({opt_in:!1,token:""}),l=e=>{return(0,r.ls)((t=e,e=>(0,r.zG)(c(t.consentRequired,e),(({consentData:e,isValid:n})=>(t.consentDatabase.put(e,o),n)))),(({logger:e,messages:t})=>n=>{const i=n?"given":"revoked";return e.log("Consent has been",i),t.emit(`permutive:consent:${i}`),n})(e));var t},g=e=>(t,n)=>{e.on("permutive:consent:revoked",t),e.on("permutive:consent:given",n)},p=(e,t,n,{consentRequired:a})=>(0,i.mG)(void 0,void 0,void 0,(function*(){const i={isRevoked:()=>!1,listenForConsent:r.Q1},u=(0,s.S)(n,t,i),{giveConsent:d,revokeConsent:p,isRevoked:f}=(()=>{let e=!0;return{revokeConsent:()=>e=!1,giveConsent:()=>e=!0,isRevoked:()=>!1===e}})(),m=yield u.get(o);c(a,m).isValid?d():p();const h={isRevoked:f,listenForConsent:g(e)};h.listenForConsent(p,d);return{consentTracking:h,consentValidation:l({consentDatabase:u,consentRequired:a,logger:t,messages:e}),consentDatabase:u}}));var f=n(9320),m=n(70),h=n(5151),_=n(6992);const v=e=>{const{partialTagWithKey:t}=e,n=t.key;var i;window[n].consent=(i=e,(0,r.ls)(i.consentModule.consentValidation,(e=>e?(0,_.H)(i)():null)));const s=(0,a.EQ)((()=>{return t={consentDatabase:e.consentModule.consentDatabase,consentRequired:e.tag.config.consentRequired},(0,r.zG)((0,r.a9)(t.consentDatabase.get(o)),(0,h.UI)((e=>c(t.consentRequired,e).isValid)));var t}),h.of);return(0,r.zG)((0,r.zG)((({consentModule:e,tag:t})=>{const n=(0,f.Ew)((function(e){return"consent"===e.functionName}))(t.q);return(0,a.UI)((t=>e.consentValidation(t.arguments[0])))(n)})(e),s),(0,h.UI)((e=>e?(0,m.F2)(!0):(0,m.t$)("No consent to run on the page"))))},w=(e,t,n)=>(...i)=>(n()?t:e)(...i)},4910:(e,t,n)=>{n.d(t,{S:()=>L});var i=n(3735),r=n(6567),s=n(9006),o=n(655),a=n(4011),c=n(5857),u=n(64),d=n(550);const l=(e,t)=>{switch(g(e.event,e.isEventFullyEnriched,t)){case"immediate":return f(e);case"memoryOnly":return m(e);case"response":return h(e);case"deferred":return _(e);case"never":return v(e)}},g=(e,t,n)=>n?"deferred":p(e.name,t),p=(e,t)=>P.has(e)?"memoryOnly":q.has(e)?"never":t?"immediate":"response",f=({event:e,requestData:t,requestOptions:n,queryManager:r,eventsBatch:s,stateSync:u,metrics:d,logger:l})=>(0,o.mG)(void 0,void 0,void 0,(function*(){const[o,{segmentsEntered:g,segmentsExited:p}]=yield k(e,d,r,l),f=(0,c.e5)(a.Eq)((0,c.G0)(a.Eq)(new Set(t.segments),g),p);return l.log(`Adding ${e.name} to batch, with segments`,f),Promise.all([s.add(Object.assign(Object.assign({},t),{segments:[...f]}),n,"immediate"),u.sync(o)]).then(i.Q1)})),m=({event:e,metrics:t,queryManager:n,logger:r})=>k(e,t,n,r).then(i.Q1),h=({requestData:e,requestOptions:t,queryManager:n,eventsCache:i,eventHandler:r,api:s,metrics:o,logger:a})=>s.track(o,e,!1).then((r=>w(r,e,t,i,o,n,a))).then((({event:e,error:t})=>E(r,e,t))),_=({event:e,isEventFullyEnriched:t,requestData:n,api:s,eventHandler:o})=>Promise.all([s.trackBeacon(n,t),E(o,e,r.YP)]).then(i.Q1),v=({requestData:e,requestOptions:t,eventsBatch:n})=>n.add(e,t,"never"),w=(e,t,n,i,r,s,o)=>(0,d.bk)(e)?b(e,t,n):y(e,t,n,i,r,s,o),b=(e,t,n)=>{const s={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,id:null,time:new Date};return(0,i.zG)(n.error(e.error.message),(t=>Promise.resolve({event:s,error:(0,r.G)(e)})))},y=(e,t,n,s,o,a,c)=>{const u=(0,d.sv)(e)?(0,d.kJ)(Object.assign(Object.assign({},e),{session_id:t.session_id,view_id:t.view_id})):(0,d.mh)(e,t);return k(u,o,a,c).then((e=>(0,i.zG)(n.success(u),(e=>s.add(u,{persistOnDisk:!0})),(e=>({event:u,error:r.YP})))))},k=(e,t,n,r)=>D.has(e.name)?(0,i.zG)(t.startTimer("sdk_events_querylanguage_seconds",{}),(s=>n.process(e,!0).then((n=>(0,i.zG)(t.stopTimer("sdk_events_querylanguage_seconds",s),(t=>r.log("Processing event",e,"caused the following update",n)),(e=>n)))))):Promise.resolve([{},{segmentsEntered:new Set,segmentsExited:new Set}]),E=(e,t,n)=>{e.newEvent((0,d.XO)(t),(0,r.fS)((()=>null))(n))},q=new Set(["ThirdPartySegments","SlotRendered"]),P=new Set([...u.D0?["PageviewEngagement"]:[],...u.ED?["SegmentEntry","SegmentExit"]:[]]),S=new Set(["PageviewComplete"]),D=new Set(["!UpdateThirdPartyData","LinkClick","Pageview","PageviewComplete","PageviewEngagement","SlotClicked","SlotViewable"]);var O=n(1057),M=n(3351);var T=n(6013);class x{constructor(e,t={}){this.wait_prev=t.wait_prev||!1,this.block_next=t.block_next||!1,this.started=!1,this.complete=!1,this.task=e}waits(){return this.wait_prev}blocks(){return this.block_next}execute(e){this.started=!0,this.task((()=>{this.complete=!0,e()}))}}var C=n(3812);class I{constructor(e,t,n,i,r,s,o,a,c,u,d,l,g,p,f,m,h,_,v,w,b,y,k,E,q,P,S,D,O,M,T,x,C){this.namespace=e,this.logger=t,this.api=n,this.eventHandler=i,this.activationManager=r,this.sessionManager=s,this.metrics=o,this.viewId=a,this.userId=c,this.network=u,this.enrichers=d,this.clientContext=l,this.unprocessedPVC=g,this.eventsBatch=p,this.queryManager=f,this.stateSync=m,this.eventsCache=h,this.taskQueue=_,this.identities=v,this.permutiveReset=w,this.messages=b,this.addons=y,this.trace=k,this.permutiveRealtime=E,this.state=q,this.customProperties=P,this.config=S,this.permutiveData=D,this.externalData=O,this.cookies=M,this.tpd=T,this.models=x,this.identitiesIngestor=C,this.initialisedAddons=[],this.triggerListeners=[]}identify(e){this.logger.log("<call> identify",e);const t=(0,T.b2)(),n=this.identities.parseCustomerDefinedIdentities(e),r=Object.assign(Object.assign({},this.identities.getIdentitiesMap()),n.reduce(((e,{tag:t,id:n,priority:i,expiry:r})=>Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({id:n},void 0!==i?{priority:i}:{}),void 0!==r?{expiry:r}:{})})),{})),o=Object.values(r).map((e=>e.id)),a=this.identities.getPrioritizedIdentities(r);if("string"==typeof e&&(0,s.Bt)("67cbf6c5-d926-407b-a684-a0606570ff08","67cbf6c5-d926-407b-a684-a0606570ff08",o,window.location.hostname,this.userId.get()))return t.resolve(),t.promise;return this.taskQueue.add(new x((e=>{this.logger.log("<task> identify ",n);const r=this.userId.get();this.api.identify(this.metrics,this.userId.get(),a).then((s=>(this.identities.setIdentities(n),this.tpd.reset("short-circuit"),(0,C.WI)(this.logger,this.queryManager,this.tpd,this.trace),s.user_id===r?(0,i.zG)(this.logger.log("<done> identify ",n),(t=>e()),(e=>t.resolve())):this.permutiveReset.reset().then((e=>(0,i.zG)(this.userId.set(s.user_id),(e=>this.eventsCache.reset()),(e=>this.stateSync.resetSync(this.tpd,this.models))))).then((i=>{this.logger.log("<done> identify",n),e(),t.resolve()}))))).then((e=>this.identitiesIngestor.ingestIfEligible(n).catch((e=>this.network.error(`Couldn't ingest identities, got ${e}`,this.userId.get())))))}),{wait_prev:!0,block_next:!0})),t.promise}on(e,t){return this.eventHandler.addListener({name:e,callback:t,once:!1})}once(e,t){return this.eventHandler.addListener({name:e,callback:t,once:!0})}track(...e){var t,n,r;const[s,o,a]=[e[0],e[1]||{},e[2]||{}],c=this.trace.startSpan("track_event");this.logger.log("<call> track",s);const u=(0,T.b2)();if(!this.api)return this.network.error("The API hasn't been loaded."),u.reject(),u.promise;const d=null!==(t=a.unprocessedData)&&void 0!==t?t:{},g=null!==(n=d.sessionId)&&void 0!==n?n:this.sessionManager.getSessionId(),p=null!==(r=d.viewId)&&void 0!==r?r:this.viewId.get(),f={success:a.success||(e=>{}),error:a.error||((e,t)=>{})};return this.taskQueue.add(new x((e=>{this.logger.log("<task> track",s);const{output:t,isFullyEnriched:n}=this.enrichers.enrich(o,P.has(s));this.metrics.track({name:n?"sdk_event_enrichment_success_count":"sdk_event_enrichment_fail_count",value:1,labels:{}});return(d.client?Promise.resolve(d.client):this.clientContext.getClient()).then((r=>{var d;const m=Object.assign(Object.assign({},t),{client:o.client?(0,T.PM)(r,o.client):r}),h={user_id:this.userId.get(),name:s,segments:this.queryManager.userSegments.getAllAsList(),properties:m,session_id:g,view_id:p},_={name:s,properties:m,session_id:g,view_id:p,time:new Date};return((e,t)=>l(e,t).then((t=>S.has(e.event.name)?e.unprocessedPVC.reset():(0,i.Q1)())))({event:_,requestData:h,isEventFullyEnriched:n,requestOptions:f,logger:this.logger,queryManager:this.queryManager,stateSync:this.stateSync,eventsCache:this.eventsCache,eventHandler:this.eventHandler,metrics:this.metrics,eventsBatch:this.eventsBatch,api:this.api,unprocessedPVC:this.unprocessedPVC},null!==(d=a.useBeacon)&&void 0!==d&&d).then((t=>{this.logger.log("<done> track",_.name),u.resolve(_),e(),c.finish()})).catch((e=>{f.error(e),this.network.error(e,this.userId.get())}))}))}))),u.promise}trigger(e,t,n){const i=(0,T.b2)();this.logger.log("<call> trigger",e),this.triggerListeners=this.triggerListeners||[];return this.taskQueue.add(new x((t=>{this.logger.log("<task> trigger",e);const r=this.messages.on("permutive:query:changed",(function(t){t.queryCode===e&&(n(t.result),i.resolve(t.result))}));this.triggerListeners.push(r),this.logger.log("<done> trigger",e),t()}))),i.promise}query(){return Promise.resolve({result:!1})}segment(e,t){const n=(0,T.b2)();this.logger.log("<call> segment",e);return this.taskQueue.add(new x((i=>{var r;this.logger.log("<task> segment",e);const s=this.queryManager.stateMap.value[e];s&&(t((null===(r=null==s?void 0:s.result)||void 0===r?void 0:r.result)||!1),n.resolve()),this.logger.log("<done> segment",e),i()}))),n.promise}segments(e,t="all"){const n=(0,T.b2)();this.logger.log("<call> segments");return this.taskQueue.add(new x((i=>{this.logger.log("<task> segments ("+t+")");const r=r=>{e(r),n.resolve(r),this.logger.log("<done> segments ("+t+")"),i()};"dfp"===t?this.messages.once("permutive:dfp:ready",(()=>{r(this.addons.dfp.segments.liveSegments)})):r(this.queryManager.userSegments.getAllAsList())}))),n.promise}reset(){return Promise.all([this.api.reset(this.metrics),this.identities.reset(),this.permutiveReset.reset(),this.stateSync.reset(),this.unprocessedPVC.reset(),this.queryManager.bootstrap([])]).then((([e])=>(0,i.zG)(this.userId.set(e.id),(e=>this.eventsCache.reset())))).then((()=>{this.messages.emit("permutive:reset")})).catch((e=>{this.network.error(`Error resetting internals. Got ${e}`)}))}addon(e,t){if(-1===this.initialisedAddons.indexOf(e)){this.initialisedAddons.push(e);const i=Object.assign(Object.assign({},t),{permutive:this,api:this.api,activationManager:this.activationManager,network:this.network,clientContext:this.clientContext,logger:this.logger,unprocessedPVC:this.unprocessedPVC,metrics:this.metrics,namespace:this.namespace,state:this.state,queryManager:this.queryManager,messages:this.messages,userId:this.userId,viewId:this.viewId,customProperties:this.customProperties,config:this.config,permutiveData:this.permutiveData,sessionManager:this.sessionManager,userSegments:this.queryManager.userSegments,addons:this.addons,enrichers:this.enrichers,externalData:this.externalData,cookies:this.cookies});switch(e){case"web":Promise.resolve().then(n.bind(n,8482)).then((e=>this.addons.web=new e.WebAddon(i))).then((()=>this.messages.emit("permutive:web:ready")));break;case"publishers":case"nativo":case"freewheel":case"eyeota_pixel":case"rubicon":case"pinterest_pixel":case"local_storage":case"appnexus_adserver":case"prebid":case"classification_models":case"gam_log":case"socio_demo_cohorts":case"smart":case"tradedesk":case"ddp":case"dbm":0;break;case"overlays":Promise.resolve().then(n.bind(n,718)).then((e=>this.addons.overlays=new e.OverlaysAddon(i)));break;case"scriptrunner":Promise.resolve().then(n.bind(n,7926)).then((e=>this.addons.scriptrunner=new e.ScriptRunnerAddon(i)));break;case"dfp":Promise.resolve().then(n.bind(n,5495)).then((e=>this.addons.dfp=e.createAddon(i)));break;case"facebook_pixel_v2":Promise.resolve().then(n.bind(n,8496)).then((e=>this.addons.facebook_pixel_v2=new e.FacebookV2Pixel(i)));break;case"rubicon_ssp":Promise.resolve().then(n.bind(n,2404)).then((e=>this.addons.rubicon_ssp=new e.RubiconSspAddon(i)));break;case"tracking_pixel":Promise.resolve().then(n.bind(n,2586)).then((e=>this.addons.tracking_pixel=new e.PixelAddon(i)));break;case"twitter_pixel":Promise.resolve().then(n.bind(n,7791)).then((e=>this.addons.twitter_pixel=new e.TwitterAddon(i)));break;case"clean_room":Promise.resolve().then(n.bind(n,8726)).then((e=>this.addons.clean_room=new e.CleanRoomAddon(i)));break;case"appnexus":Promise.resolve().then(n.bind(n,4211)).then((e=>this.addonIfTCFConsent({Addon:e.AppnexusPixel,key:"appnexus"},i)));break;case"pubmatic":Promise.resolve().then(n.bind(n,3423)).then((e=>this.addonIfTCFConsent({Addon:e.PubMaticAddon,key:"pubmatic"},i)))}}else"web"===e&&!0!==t.auto_init&&((e,t,n,i)=>new Promise(((s,o)=>{var a;const c=(0,r.Y3)(e);if((0,r.pC)(c))return s(c.value);n.once(t,(()=>(0,r.g_)((()=>o(new Error(`Error after waiting for event ${t}`))),s)((0,r.Y3)(e))));const u=null!==(a=null==i?void 0:i.timeout)&&void 0!==a?a:1e4;setTimeout((()=>o(new Error(`Event ${t} was not received within the timeout period ${u}ms`))),u)})))((()=>this.addons.web.reset(t)),"permutive:web:ready",this.messages).catch((e=>{this.network.error(`Got error while trying to reset web. Got ${e.message}`,this.state.userId.get())}))}addonIfTCFConsent(e,t){const n=()=>{switch(e.key){case"tradedesk":this.addons.tradedesk=new e.Addon(t);break;case"ddp":this.addons.ddp=new e.Addon(t);break;case"appnexus":this.addons.appnexus=new e.Addon(t);break;case"pubmatic":this.addons.pubmatic=new e.Addon(t)}},s=t=>t[M.D[e.key]]?n():(0,i.Q1)();return(0,O._8)(window).then((e=>{switch(e.type){case"missing":return n();case"aborted":return(0,i.Q1)();case"loaded":return(0,i.zG)((0,O.Ec)(e.data),(0,r.g_)(n,s))}}))}ready(e,t="initialised"){const n=(0,T.b2)(),i=()=>{e(),n.resolve()};switch(t){case"initialised":this.permutiveRealtime.isReady()?i():this.messages.on("permutive:ready",i);break;case"realtime":this.permutiveRealtime.isRealtime()?i():this.messages.once("permutive:realtime",i)}return n.promise}}var A=n(590);const j=e=>{const{logger:t,consentTracking:n}=e,r=(...e)=>(t.debug("Methods[track]: Cannot track as consent is revoked"),Promise.resolve(null));return e=>class extends e{constructor(...e){super(...e),this.track=(0,A.vX)(super.track.bind(this),r,n.isRevoked),n.listenForConsent((()=>this.consentRevoked()),i.Q1)}consentRevoked(){return(0,o.mG)(this,void 0,void 0,(function*(){return yield this.sessionManager.reset(),this.reset()}))}}},L=(e,t,n,r,s,o,a,c,u,d,l,g,p,f,m,h,_,v,w,b,y,k,E,q,P,S,D,O,M,T,x,C,A,L)=>new((0,i.zG)(I,j({consentTracking:L,logger:t})))(e,t,n,r,s,o,a,c,u,d,l,g,p,f,m,h,_,v,w,b,y,k,E,q,P,S,D,O,M,T,x,C,A)},7281:(e,t,n)=>{n.d(t,{Oc:()=>d,l9:()=>l});var i=n(1828),r=n(70),s=n(3735);class o{constructor(){}setItem(e,t){return(0,s.zG)(JSON.stringify(t),(t=>window.sessionStorage.setItem(e,t)))}getItem(e){return(0,s.zG)(window.sessionStorage.getItem(e),JSON.parse)}}class a{constructor(){}setItem(){}getItem(){return null}}const c=e=>(0,r.tS)((e=>1===e.size?(0,r.F2)(null):(0,r.t$)("Iterable Maps not supported")))((e=>"function"==typeof e.Map?(0,r.F2)(new e.Map([["a",1]])):(0,r.t$)("Maps not supported"))(e)),u=e=>(0,r.tS)((e=>2===e.size?(0,r.F2)(null):(0,r.t$)("Iterable Sets not supported")))((e=>"function"==typeof e.Set?(0,r.F2)(new e.Set([1,2])):(0,r.t$)("Sets not supported"))(e)),d=e=>(0,s.zG)((0,i.gz)(r.G5)(c(e),u(e),(e=>{const t=["QuotaExceededError","QUOTA_EXCEEDED_ERR","NS_ERROR_DOM_QUOTA_REACHED"];return(0,r.Y3)((()=>{const t="_permutive_ls_test";e.localStorage.setItem(t,t),e.localStorage.removeItem(t)}),(n=>e.localStorage&&0===e.localStorage.remainingSpace||t.some((e=>-1!==String(n).indexOf(e)))?"localStorage quota exceeded":"localStorage not supported"))})(e),(e=>e.Worker&&e.Blob?(0,r.F2)(null):(0,r.t$)("WebWorkers not supported"))(e)),(e=>(0,r.UI)(s.Q1)(e))),l=e=>{const t=(0,r.Y3)((()=>{const t="_permutive_ls_test";e.sessionStorage.setItem(t,t),e.sessionStorage.getItem(t),e.sessionStorage.removeItem(t)}),(e=>"sessionStorage not supported"));return(0,s.zG)(t,(0,r.g_)((()=>new a),(()=>new o)))}},3812:(e,t,n)=>{n.d(t,{eS:()=>g,$A:()=>l,Yj:()=>c,co:()=>u,N7:()=>d,MA:()=>p,WI:()=>f});var i=n(655),r=n(3735),s=n(6567),o=n(9006);n(6013);const a=e=>(0,i.mG)(void 0,void 0,void 0,(function*(){const{logger:t,network:n,q:r,api:s,userId:o,identities:a,reset:c,eventsCache:u,metrics:d,identitiesIngestor:l,messages:g}=e,p=o.get(),f=()=>r.findIndex((e=>"identify"===e.functionName)),m=e=>{if(e<0)return[];const t=r.splice(e,1)[0];return a.parseCustomerDefinedIdentities(t.arguments[0]).concat(m(f()))},h=m(f()),_=a.getIdentitiesMap(),v=h.reduce(((e,{tag:t,id:n,priority:i,expiry:r})=>Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({id:n},r?{expiry:r}:{}),void 0!==i?{priority:i}:{})})),{}),w=Object.assign(Object.assign({},_),v);t.log("Starting identification... Identities are:",w);const b=a.getPrioritizedIdentities(w),y=yield s.identify(d,p,b).then((e=>{return n={user_id:e.user_id},(0,i.mG)(void 0,void 0,void 0,(function*(){const e=n.user_id;return e===p?{identityChanged:!1}:(t.log(`Got different user id from API: ${e}`),yield c.reset(),o.set(e),yield u.reset(),{identityChanged:!0,userId:e})}));var n})).catch((e=>(0,i.mG)(void 0,void 0,void 0,(function*(){return n.error(`Couldn't set identity for user ${p}. Got ${e}`,p),{identityChanged:!1}})))).finally((()=>{a.setIdentities(Object.entries(w).map((([e,{id:t,priority:n,expiry:i}])=>Object.assign(Object.assign({tag:e,id:t},i?{expiry:i}:{}),void 0!==n?{priority:n}:{}))))}));return l.ingestIfEligible(b).catch((e=>n.error(`Couldn't ingest identities, got ${e}`,y.identityChanged?y.userId:p))),g.emit("permutive:user:ready"),t.log("<done> init identity ",y),y}));function c(e,t,n,i,r,s){e.log("Identity has changed"),s.track({name:"sdk_identity_changed_total",value:1,labels:{}});const o=t.startSpan("ss_reset_sync");return n.resetSync(i,r).then((()=>o.finish()))}function u(e,t,n,o,a,c,u){e.log("Identity hasn't changed"),u.track({name:"sdk_identity_remained_total",value:1,labels:{}});const d=a.hasNewOrModifiedQueries,l=t.startSpan(`qm_bootstrap_${d}`);return c.resetIfNeeded().then((e=>e?(u.track({name:"sdk_reset_hearst_count",value:1,labels:{}}),n.reset()):Promise.resolve())).then((()=>d?c.all().then((e=>a.bootstrap(e))):a.bootstrap([]))).then((()=>o.getIfPresent())).then((0,s.g_)((()=>e.log("No unprocessed PVC data detected")),(t=>(0,r.zG)(e.log("Unprocessed PVC data detected",t),(e=>{const{props:n}=t;return{props:n,unprocessedData:(0,i._T)(t,["props"])}}),(({props:e,unprocessedData:t})=>n.track("PageviewComplete",e,{unprocessedData:t}).finally((()=>o.reset()))))))).then((()=>l.finish()))}function d(e,t){return(0,o.Bt)("67cbf6c5-d926-407b-a684-a0606570ff08","67cbf6c5-d926-407b-a684-a0606570ff08",e.identities.getPrioritizedIdentities(e.identities.getIdentitiesMap()).map((e=>e.id)),window.location.hostname,e.state.userId.get())?t.reset():Promise.resolve()}function l(e,t,n,i,r,s,o,c,u,d,l,g,p,f,m,h){const _=r.startSpan("identify");return a({logger:t,network:n,api:i,q:e,userId:c,identities:u,reset:d,eventsCache:l,metrics:g,identitiesIngestor:p,messages:f}).catch((e=>({identityChanged:!1}))).then((e=>(_.finish(),e)))}function g(e,t){e.context=t.getContext()}function p(e,t,n,i){const r=i.startSpan("lal_http");return n.getModels().then((n=>{e.log("Loaded lookalike models"),r.finish();const s=i.startSpan("update_env_lal");return t.updateLAL(n).then((()=>s.finish()))}))}function f(e,t,n,i){const r=i.startSpan("tpd_http");return n.segments().then((n=>{e.log("Loaded TPD segments"),r.finish();const s=i.startSpan("update_env_tpd");return t.updateTPD(n).then((()=>s.finish()))}))}},6785:(e,t,n)=>{function i(e,t,n,i,r){r.debug("set SDK as ready"),e.setAsReady(),t.emit("permutive:api:ready"),n.track({name:"sdk_local_storage_byte_total",value:i.getStateSizeInBytes(),labels:{}}),n.track({name:"sdk_query_states_byte_total",value:e.getStateSizeInBytes(),labels:{}})}n.d(t,{R:()=>i})},3368:(e,t,n)=>{n.d(t,{$o:()=>h,uU:()=>v,je:()=>_});var i=n(70),r=n(3735),s=n(2688),o=n(6567),a=n(3629);class c{constructor(e,t,n){this.urls=e,this.config=t,this.logger=n,this.clientErrorsSent=0}req(e){return this.reqImpl(e).then((e=>(0,r.MZ)(e)))}reqWithBeacon({url:e,payload:t}){return null===navigator||void 0===navigator?void 0:navigator.sendBeacon(e,JSON.stringify(t))}error(e,t,n){return this.config.sendClientErrors&&this.clientErrorsSent<3?this.errorNetwork(e,t,n).catch((0,r.ls)(s.w,(e=>this.logger.error(e)))):(0,r.zG)((0,s.w)(e),(e=>this.logger.error(e)),(e=>Promise.resolve()))}errorNetwork(e,t,n){var i,r,s,c,u,d,l,g;const p=e instanceof Error?e:new Error(JSON.stringify(e)),f={error_message:null!==(r=null===(i=null==p?void 0:p.message)||void 0===i?void 0:i.toString())&&void 0!==r?r:"",stack_trace:null===(s=null==p?void 0:p.stack)||void 0===s?void 0:s.split("\n")},m=t?{user_id:t}:{},h=Object.assign({platform:"web",sdk_version:"v19.9.0",ql_runtime_version:"v4.3.0",timestamp:null!=n?n:new Date,domain:null!==(u=null===(c=null===window||void 0===window?void 0:window.location)||void 0===c?void 0:c.hostname)&&void 0!==u?u:"",url:(0,a.bk)(null===(d=null===window||void 0===window?void 0:window.location)||void 0===d?void 0:d.href),referrer:(0,a.bk)(null===document||void 0===document?void 0:document.referrer),user_agent:null!==(l=null===navigator||void 0===navigator?void 0:navigator.userAgent)&&void 0!==l?l:"",error_message:null!==(g=f.error_message)&&void 0!==g?g:String(e),stack_trace:f.stack_trace},m);return this.req({url:this.urls.getSdkErrorsUrl("/errors",(0,o.G)(this.config.sdkErrorsApiVersion)),method:"POST",payload:[h],contentType:"text/plain",dataType:"text",withCredentials:!1})}reqImpl(e){const{url:t,dataType:n,contentType:r,method:s,withCredentials:o,timeout:a}=e;return new Promise(((c,u)=>{const d=new XMLHttpRequest,l="POST"===e.method?"string"==typeof(g=e.payload)?g:JSON.stringify(g):null;var g;d.onload=function(){if(this.status>=400){const e="text"===this.responseType||""===this.responseType?this.responseText:"Couldn't access response text";u(`Failed ajax request. Status code was ${this.status}. ${e}`)}else if("json"===n){const e=this.responseText?(0,i.Y3)((()=>JSON.parse(this.responseText)),(e=>`Failed to parse response as JSON. Response was ${JSON.stringify(this.responseText)}. Got ${e}`)):(0,i.F2)(null);(0,i.g_)(u,c)(e)}else c("text"===n?this.responseText:this.response)},d.onerror=()=>u(new Error("Network request failed")),d.ontimeout=()=>u(new Error("Network request timed out")),d.open(s,t,!0),r&&d.setRequestHeader("content-type",r),d.timeout=a||d.timeout,d.withCredentials=o||d.withCredentials,d.responseType="binary"===n?"arraybuffer":d.responseType,d.send(l)}))}}var u=n(6013);const d="__permutive.",l="__permutiveConfigQueryParams";const g={default:{windowKey:"permutive",environment:"default",apiHost:"api.permutive.com",apiKey:"",cdnBaseUrl:"cdn.permutive.com",pxidHost:"prmutv.co",apiVersion:"v2.0",sdkErrorsApiVersion:"v2",advertiserApiVersion:"v2",classificationModelsApiVersion:"v1",apiProtocol:"https",loggingEnabled:!1,tracingEnabled:!1,requestTimeout:5e3,cookieDomain:"."+(0,a._Y)(window.location.hostname),cookieName:"permutive-id",cookieExpiry:function(){const e=new Date;return e.setMonth(e.getMonth()+6),e.toUTCString()}(),eventsTTLInDays:null,permutiveDataMiscKey:"permutive-data-misc",permutiveDataModelsKey:"permutive-data-models",permutiveDataQueriesKey:"permutive-data-queries",permutiveDataTPDKey:"permutive-data-tpd",permutiveDataEnrichersKey:"permutive-data-enrichers",stateNamespace:"",sendClientErrors:!0,metricsSamplingPercentage:20,eventsCacheLimitBytes:25e5,segmentSyncApiHost:"67cbf6c5-d926-407b-a684-a0606570ff08.partner.permutive.app",consentRequired:!1,sdkType:"stable",viewId:null,localStorageDebouncedKeys:["internal_query_states"],localStorageWriteDelay:1e3,localStorageWriteMaxDelay:1500},production:{},development:{apiProtocol:"http",loggingEnabled:!0,tracingEnabled:!0,sendClientErrors:!1}},p=e=>{const t={loggingEnabled:!0,sendClientErrors:!0,consentRequired:!0,tracingEnabled:!0},n={eventsTTLInDays:!0,eventsCacheLimitBytes:!0,metricsSamplingPercentage:!0,requestTimeout:!0,localStorageWriteDelay:!0,localStorageWriteMaxDelay:!0};return Object.keys(e).reduce(((i,r)=>{if(t.hasOwnProperty(r)){const t="true"===e[r];return Object.assign(Object.assign({},i),{[r]:t})}if(n.hasOwnProperty(r)){const t=Number(e[r]);return isNaN(t)?i:Object.assign(Object.assign({},i),{[r]:t})}return Object.assign(Object.assign({},i),{[r]:e[r]})}),{})},f=e=>Object.entries(e).reduce(((e,[t,n])=>{if(!(0===t.indexOf(d)))return e;const i=t.replace(d,"");return[...e,[i,n]]}),[]),m=(e,t,n)=>{var i;const s=(0,r.zG)(t,f,(e=>(0,u.m8)(...e)),p),o=null!==(i=g[e.environment])&&void 0!==i?i:{};return(0,u.PM)(g.default,o,e,((e,t)=>{const n=t.getItem(l),i=(0,u.PM)(n,e);return t.setItem(l,i),i})(s,n))},h=e=>{var t,n;const s="67cbf6c5-d926-407b-a684-a0606570ff08",o=void 0!==(null===(t=e[s])||void 0===t?void 0:t.q)&&void 0!==(null===(n=e[s])||void 0===n?void 0:n.config)?s:"permutive";return(0,r.zG)(e[o],(0,i.ij)("Can't find permutive tag on the page"),(0,i.UI)((e=>({tag:e,key:o}))))},_=({tag:e,key:t},n,i)=>Object.assign(Object.assign({},e),{config:m(Object.assign(Object.assign({},e.config),{windowKey:t}),n,i)}),v=(e,t,n)=>new c(e,t,n)},6112:(e,t,n)=>{n.d(t,{F:()=>s});var i=n(7112),r=n(6830);const s=(0,i.Y3)((()=>{const e=(0,r.e)();return e.postMessage({type:"noop"}),Promise.resolve(e)}),(e=>`Failed to start QueryWorker. Got ${e}`))},9848:(e,t,n)=>{n.d(t,{LA:()=>a});var i=n(9320),r=n(7209),s=n(6013);const o=(e,t,{network:n,state:i})=>{n.error(`Function "permutive.${t.functionName}" caused an error: ${e.message}`,i.userId.get())};function a(e,t,n,a,l,g){const p=function(e){const t=(0,i.uK)((e=>-1!==u.indexOf(e.functionName)))(e),n=t.right,o=t.left.filter((e=>"consent"!==e.functionName)),a=(0,r.Zt)(((e,t)=>c(e)&&c(t)?(0,s.lW)(d).compare(e.arguments[0],t.arguments[0]):(0,s.lW)(u).compare(e.functionName,t.functionName))),l=(0,i.DY)(a)(n);return l.concat(o)}(e),f=g.startSpan("queued_methods"),m={network:l,state:t.state};p.forEach((e=>{try{(e=>{e.functionName in n?n[e.functionName].apply(a,e.arguments):o(new Error("Does not exist."),e,m)})(e)}catch(t){const n=t instanceof Error?t:new Error("Unknown error.");o(n,e,m)}})),f.finish()}const c=e=>"addon"===e.functionName,u=["identify","trigger","addon","track"],d=["dfp","appnexus_adserver","web"]},5791:(e,t,n)=>{n.d(t,{y:()=>v});var i=n(655),r=n(2688),s=n(9320),o=n(3735),a=n(356),c=n(274),u=n(6013),d=n(9384),l=function(e,t){return function(){return t(e())}},g=function(e){return function(t){return l(t,e)}},p=o.a9,f=(o.yR,o.yR,d.F4,d.Xl,function(){return Math.random()});function m(e,t){return(0,o.zG)(f,g((function(n){return Math.floor((t-e+1)*n+e)})))}g((function(e){return e<.5}));class h{constructor(e,t,n,r,s){this.sdkInitTimestamp=e,this.api=t,this.messages=n,this.logger=r,this.enrichers=s,this.environment="web",this.pendingMetrics=[],this.pendingTimers={},this.messages.on("permutive:ready",(()=>{const e=m(3e4,9e4),t=n=>window.setTimeout((()=>(0,i.mG)(this,void 0,void 0,(function*(){const n=(yield this.processPending())?5e3:e();t(n)}))),n);t(5e3),(0,u.aq)((()=>{this.processPending.bind(this)}),navigator.userAgent)})),this.track({name:"sdk_initialisation_start_time_seconds",value:e/1e3,labels:{}})}track(e){this.pendingMetrics.push(e)}trackTimeSinceInit(e,t){const n=(performance.now()-this.sdkInitTimestamp)/1e3;this.logger.debug("metrics: timer stopped",e,n),this.track({name:e,value:n,labels:t})}startTimer(e,t){const n=performance.now(),i=this.generateRandomKey(e);return this.pendingTimers[i]={startTime:n,labels:t},i}stopTimer(e,t){const n=this.pendingTimers[t];if(n){const i=(performance.now()-n.startTime)/1e3;this.logger.debug("metrics: timer stopped",e,i),this.track({name:e,value:i,labels:n.labels}),delete this.pendingTimers[t]}}processPending(){return(0,i.mG)(this,void 0,void 0,(function*(){if((0,s.xb)(this.pendingMetrics))return!0;const e=this.pendingMetrics;this.pendingMetrics=[];const t=()=>(0,o.zG)({},(e=>(0,a.dx)("continent",c.U.$ip_geo_info_continent)(e)),(e=>this.enrichers.enrich(e,!0).output));try{return yield this.api.metrics({context:Object.assign(Object.assign({},t()),{environment:this.environment,events_count:0,segments_count:0}),items:e}),!0}catch(t){return this.logger.error(`Metrics: Request failed from error ${(0,r.w)(t).message}`,e),this.pendingMetrics=[...this.pendingMetrics,...e],!1}}))}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}}class _{track(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}function v(e,t,n,i,r,s,o){return(null!==(a=i.getData("metricsEnabled"))&&void 0!==a?a:(()=>{const e=Math.random()<=n.metricsSamplingPercentage/100;return i.setData("metricsEnabled",e),e})())?new h(e,t,r,s,o):new _;var a}},6992:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>initialiseWebSDK,f:()=>initialisationSequence});var tslib__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(655),fp_ts_Either__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(70),fp_ts_function__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(3735),fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(7112),_core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8764),_core_activations_PermutiveAddons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5506),_core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(427),_core_crypto_AESCrypto__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(1228),_core_crypto_HashcodeDigest__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4572),_core_events_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(2923),_core_events_PermutiveEventsBatch__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4314),_core_events_PermutiveEventsCacheWeb__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3562),_core_events_PermutiveUnprocessedPVCWeb__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3530),_core_identity_NeustarFabrickIdentitiesIngestor__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5182),_core_identity_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(9006),_core_identity_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(7043),_core_internals_CookiesWeb__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9175),_core_internals_ExternalDataWeb__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(3858),_core_internals_PermutiveInternals__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(6715),_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__(4828),_core_models_PermutiveModelsNoOp__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(4165),_core_queries_QueryManagerWeb__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(6830),_core_session_SessionManager__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(3253),_core_state_PermutiveDataStoreWeb__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(2747),_core_state_PermutiveEventSourceId__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(1823),_core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_54__=__webpack_require__(7738),_core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(1728),_core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(4327),_core_state_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(1714),_core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(7258),_core_state_PermutiveUserId__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(7846),_core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(6919),_core_store_LocalStorageWeb__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(3195),_core_tcf_TCF__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(1057),_core_third_party_PermutiveThirdPartyWeb__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(7997),_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(4725),_dynamic_enrichment_Enrichers_GlobalEnricher__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(7735),_dynamic_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(3760),_dynamic_std_segments_RegisterSegmentModules__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(8799),_http_PermutiveApi__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(4762),_http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__(8110),_core_internals_SDKMessages__WEBPACK_IMPORTED_MODULE_55__=__webpack_require__(8167),_utils_event_handler_PermutiveEventHandler__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(9409),_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(6013),_utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(7749),_utils_Trace__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(998),_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(3629),_Consent__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(590),_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(7281),_initialisation_identity__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(3812),_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(6785),_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(3368),_initialisation_queryWorkerInit__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(6112),_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(9848),_initialisation_setupMetrics__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(5791),_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(4910);const sdkInitTimestamp=window.performance.now(),initialiseWebSDK=({queryWorker,tag,partialTagWithKey,urls,network,namespace,messages,logger,consentModule})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.Y3)((()=>(0,tslib__WEBPACK_IMPORTED_MODULE_33__.mG)(void 0,void 0,void 0,(function*(){const windowKey=partialTagWithKey.key,permutiveGlobal=window[windowKey],config=tag.config,trace=new _utils_Trace__WEBPACK_IMPORTED_MODULE_34__.l(config),sdkReadySpan=trace.startSpan("sdk_ready"),{consentTracking,consentValidation}=consentModule;window[windowKey].consent=consentValidation;const context=(0,_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_24__.PM)(tag.context||{},{path:window.location.pathname,url:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_35__.bk)(window.location.href),referrer:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_35__.bk)(document.referrer)}),createInternalsSpan=trace.startSpan("internals"),eventHandler=new _utils_event_handler_PermutiveEventHandler__WEBPACK_IMPORTED_MODULE_36__.b,cookieStore=(0,_core_internals_CookiesWeb__WEBPACK_IMPORTED_MODULE_8__.S)(namespace,config,logger,consentTracking),localStorage=(0,_core_store_LocalStorageWeb__WEBPACK_IMPORTED_MODULE_17__.S)(namespace,logger,consentTracking),externalData=(0,_core_internals_ExternalDataWeb__WEBPACK_IMPORTED_MODULE_9__.S)(namespace,logger,consentTracking),clientContext=new _core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_37__.z(context),viewId=new _core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_16__.W(clientContext,config),userId=new _core_state_PermutiveUserId__WEBPACK_IMPORTED_MODULE_15__.M(config,clientContext,cookieStore,externalData),permutiveData=(0,_core_state_PermutiveDataStoreWeb__WEBPACK_IMPORTED_MODULE_12__.S)(config,namespace,logger,network,userId,consentTracking),eventSourceId=new _core_state_PermutiveEventSourceId__WEBPACK_IMPORTED_MODULE_13__.$(permutiveData),enrichers=new _dynamic_enrichment_Enrichers_GlobalEnricher__WEBPACK_IMPORTED_MODULE_21__.J,api=new _http_PermutiveApi__WEBPACK_IMPORTED_MODULE_38__.F(urls,config,network),metrics=(0,_initialisation_setupMetrics__WEBPACK_IMPORTED_MODULE_30__.y)(sdkInitTimestamp,api,config,permutiveData,messages,logger,enrichers),identityProviderEnv={permutive:permutiveGlobal,network,api,userId,metrics,permutiveData,messages,config,cookies:cookieStore,logger},identities=new _core_identity_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_7__.lg(metrics,trace,permutiveData,identityProviderEnv,logger),identityPromise=identities.prepareThirdPartyIdentities(),models=new _core_models_PermutiveModelsNoOp__WEBPACK_IMPORTED_MODULE_39__.p,identitiesIngestor=new _core_identity_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_40__.z,permutiveRealtime=new _core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_41__.u(metrics,messages),sessionManager=yield _core_session_SessionManager__WEBPACK_IMPORTED_MODULE_11__.S.initialise(cookieStore,localStorage),_internals=new _core_internals_PermutiveInternals__WEBPACK_IMPORTED_MODULE_42__.P(logger,network,userId,viewId,messages,sessionManager,cookieStore,externalData);_internals.metrics=metrics,_internals.identities=identities;const eventsCache=new _core_events_PermutiveEventsCacheWeb__WEBPACK_IMPORTED_MODULE_4__.P(config,namespace,logger,network,trace,metrics,userId,consentTracking),eventsBatch=new _core_events_PermutiveEventsBatch__WEBPACK_IMPORTED_MODULE_3__.c(eventHandler,api,metrics,userId,network,eventsCache),unprocessedPVC=new _core_events_PermutiveUnprocessedPVCWeb__WEBPACK_IMPORTED_MODULE_5__.w(config,namespace,metrics,new _core_crypto_AESCrypto__WEBPACK_IMPORTED_MODULE_43__.E,logger,consentTracking,network),customProperties=new _core_events_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_44__.X,queryManagerTransitionDebounceTime=1e3,queryManagerTransitionMaxDebounceTime=1e4,queryManager=new _core_queries_QueryManagerWeb__WEBPACK_IMPORTED_MODULE_10__.x(logger,network,permutiveData,sessionManager,messages,customProperties,permutiveRealtime,permutiveGlobal,queryWorker,trace,userId,viewId,externalData,queryManagerTransitionDebounceTime,queryManagerTransitionMaxDebounceTime);_internals.queryManager=queryManager;const permutiveReset=new _core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_45__.a(config,localStorage,logger,queryManager,permutiveData,eventSourceId,cookieStore,externalData),taskQueue=new _utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_46__.i(messages),stateSync=new _core_state_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_14__.N(api,network,sessionManager,permutiveData,queryManager,metrics,userId,eventSourceId,(0,_core_state_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_14__.e)()),thirdParty=new _core_third_party_PermutiveThirdPartyWeb__WEBPACK_IMPORTED_MODULE_19__.v(network,logger,api,permutiveData,messages,sessionManager,metrics,identities,queryManager,permutiveGlobal,userId),activationManager=new _core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_0__.v(logger,permutiveGlobal,clientContext),state=new _core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_47__.u(permutiveData,permutiveReset,userId,viewId,eventsCache);_internals.state=state;const permutiveMethods=(0,_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_31__.S)(namespace,logger,api,eventHandler,activationManager,sessionManager,metrics,viewId,userId,network,enrichers,clientContext,unprocessedPVC,eventsBatch,queryManager,stateSync,eventsCache,taskQueue,identities,permutiveReset,messages,_internals.addons,trace,permutiveRealtime,state,customProperties,config,permutiveData,externalData,cookieStore,thirdParty,models,identitiesIngestor,consentTracking);createInternalsSpan.finish(),[].forEach((s=>{(0,fp_ts_Either__WEBPACK_IMPORTED_MODULE_48__.Y3)((()=>eval(s)),(e=>{network.error(Object.assign(Object.assign({},e),{message:`Error running custom script ${s}`}),userId.get())}))})),_internals.addBlocker("permutive:queries:initialised"),_internals.messages.on("permutive:blockers:empty",(()=>{permutiveGlobal.identify=permutiveMethods.identify.bind(permutiveMethods),permutiveGlobal.on=permutiveMethods.on.bind(permutiveMethods),permutiveGlobal.once=permutiveMethods.once.bind(permutiveMethods),permutiveGlobal.track=permutiveMethods.track.bind(permutiveMethods),permutiveGlobal.trigger=permutiveMethods.trigger.bind(permutiveMethods),permutiveGlobal.query=permutiveMethods.query.bind(permutiveMethods),permutiveGlobal.segment=permutiveMethods.segment.bind(permutiveMethods),permutiveGlobal.segments=permutiveMethods.segments.bind(permutiveMethods),permutiveGlobal.reset=permutiveMethods.reset.bind(permutiveMethods),permutiveGlobal.ready=permutiveMethods.ready.bind(permutiveMethods),permutiveGlobal.addon=permutiveMethods.addon.bind(permutiveMethods),permutiveGlobal.context=clientContext.getContext(),permutiveGlobal.addons=_internals.addons,permutiveGlobal.config=config,permutiveRealtime.setAsReady(),(0,_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_29__.LA)(permutiveGlobal.q,_internals,permutiveGlobal,permutiveMethods,network,trace)}));const loadAddonsSpan=trace.startSpan("load_addons");(0,_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_20__.C)({_internals,logger,network,permutiveMethods,q:permutiveGlobal.q,clientContext}),loadAddonsSpan.finish();const loadEnrichersSpan=trace.startSpan("load_enrichers"),enricherEnv={api,clientContext,logger,permutiveData,metrics,sessionManager:_internals.sessionManager,enrichers,network},enricherPromises=(0,_dynamic_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_22__.Y)(enricherEnv);enricherPromises.then((()=>{messages.emit("permutive:enrichers:ready"),loadEnrichersSpan.finish()})),(0,_dynamic_std_segments_RegisterSegmentModules__WEBPACK_IMPORTED_MODULE_23__.X)({_internals,config,logger,api,clientContext,enrichers});const resolveIdentify=()=>(0,tslib__WEBPACK_IMPORTED_MODULE_33__.mG)(void 0,void 0,void 0,(function*(){yield identityPromise,yield(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_26__.N7)(_internals,permutiveMethods);const e=yield(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_26__.$A)(permutiveGlobal.q,logger,network,api,trace,permutiveMethods,unprocessedPVC,userId,identities,permutiveReset,eventsCache,metrics,identitiesIngestor,messages,stateSync,externalData);return yield e.identityChanged?(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_26__.Yj)(logger,trace,stateSync,thirdParty,models,metrics):(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_26__.co)(logger,trace,permutiveMethods,unprocessedPVC,queryManager,eventsCache,metrics),e})),init=()=>(0,tslib__WEBPACK_IMPORTED_MODULE_33__.mG)(void 0,void 0,void 0,(function*(){(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_26__.eS)(permutiveGlobal,clientContext),(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_26__.MA)(logger,queryManager,models,trace),(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_26__.WI)(logger,queryManager,thirdParty,trace),yield enricherPromises,(0,_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_49__.R)(queryManager,messages,metrics,state,logger),sdkReadySpan.finish()}));return resolveIdentify().then(init)}))),(e=>`Exception during initialisation. Got ${e}`)),initialisationSequence=(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_50__.zG)(fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.Do,(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.ak)("support",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.Uo)((0,_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_51__.Oc)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.ak)("queryWorker",(()=>_initialisation_queryWorkerInit__WEBPACK_IMPORTED_MODULE_28__.F)),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.ak)("sessionStorage",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.F2)((0,_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_51__.l9)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.ak)("partialTagWithKey",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.Uo)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_27__.$o)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.ak)("queryParams",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.F2)((0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_35__.zM)()))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.ak)("tag",(({partialTagWithKey:e,queryParams:t,sessionStorage:n})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.F2)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_27__.je)(e,t,n)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.ak)("logger",(({tag:e})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.F2)((0,_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_52__.SX)(e.config)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.ak)("urls",(({tag:e})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.F2)(new _http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_53__.s(e.config)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.ak)("network",(({tag:e,urls:t,logger:n})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.F2)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_27__.uU)(t,e.config,n)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.ak)("namespace",(({tag:e})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.F2)(new _core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_54__.L(e.config)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.ak)("messages",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.F2)(new _core_internals_SDKMessages__WEBPACK_IMPORTED_MODULE_55__.Q))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.ak)("consentModule",(({tag:e,namespace:t,logger:n,messages:i})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.fF)((()=>(0,_Consent__WEBPACK_IMPORTED_MODULE_25__.NY)(i,n,t,e.config))))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.ak)("consent",(e=>(0,_Consent__WEBPACK_IMPORTED_MODULE_25__.D1)(e))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_32__.tS)((e=>initialiseWebSDK(e))))},6013:(e,t,n)=>{n.d(t,{Fi:()=>D,G6:()=>S,Gz:()=>k,PM:()=>p,PQ:()=>O,Z_:()=>C,a4:()=>h,aq:()=>b,b0:()=>E,b2:()=>m,cO:()=>M,eu:()=>v,fl:()=>P,hk:()=>l,j5:()=>x,k$:()=>y,ke:()=>w,lW:()=>T,m8:()=>q,qh:()=>g,rB:()=>_,vp:()=>f});var i=n(4268),r=n(3735),s=n(6567),o=n(7209),a=n(6017),c=n(356),u=n(2751),d=n(5857);const l=(0,c.hX)((0,a.ff)(c.xb)),g=e=>Object.entries(e);function p(...e){return e.reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{})}function f(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}(0,a.ff)(u.xb);function m(){let e,t;return{promise:new Promise(((n,i)=>{e=n,t=i})),reject:t,resolve:e}}function h(e,t,n={}){const{waitTimeInMs:i,exponentialBackOff:o,maxAttempts:a}=p({waitTimeInMs:50,exponentialBackOff:!1,maxAttempts:20},n);let c=0;const u=n=>new Promise((i=>Promise.resolve(t()).then((t=>t?Promise.resolve(e()).then((e=>i((0,s.G)(e)))):(0,r.zG)(c++,(e=>e<a?setTimeout((()=>i(u(n*(o?2:1)))),n):i(s.YP)))))));return u(i)}function _(e){const t={equals:(t,n)=>t[0]===n[0]&&e.equals(t[1],n[1])},n=(0,d.Eh)(t);return(0,i.Uz)((e=>new Set(Object.entries(e))))(n)}function v(e,t){const n=Object.create(null);for(const i of t)n[i]=e[i];return n}function w(e){if("string"==typeof e){const t=+e;if(!isNaN(t))return t}return e}function b(e,t){const n=t=>{if(!i&&t)return i=!0,e()};let i=!1;["blur","visibilitychange"].forEach((e=>{window.addEventListener(e,(()=>n(document.hidden&&function(e){return/Mobi|Android/i.test(e)}(t))))})),["beforeunload","pagehide"].forEach((e=>{window.addEventListener(e,(()=>n(!0)))}))}function y(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function k(e){return 36===e.length&&/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(e)}function E(e,t){const n=Object.keys(e),i=n.length,r={};for(let o=0;o<i;o++){const i=n[o],a=t(i,e[i]);(0,s.pC)(a)&&(r[i]=a.value)}return r}function q(...e){const t={},n=e.length;for(let i=0;i<n;i++){const[n,r]=e[i];t[n]=r}return t}function P(e,t){return E(e,((e,n)=>t(e)?(0,s.G)(n):s.YP))}function S(e){return/^((?!chrome|android).)*safari/i.test(e)}function D(e){}function O(e){return new Promise((t=>{setTimeout((()=>{Promise.resolve(e()).then(t)}),0)}))}function M(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function T(e){return(0,o.Zt)(((t,n)=>{const i=e.indexOf(t),r=e.indexOf(n);switch(!0){case-1===i&&-1===r:return 0;case-1!==i&&-1===r:return-1;case-1===i&&-1!==r:return 1;default:return i<=r?-1:1}}))}function x(e){return e.reduce(((e,t)=>(e[t]=!0,e)),{})}function C(e,t,n){return(...i)=>{try{return n(...i)}catch(n){e.error(n,t.get())}}}},998:(e,t,n)=>{n.d(t,{l:()=>i});class i{constructor(e){var t;this.config=e,this.shouldUsePerformanceMark=!1,this.placeholderSpan={spanId:null,finish:()=>({})},this.shouldUsePerformanceMark=(null===(t=null===window||void 0===window?void 0:window.performance)||void 0===t?void 0:t.mark)&&this.config.tracingEnabled}startSpan(e){var t;if(this.shouldUsePerformanceMark){const n=this.generateId(),i=`permutive_${e}`,r=`${i}${n}_start`;return null===(t=null===window||void 0===window?void 0:window.performance)||void 0===t||t.mark(r),{spanId:r,finish:()=>{var e,t;null===(t=null===(e=null===window||void 0===window?void 0:window.performance)||void 0===e?void 0:e.measure)||void 0===t||t.call(e,i,r)}}}return this.placeholderSpan}generateId(){return"_"+Math.random().toString(36).substr(2,9)}}},9409:(e,t,n)=>{n.d(t,{b:()=>i});class i{constructor(){this.events=[],this.listeners=[]}newEvent(e,t){this.events.push([e,t]),[...this.listeners].forEach((n=>{this.handle(e,t,n)}))}addListener(e){this.listeners.push(e);const t={replay:()=>(this.replay(e),t),remove:()=>(this.remove(e),t)};return t}handle(e,t,n){const i="string"==typeof n.name&&e.name===n.name,r=n.name.test&&n.name.test(e.name),s=i||r;if(s)try{n.callback(e,t)}catch(e){window.console&&window.console.error&&window.console.error("callback error: ",e)}s&&n.once&&this.remove(n)}replay(e){let t=-1!==this.listeners.indexOf(e);for(let n=0;n<this.events.length&&t;n++)this.handle(this.events[n][0],this.events[n][1],e),t=-1!==this.listeners.indexOf(e)}remove(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}}},6745:(e,t,n)=>{n.d(t,{H:()=>s});var i=n(9320),r=n(3735);const s=e=>(0,r.zG)((0,i.xH)(e),(0,i.u4)({},((e,t)=>Object.assign(Object.assign({},e),{[t.name]:t.import}))))},7545:(e,t,n)=>{n.d(t,{b:()=>r});var i=n(6013);class r{constructor(e,t){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=t}schedule(e,t=this.timeoutDurationInMilliseconds,n=this.maxTimeOutDurationInMilliseconds){return this.debounce(e,t,n)}scheduleAccumulated(e,t,n=this.timeoutDurationInMilliseconds,i=this.maxTimeOutDurationInMilliseconds){return this.debounce(e,n,i,t)}scheduleForPageUnload(e){return(0,i.aq)(e,navigator.userAgent)}debounce(e,t,n,r){let s,o,a=null==r?void 0:r.empty,c=[];return u=>{r&&(a=r.concat(a,u));const d=(0,i.b2)();c.push(d);return s&&window.clearTimeout(s),s=window.setTimeout((()=>{window.clearTimeout(o),o=null;const t=e(r?a:u);c.forEach((e=>e.resolve(t))),a=null==r?void 0:r.empty,c=[]}),t),o||(o=window.setTimeout((()=>{window.clearTimeout(s),o=null;const t=e(r?a:u);c.forEach((e=>e.resolve(t))),a=null==r?void 0:r.empty,c=[]}),n)),d.promise}}}},7749:(e,t,n)=>{n.d(t,{i:()=>i});class i{constructor(e){this.messages=e,this.queue=[],this.nextNotify=null,e.on("permutive:taskQueue:update",(()=>{this.execute()}))}add(e){this.queue.push(e),this.notify()}notify(){const e=()=>{this.messages.emit("permutive:taskQueue:update")},t=(new Date).getTime();null===this.nextNotify||this.nextNotify<t-50?(this.nextNotify=t,e()):this.nextNotify<=t&&(this.nextNotify=t+50,window.setTimeout(e,50))}execute(){if(0===this.queue.length)return;let e=!1,t=!1,n=0;for(let i=0;i<this.queue.length;i++){const r=this.queue[i];if(r.complete)n+=1;else if(r.started)t=!0,e=e||r.blocks();else{if(r.waits()&&t)break;e||(t=!0,e=e||r.blocks(),r.execute((()=>{this.notify()})))}}this.queue.splice(0,n)}size(){return this.queue.length}}},3629:(e,t,n)=>{n.d(t,{_Y:()=>o,bk:()=>s,zM:()=>r});var i=n(3735);const r=()=>{var e,t;const n=null===(t=null===(e=window.location.href.split("?")[1])||void 0===e?void 0:e.split("#")[0])||void 0===t?void 0:t.split("&");return void 0===n?{}:n.reduce(((e,t)=>{const[n,i]=t.split("=");return Object.assign(Object.assign({},e),{[n]:i})}),{})},s=e=>{if(!e)return"";return(0,i.zG)(e,(e=>{const t=e.length-1;return"/"===e[t]?e.slice(0,t):e}))};function o(e){const t=e.match(/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/),n=e.match(/[a-z0-9][a-z0-9-]+\.[a-z.]{2,24}$/i),i=e.match(/localhost/);if((null==n?void 0:n.length)>0){const t=e.split(".").reverse();return t.length>=3&&t[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?t[2]+"."+t[1]+"."+t[0]:t[1]+"."+t[0]}return(null==t?void 0:t.length)>0?t[0]:(null==i?void 0:i.length)>0?"localhost":""}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={},Either,es6_function,permutiveWeb;Either=__webpack_require__(70),es6_function=__webpack_require__(3735),permutiveWeb=__webpack_require__(6992),(0,permutiveWeb.f)().then((0,Either.g_)((e=>console.warn(`Permutive was not initialized. ${e}`)),es6_function.Q1))})();